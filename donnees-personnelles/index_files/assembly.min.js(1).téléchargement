var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

(function initDyduAngular(){
    var existingAngular = window.angular;
    var angular = (window.angular = {});
    
var overriddenConfigurations={language:isDefined(window.DYDU_LANGUAGE)?window.DYDU_LANGUAGE:null,consultationSpace:isDefined(window.DYDU_CONSULTATION_SPACE)?window.DYDU_CONSULTATION_SPACE:null,botId:isDefined(window.DYDU_BOT_ID)?window.DYDU_BOT_ID:null,servletUrl:isDefined(window.DYDU_SERVLET_URL)?window.DYDU_SERVLET_URL:null,backupServletUrl:isDefined(window.DYDU_BACKUP_SERVLET_URL)?window.DYDU_BACKUP_SERVLET_URL:null,qualificationMode:isDefined(window.DYDU_QUALIFICATION_MODE)?window.DYDU_QUALIFICATION_MODE:
null};var dyduUtils={};function isDefined(obj){return typeof obj!=="undefined"&&obj!==null}
(function(){dyduUtils.isDefined=isDefined;dyduUtils.isNotDefined=isNotDefined;dyduUtils.getWindowHeight=getWindowHeight;dyduUtils.getWindowWidth=getWindowWidth;dyduUtils.clone=clone;dyduUtils.getJsBaseUrl=getJsBaseUrl;dyduUtils.getBrowserInfo=getBrowserInfo;dyduUtils.getOsInfo=getOsInfo;dyduUtils.getQueryVariable=getQueryVariable;dyduUtils.formatTime=formatTime;dyduUtils.getPopinWidth=getPopinWidth;dyduUtils.isSpecialKeyWord=isSpecialKeyWord;dyduUtils.isScrolledToBottom=isScrolledToBottom;dyduUtils.isMobileDevice=
isMobileDevice;dyduUtils.isTabletDevice=isTabletDevice;dyduUtils.isInvalidUrl=isInvalidUrl;dyduUtils.parseDate=parseDate;dyduUtils.renderHtml=renderHtml;function isNotDefined(obj){return!isDefined(obj)}function getWindowHeight(){var windowHeight=0;if(typeof window.innerHeight==="number")windowHeight=window.innerHeight;else if(document.documentElement&&document.documentElement.clientHeight)windowHeight=document.documentElement.clientHeight;else if(document.body&&document.body.clientHeight)windowHeight=
document.body.clientHeight;return windowHeight}function getWindowWidth(){var windowWidth=0;if(typeof window.innerWidth==="number")windowWidth=window.innerWidth;else if(document.documentElement&&document.documentElement.clientWidth)windowWidth=document.documentElement.clientWidth;else if(document.body&&document.body.clientWidth)windowWidth=document.body.clientWidth;return windowWidth}function clone(obj){if(isDefined(obj))return JSON.parse(JSON.stringify(obj));else return undefined}var fileNameRegex=
new RegExp("/([^/\\?]+)[^/]*$");function resolveDeployment(baseUri){var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var fileName1=fileNameRegex.exec(baseUri);var fileName2=fileNameRegex.exec(scripts[i].src);if(fileName1&&fileName2&&fileName1[1]===fileName2[1]&&baseUri!==scripts[i].src&&scripts[i].src.indexOf("/deployments")>0)return resolveUrl(scripts[i])}return baseUri}function resolveUrl(myScript){var myScriptSrc=myScript.getAttribute("src");return(new dyduURI(myScriptSrc)).resolve(new dyduURI(window.location.href)).toString()}
function getJsBaseUrl($log){try{var myScript=document.getElementById(DYDU_SCRIPT_ID);if(myScript==null&&isDefined($log))$log.error("The chatbox isn't included with id\x3d'"+DYDU_SCRIPT_ID+"' for url\x3d"+window.location.href);var resolved=resolveDeployment(resolveUrl(myScript));return resolved.substring(0,resolved.lastIndexOf("/")+1)}catch(eee){if(isDefined($log))$log.error("Error in dydu_getJsBaseUrl"+eee);return""}}function renderHtml(htmlCode){return angular.element("\x3ctextarea /\x3e").html(htmlCode).text()}
function isScrolledToBottom(htmlElement){if(isDefined(htmlElement))return htmlElement.scrollTop+htmlElement.offsetHeight+5>=htmlElement.scrollHeight;return false}function dyduURI(str){str=!str?"":str;var parser=/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/;var result=str.match(parser);this.scheme=result[1]||null;this.authority=result[2]||null;this.path=result[3]||null;this.query=result[4]||null;this.fragment=result[5]||null}dyduURI.prototype.toString=function(){var str=
"";if(this.scheme)str+=this.scheme+":";if(this.authority)str+="//"+this.authority;if(this.path)str+=this.path;if(this.query)str+="?"+this.query;if(this.fragment)str+="#"+this.fragment;return str};(function(){function merge(base,rel_path){var dirname=/^(.*)\//;if(base.authority&&!base.path)return"/"+rel_path;else return base.path.match(dirname)[0]+rel_path}var DoubleDot=/\/((?!\.\.\/)[^\/]*)\/\.\.\//;function removeDotSegments(path){if(!path)return"";var newpath=path.replace(/\/\.\//g,"/");newpath=
newpath.replace(/\/\.$/,"/");while(newpath.match(DoubleDot))newpath=newpath.replace(DoubleDot,"/");newpath=newpath.replace(/\/([^\/]*)\/\.\.$/,"/");while(newpath.match(/\/\.\.\//))newpath=newpath.replace(/\/\.\.\//,"/");return newpath}dyduURI.prototype.resolve=function(base){var target=new dyduURI;if(this.scheme){target.scheme=this.scheme;target.authority=this.authority;target.path=removeDotSegments(this.path);target.query=this.query}else{if(this.authority){target.authority=this.authority;target.path=
removeDotSegments(this.path);target.query=this.query}else{if(!this.path){target.path=base.path;if(this.query)target.query=this.query;else target.query=base.query}else{if(this.path.charAt(0)==="/")target.path=removeDotSegments(this.path);else{target.path=merge(base,this.path);target.path=removeDotSegments(target.path)}target.query=this.query}target.authority=base.authority}target.scheme=base.scheme}target.fragment=this.fragment;return target}})();var BrowserDetect={init:function(){var params={navUserAgent:navigator.userAgent,
navAppVersion:navigator.appVersion,navPlatform:navigator.platform,navVendor:navigator.vendor,winOpera:window.opera};this.initWithParams(params)},initWithParams:function(params){var browserInfo=function(){var ua=navigator.userAgent,tem,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(M[1])){tem=/\brv[ :]+(\d+)/g.exec(ua)||[];return"MSIE "+(tem[1]||"")}if(M[1]==="Chrome"){tem=ua.match(/\b(OPR|Edge)\/(\d+)/);if(tem!=null)return tem.slice(1).join(" ").replace("OPR",
"Opera")}M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"];if((tem=ua.match(/version\/(\d+)/i))!=null)M.splice(1,1,tem[1]);return M.join(" ")}();this.browser=browserInfo.split(" ")[0];this.version=browserInfo.split(" ")[1];this.OS="Unknown OS ("+params.navPlatform+" --- "+params.navUserAgent+")";var os=this.searchString(this.dataOS,params);if(os){this.OS=os;var version=this.searchVersion(params.navUserAgent,this.versionOsSearchString);if(version)this.OS+=" "+version}},isDefined:function(content){return typeof content!==
"undefined"&&content!==""&&content!=null},searchString:function(data,params){for(var i=0;i<data.length;i++){var dataString;if(this.isDefined(data[i].string))dataString=params[data[i].string];this.versionSearchString=data[i].versionSearch||data[i].identity;this.versionOsSearchString=data[i].versionOsSearchString;if(this.isDefined(dataString)&&dataString.indexOf(data[i].subString)!==-1)return data[i].identity}},searchVersion:function(dataString,ss){var index=dataString.indexOf(ss);var version;if(index>
-1){version=dataString.substring(index+ss.length+1);var indexEnd1=version.indexOf(";");var indexEnd2=version.indexOf(" ");var indexEnd=this.getClosestIndex(indexEnd1,indexEnd2);if(indexEnd>-1)version=version.substring(0,indexEnd);version=version.replace(/^\//g,"").replace(/^\s+/g,"").replace(/\s+$/g,"");if(version.substring(version.length-1)===")")version=version.substring(0,version.length-1)}return version},getClosestIndex:function(idx1,idx2){var idx;if(idx1===-1)idx=idx2;else if(idx2===-1)idx=idx1;
else idx=Math.min(idx1,idx2);return idx},dataOS:[{string:"navPlatform",subString:"Win",identity:"Windows",versionOsSearchString:"Windows NT"},{string:"navPlatform",subString:"Mac",identity:"Mac",versionOsSearchString:"Mac"},{string:"navUserAgent",subString:"iPhone",identity:"iPhone/iPod",versionOsSearchString:"ios"},{string:"navUserAgent",subString:"iPad",identity:"iPad",versionOsSearchString:"ios"},{string:"navUserAgent",subString:"BlackBerry",identity:"BlackBerry",versionOsSearchString:"BlackBerry"},
{string:"navPlatform",subString:"Bada",identity:"Bada",versionOsSearchString:"Bada"},{string:"navPlatform",subString:"Series60",identity:"Series60",versionOsSearchString:"Series60"},{string:"navPlatform",subString:"Symbian",identity:"Symbian",versionOsSearchString:"SymbianOS"},{string:"navUserAgent",subString:"Android",identity:"Android",versionOsSearchString:"Android"},{string:"navUserAgent",subString:"SAMSUNG",identity:"SAMSUNG",versionOsSearchString:"SAMSUNG"},{string:"navPlatform",subString:"Linux",
identity:"Linux",versionOsSearchString:"Linux"}]};function getQueryVariable(variable){if(window.location.href.indexOf("?")===-1)return"";var query=window.location.href.substring(window.location.href.indexOf("?")+1);var vars=query.split("\x26");for(var i=0;i<vars.length;i++){var pair=vars[i].split("\x3d");if(decodeURIComponent(pair[0])===variable)return decodeURIComponent(pair[1])}return""}function formatTime(seconds,$scope){if(dyduUtils.isDefined(seconds)){if(seconds<=60)return $scope.resources.get("time.lessthan1minute");
if(seconds<=120)return $scope.resources.get("time.between")+" 1 "+$scope.resources.get("time.and")+" 2 "+$scope.resources.get("time.minutes");if(seconds<=180)return $scope.resources.get("time.between")+" 2 "+$scope.resources.get("time.and")+" 3 "+$scope.resources.get("time.minutes");if(seconds<=300)return $scope.resources.get("time.between")+" 3 "+$scope.resources.get("time.and")+" 5 "+$scope.resources.get("time.minutes");if(seconds<=600)return $scope.resources.get("time.between")+" 5 "+$scope.resources.get("time.and")+
" 10 "+$scope.resources.get("time.minutes");return $scope.resources.get("time.morethan")+" 10 "+$scope.resources.get("time.minutes")}}BrowserDetect.init();function getBrowserInfo(){return BrowserDetect.browser+" "+BrowserDetect.version}function getOsInfo(){return BrowserDetect.OS}function getPopinWidth(){var popin=document.getElementById("dydu-popin");if(dyduUtils.isDefined(popin)){var popinComputedStyle=popin.currentStyle||window.getComputedStyle(popin);return parseInt(popinComputedStyle.width.replace("px",
""))}else return 0}function isSpecialKeyWord(text){return text==="#feedback#"||text==="#comment#"||text==="#chatboxinfos#"||text==="#contextvariables#"||text==="#newdialog#"}var mobileDevice=false;var tabletDevice=false;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var compliantScreenSize=screen.width>=480&&screen.height>=800||screen.width>=800&&screen.height>=480;if(compliantScreenSize||navigator.userAgent.match(/ipad/gi))tabletDevice=true;else mobileDevice=
true}function isMobileDevice(){return mobileDevice}function isTabletDevice(){return tabletDevice}function isInvalidUrl(){var href=window.location.href;if(href.indexOf("webcache.googleusercontent.com")!==-1)return true;if(href.indexOf("bingj.com")!==-1)return true;if(href.indexOf(".live.com")!==-1)return true;if(href.indexOf(".yahoo.com")!==-1)return true;if(href.indexOf("file://")!==-1)return true;if(href.indexOf("about:blank")!==-1)return true;return false}function parseDate(formattedDate,$log){try{var dayInfo=
formattedDate.split(" ")[0].split("/");var hourInfo=formattedDate.split(" ")[1].split(":");return(new Date(dayInfo[2],dayInfo[1]-1,dayInfo[0],hourInfo[0],hourInfo[1],hourInfo[2])).getTime()}catch(e){if(isDefined($log))$log.error("Could not parse date\x3d"+formattedDate)}}})();
/*
 HTML5 Shiv 3.7.2 | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed
*/
(function(window,document){var version="3.7.2";var options=window.html5||{};var reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var supportsHtml5Styles;var expando="_html5shiv";var expanID=0;var expandoData={};var supportsUnknownElements;(function(){try{var a=document.createElement("a");a.innerHTML="\x3cxyz\x3e\x3c/xyz\x3e";supportsHtml5Styles="hidden"in
a;supportsUnknownElements=a.childNodes.length==1||function(){document.createElement("a");var frag=document.createDocumentFragment();return typeof frag.cloneNode=="undefined"||typeof frag.createDocumentFragment=="undefined"||typeof frag.createElement=="undefined"}()}catch(e){supportsHtml5Styles=true;supportsUnknownElements=true}})();function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement("p"),parent=ownerDocument.getElementsByTagName("head")[0]||ownerDocument.documentElement;
p.innerHTML="x\x3cstyle\x3e"+cssText+"\x3c/style\x3e";return parent.insertBefore(p.lastChild,parent.firstChild)}function getElements(){var elements=html5.elements;return typeof elements=="string"?elements.split(" "):elements}function addElements(newElements,ownerDocument){var elements=html5.elements;if(typeof elements!="string")elements=elements.join(" ");if(typeof newElements!="string")newElements=newElements.join(" ");html5.elements=elements+" "+newElements;shivDocument(ownerDocument)}function getExpandoData(ownerDocument){var data=
expandoData[ownerDocument[expando]];if(!data){data={};expanID++;ownerDocument[expando]=expanID;expandoData[expanID]=data}return data}function createElement(nodeName,ownerDocument,data){if(!ownerDocument)ownerDocument=document;if(supportsUnknownElements)return ownerDocument.createElement(nodeName);if(!data)data=getExpandoData(ownerDocument);var node;if(data.cache[nodeName])node=data.cache[nodeName].cloneNode();else if(saveClones.test(nodeName))node=(data.cache[nodeName]=data.createElem(nodeName)).cloneNode();
else node=data.createElem(nodeName);return node.canHaveChildren&&!reSkip.test(nodeName)&&!node.tagUrn?data.frag.appendChild(node):node}function createDocumentFragment(ownerDocument,data){if(!ownerDocument)ownerDocument=document;if(supportsUnknownElements)return ownerDocument.createDocumentFragment();data=data||getExpandoData(ownerDocument);var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;for(;i<l;i++)clone.createElement(elems[i]);return clone}function shivMethods(ownerDocument,
data){if(!data.cache){data.cache={};data.createElem=ownerDocument.createElement;data.createFrag=ownerDocument.createDocumentFragment;data.frag=data.createFrag()}ownerDocument.createElement=function(nodeName){if(!html5.shivMethods)return data.createElem(nodeName);return createElement(nodeName,ownerDocument,data)};ownerDocument.createDocumentFragment=Function("h,f","return function(){"+"var n\x3df.cloneNode(),c\x3dn.createElement;"+"h.shivMethods\x26\x26("+getElements().join().replace(/[\w\-:]+/g,function(nodeName){data.createElem(nodeName);
data.frag.createElement(nodeName);return'c("'+nodeName+'")'})+");return n}")(html5,data.frag)}function shivDocument(ownerDocument){if(!ownerDocument)ownerDocument=document;var data=getExpandoData(ownerDocument);if(html5.shivCSS&&!supportsHtml5Styles&&!data.hasCSS)data.hasCSS=!!addStyleSheet(ownerDocument,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}"+"mark{background:#FF0;color:#000}"+"template{display:none}");if(!supportsUnknownElements)shivMethods(ownerDocument,
data);return ownerDocument}var html5={"elements":options.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video","version":version,"shivCSS":options.shivCSS!==false,"supportsUnknownElements":supportsUnknownElements,"shivMethods":options.shivMethods!==false,"type":"default","shivDocument":shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment,
addElements:addElements};window.html5=html5;shivDocument(document)})(this,document);
/**
 * define document.querySelector & document.querySelectorAll for IE7
 *
 * A not very fast but small hack. The approach is taken from
 * http://weblogs.asp.net/bleroy/archive/2009/08/31/queryselectorall-on-old-ie-versions-something-that-doesn-t-work.aspx
 *
 */
msie = parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1],10);
if (isNaN(msie)) {
    msie = parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1],10);
}
if (msie<=8)
    (function () {
        var
            style = document.createStyleSheet(),
            select = function (selector, maxCount) {
                var
                    all = document.all,
                    l = all.length,
                    i,
                    resultSet = [];

                style.addRule(selector, "foo:bar");
                for (i = 0; i < l; i += 1) {
                    if (all[i].currentStyle.foo === "bar") {
                        resultSet.push(all[i]);
                        if (resultSet.length > maxCount) {
                            break;
                        }
                    }
                }
                style.removeRule(0);
                return resultSet;

            };

        //  be rly sure not to destroy a thing!
        if (document.querySelectorAll || document.querySelector) {
            return;
        }

        document.querySelectorAll = function (selector) {
            if(selector.indexOf("ng\\:app")){
                return [];
            }
            return select(selector, Infinity);
        };
        document.querySelector = function (selector) {
            if(selector.indexOf("ng\\:app")){
                return [];
            }
            return select(selector, 1)[0] || null;
        };
    }());


if (window.jQuery !== undefined)
    window.dydujQuery = window.jQuery.noConflict(true);

if(msie<=8)if(typeof JSON!=="object")JSON={};
if(msie<=8)(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=
/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=
gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function")value=value.toJSON(key);if(typeof rep==="function")value=rep.call(holder,key,value);switch(typeof value){case "string":return quote(value);case "number":return isFinite(value)?String(value):"null";case "boolean":case "null":return String(value);case "object":if(!value)return"null";gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=
1)partial[i]=str(i,value)||"null";v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}}}else for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+
gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function")JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number")for(i=0;i<space;i+=1)indent+=" ";else if(typeof space==="string")indent=space;rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number"))throw new Error("JSON.stringify");return str("",{"":value})};if(typeof JSON.parse!=="function")JSON.parse=
function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object")for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined)value[k]=v;else delete value[k]}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse");}})();
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(W,X,t){'use strict';function C(b){return function(){var a=arguments[0],c,a="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.2.26/"+(b?b+"/":"")+a;for(c=1;c<arguments.length;c++)a=a+(1==c?"?":"&")+"p"+(c-1)+"="+encodeURIComponent("function"==typeof arguments[c]?arguments[c].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[c]?"undefined":"string"!=typeof arguments[c]?JSON.stringify(arguments[c]):arguments[c]);return Error(a)}}function Pa(b){if(null==b||Ga(b))return!1;
var a=b.length;return 1===b.nodeType&&a?!0:v(b)||J(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function r(b,a,c){var d;if(b)if(P(b))for(d in b)"prototype"==d||("length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d))||a.call(c,b[d],d);else if(J(b)||Pa(b))for(d=0;d<b.length;d++)a.call(c,b[d],d);else if(b.forEach&&b.forEach!==r)b.forEach(a,c);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d);return b}function Zb(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}function Tc(b,
a,c){for(var d=Zb(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function $b(b){return function(a,c){b(c,a)}}function hb(){for(var b=ma.length,a;b;){b--;a=ma[b].charCodeAt(0);if(57==a)return ma[b]="A",ma.join("");if(90==a)ma[b]="0";else return ma[b]=String.fromCharCode(a+1),ma.join("")}ma.unshift("0");return ma.join("")}function ac(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function D(b){var a=b.$$hashKey;r(arguments,function(a){a!==b&&r(a,function(a,c){b[c]=a})});ac(b,a);return b}function U(b){return parseInt(b,
10)}function bc(b,a){return D(new (D(function(){},{prototype:b})),a)}function E(){}function Qa(b){return b}function ba(b){return function(){return b}}function x(b){return"undefined"===typeof b}function y(b){return"undefined"!==typeof b}function T(b){return null!=b&&"object"===typeof b}function v(b){return"string"===typeof b}function ib(b){return"number"===typeof b}function ta(b){return"[object Date]"===za.call(b)}function P(b){return"function"===typeof b}function jb(b){return"[object RegExp]"===za.call(b)}
function Ga(b){return b&&b.document&&b.location&&b.alert&&b.setInterval}function Uc(b){return!(!b||!(b.nodeName||b.prop&&b.attr&&b.find))}function Vc(b,a,c){var d=[];r(b,function(b,f,g){d.push(a.call(c,b,f,g))});return d}function Ra(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function Sa(b,a){var c=Ra(b,a);0<=c&&b.splice(c,1);return a}function Ha(b,a,c,d){if(Ga(b)||b&&b.$evalAsync&&b.$watch)throw Ta("cpws");if(a){if(b===a)throw Ta("cpi");c=c||[];
d=d||[];if(T(b)){var e=Ra(c,b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(J(b))for(var f=a.length=0;f<b.length;f++)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);else{var g=a.$$hashKey;J(a)?a.length=0:r(a,function(b,c){delete a[c]});for(f in b)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e;ac(a,g)}}else if(a=b)J(b)?a=Ha(b,[],c,d):ta(b)?a=new Date(b.getTime()):jb(b)?(a=RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex):T(b)&&(a=Ha(b,{},c,d));
return a}function ha(b,a){if(J(b)){a=a||[];for(var c=0;c<b.length;c++)a[c]=b[c]}else if(T(b))for(c in a=a||{},b)!kb.call(b,c)||"$"===c.charAt(0)&&"$"===c.charAt(1)||(a[c]=b[c]);return a||b}function Aa(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(J(b)){if(!J(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!Aa(b[d],a[d]))return!1;return!0}}else{if(ta(b))return ta(a)?isNaN(b.getTime())&&isNaN(a.getTime())||b.getTime()===
a.getTime():!1;if(jb(b)&&jb(a))return b.toString()==a.toString();if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||Ga(b)||Ga(a)||J(a))return!1;c={};for(d in b)if("$"!==d.charAt(0)&&!P(b[d])){if(!Aa(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!P(a[d]))return!1;return!0}return!1}function Bb(b,a){var c=2<arguments.length?Ba.call(arguments,2):[];return!P(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,c.concat(Ba.call(arguments,
0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function Wc(b,a){var c=a;"string"===typeof b&&"$"===b.charAt(0)?c=t:Ga(a)?c="$WINDOW":a&&X===a?c="$DOCUMENT":a&&(a.$evalAsync&&a.$watch)&&(c="$SCOPE");return c}function na(b,a){return"undefined"===typeof b?t:JSON.stringify(b,Wc,a?"  ":null)}function cc(b){return v(b)?JSON.parse(b):b}function Ua(b){"function"===typeof b?b=!0:b&&0!==b.length?(b=K(""+b),b=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)):b=!1;
return b}function ia(b){b=w(b).clone();try{b.empty()}catch(a){}var c=w("<div>").append(b).html();try{return 3===b[0].nodeType?K(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+K(b)})}catch(d){return K(c)}}function dc(b){try{return decodeURIComponent(b)}catch(a){}}function ec(b){var a={},c,d;r((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=dc(c[0]),y(d)&&(b=y(c[1])?dc(c[1]):!0,kb.call(a,d)?J(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Cb(b){var a=
[];r(b,function(b,d){J(b)?r(b,function(b){a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))}):a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))});return a.length?a.join("&"):""}function lb(b){return Ca(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ca(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}function Xc(b,a){function c(a){a&&d.push(a)}var d=[b],e,f,g=["ng:app","ng-app","x-ng-app",
"data-ng-app"],k=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;r(g,function(a){g[a]=!0;c(X.getElementById(a));a=a.replace(":","\\:");b.querySelectorAll&&(r(b.querySelectorAll("."+a),c),r(b.querySelectorAll("."+a+"\\:"),c),r(b.querySelectorAll("["+a+"]"),c))});r(d,function(a){if(!e){var b=k.exec(" "+a.className+" ");b?(e=a,f=(b[2]||"").replace(/\s+/g,",")):r(a.attributes,function(b){!e&&g[b.name]&&(e=a,f=b.value)})}});e&&a(e,f?[f]:[])}function fc(b,a){var c=function(){b=w(b);if(b.injector()){var c=b[0]===X?
"document":ia(b);throw Ta("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);a.unshift("ng");c=gc(a);c.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},d=/^NG_DEFER_BOOTSTRAP!/;if(W&&!d.test(W.name))return c();W.name=W.name.replace(d,"");Va.resumeBootstrap=function(b){r(b,function(b){a.push(b)});c()}}function mb(b,a){a=
a||"_";return b.replace(Yc,function(b,d){return(d?a:"")+b.toLowerCase()})}function Db(b,a,c){if(!b)throw Ta("areq",a||"?",c||"required");return b}function Wa(b,a,c){c&&J(b)&&(b=b[b.length-1]);Db(P(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Da(b,a){if("hasOwnProperty"===b)throw Ta("badname",a);}function hc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&P(b)?Bb(e,b):b}function Eb(b){var a=
b[0];b=b[b.length-1];if(a===b)return w(a);var c=[a];do{a=a.nextSibling;if(!a)break;c.push(a)}while(a!==b);return w(c)}function Zc(b){var a=C("$injector"),c=C("ng");b=b.angular||(b.angular={});b.$$minErr=b.$$minErr||C;return b.module||(b.module=function(){var b={};return function(e,f,g){if("hasOwnProperty"===e)throw c("badname","module");f&&b.hasOwnProperty(e)&&(b[e]=null);return b[e]||(b[e]=function(){function b(a,d,e){return function(){c[e||"push"]([a,d,arguments]);return n}}if(!f)throw a("nomod",
e);var c=[],d=[],l=b("$injector","invoke"),n={_invokeQueue:c,_runBlocks:d,requires:f,name:e,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:b("$provide","value"),constant:b("$provide","constant","unshift"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:l,run:function(a){d.push(a);return this}};g&&l(g);return n}())}}())}
function $c(b){D(b,{bootstrap:fc,copy:Ha,extend:D,equals:Aa,element:w,forEach:r,injector:gc,noop:E,bind:Bb,toJson:na,fromJson:cc,identity:Qa,isUndefined:x,isDefined:y,isString:v,isFunction:P,isObject:T,isNumber:ib,isElement:Uc,isArray:J,version:ad,isDate:ta,lowercase:K,uppercase:Ia,callbacks:{counter:0},$$minErr:C,$$csp:Xa});Ya=Zc(W);try{Ya("ngLocale")}catch(a){Ya("ngLocale",[]).provider("$locale",bd)}Ya("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:cd});a.provider("$compile",
ic).directive({a:dd,input:jc,textarea:jc,form:ed,script:fd,select:gd,style:hd,option:id,ngBind:jd,ngBindHtml:kd,ngBindTemplate:ld,ngClass:md,ngClassEven:nd,ngClassOdd:od,ngCloak:pd,ngController:qd,ngForm:rd,ngHide:sd,ngIf:td,ngInclude:ud,ngInit:vd,ngNonBindable:wd,ngPluralize:xd,ngRepeat:yd,ngShow:zd,ngStyle:Ad,ngSwitch:Bd,ngSwitchWhen:Cd,ngSwitchDefault:Dd,ngOptions:Ed,ngTransclude:Fd,ngModel:Gd,ngList:Hd,ngChange:Id,required:kc,ngRequired:kc,ngValue:Jd}).directive({ngInclude:Kd}).directive(Fb).directive(lc);
a.provider({$anchorScroll:Ld,$animate:Md,$browser:Nd,$cacheFactory:Od,$controller:Pd,$document:Qd,$exceptionHandler:Rd,$filter:mc,$interpolate:Sd,$interval:Td,$http:Ud,$httpBackend:Vd,$location:Wd,$log:Xd,$parse:Yd,$rootScope:Zd,$q:$d,$sce:ae,$sceDelegate:be,$sniffer:ce,$templateCache:de,$timeout:ee,$window:fe,$$rAF:ge,$$asyncCallback:he})}])}function Za(b){return b.replace(ie,function(a,b,d,e){return e?d.toUpperCase():d}).replace(je,"Moz$1")}function Gb(b,a,c,d){function e(b){var e=c&&b?[this.filter(b)]:
[this],m=a,h,l,n,p,q,s;if(!d||null!=b)for(;e.length;)for(h=e.shift(),l=0,n=h.length;l<n;l++)for(p=w(h[l]),m?p.triggerHandler("$destroy"):m=!m,q=0,p=(s=p.children()).length;q<p;q++)e.push(Ea(s[q]));return f.apply(this,arguments)}var f=Ea.fn[b],f=f.$original||f;e.$original=f;Ea.fn[b]=e}function S(b){if(b instanceof S)return b;v(b)&&(b=aa(b));if(!(this instanceof S)){if(v(b)&&"<"!=b.charAt(0))throw Hb("nosel");return new S(b)}if(v(b)){var a=b;b=X;var c;if(c=ke.exec(a))b=[b.createElement(c[1])];else{var d=
b,e;b=d.createDocumentFragment();c=[];if(Ib.test(a)){d=b.appendChild(d.createElement("div"));e=(le.exec(a)||["",""])[1].toLowerCase();e=ea[e]||ea._default;d.innerHTML="<div>&#160;</div>"+e[1]+a.replace(me,"<$1></$2>")+e[2];d.removeChild(d.firstChild);for(a=e[0];a--;)d=d.lastChild;a=0;for(e=d.childNodes.length;a<e;++a)c.push(d.childNodes[a]);d=b.firstChild;d.textContent=""}else c.push(d.createTextNode(a));b.textContent="";b.innerHTML="";b=c}Jb(this,b);w(X.createDocumentFragment()).append(this)}else Jb(this,
b)}function Kb(b){return b.cloneNode(!0)}function Ja(b){Lb(b);var a=0;for(b=b.childNodes||[];a<b.length;a++)Ja(b[a])}function nc(b,a,c,d){if(y(d))throw Hb("offargs");var e=oa(b,"events");oa(b,"handle")&&(x(a)?r(e,function(a,c){$a(b,c,a);delete e[c]}):r(a.split(" "),function(a){x(c)?($a(b,a,e[a]),delete e[a]):Sa(e[a]||[],c)}))}function Lb(b,a){var c=b.ng339,d=ab[c];d&&(a?delete ab[c].data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),nc(b)),delete ab[c],b.ng339=t))}function oa(b,a,c){var d=
b.ng339,d=ab[d||-1];if(y(c))d||(b.ng339=d=++ne,d=ab[d]={}),d[a]=c;else return d&&d[a]}function Mb(b,a,c){var d=oa(b,"data"),e=y(c),f=!e&&y(a),g=f&&!T(a);d||g||oa(b,"data",d={});if(e)d[a]=c;else if(f){if(g)return d&&d[a];D(d,a)}else return d}function Nb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function nb(b,a){a&&b.setAttribute&&r(a.split(" "),function(a){b.setAttribute("class",aa((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g,
" ").replace(" "+aa(a)+" "," ")))})}function ob(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(a.split(" "),function(a){a=aa(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});b.setAttribute("class",aa(c))}}function Jb(b,a){if(a){a=a.nodeName||!y(a.length)||Ga(a)?[a]:a;for(var c=0;c<a.length;c++)b.push(a[c])}}function oc(b,a){return pb(b,"$"+(a||"ngController")+"Controller")}function pb(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=J(a)?a:[a];b;){for(var d=
0,e=a.length;d<e;d++)if((c=w.data(b,a[d]))!==t)return c;b=b.parentNode||11===b.nodeType&&b.host}}function pc(b){for(var a=0,c=b.childNodes;a<c.length;a++)Ja(c[a]);for(;b.firstChild;)b.removeChild(b.firstChild)}function qc(b,a){var c=qb[a.toLowerCase()];return c&&rc[b.nodeName]&&c}function oe(b,a){var c=function(c,e){c.preventDefault||(c.preventDefault=function(){c.returnValue=!1});c.stopPropagation||(c.stopPropagation=function(){c.cancelBubble=!0});c.target||(c.target=c.srcElement||X);if(x(c.defaultPrevented)){var f=
c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0;f.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=function(){return c.defaultPrevented||!1===c.returnValue};var g=ha(a[e||c.type]||[]);r(g,function(a){a.call(b,c)});8>=Q?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};c.elem=b;return c}function Ka(b,a){var c=typeof b,d;"function"==c||"object"==c&&null!==b?"function"==typeof(d=
b.$$hashKey)?d=b.$$hashKey():d===t&&(d=b.$$hashKey=(a||hb)()):d=b;return c+":"+d}function bb(b,a){if(a){var c=0;this.nextUid=function(){return++c}}r(b,this.put,this)}function sc(b){var a,c;"function"===typeof b?(a=b.$inject)||(a=[],b.length&&(c=b.toString().replace(pe,""),c=c.match(qe),r(c[1].split(re),function(b){b.replace(se,function(b,c,d){a.push(d)})})),b.$inject=a):J(b)?(c=b.length-1,Wa(b[c],"fn"),a=b.slice(0,c)):Wa(b,"fn",!0);return a}function gc(b){function a(a){return function(b,c){if(T(b))r(b,
$b(a));else return a(b,c)}}function c(a,b){Da(a,"service");if(P(b)||J(b))b=n.instantiate(b);if(!b.$get)throw cb("pget",a);return l[a+k]=b}function d(a,b){return c(a,{$get:b})}function e(a){var b=[],c,d,f,k;r(a,function(a){if(!h.get(a)){h.put(a,!0);try{if(v(a))for(c=Ya(a),b=b.concat(e(c.requires)).concat(c._runBlocks),d=c._invokeQueue,f=0,k=d.length;f<k;f++){var g=d[f],m=n.get(g[0]);m[g[1]].apply(m,g[2])}else P(a)?b.push(n.invoke(a)):J(a)?b.push(n.invoke(a)):Wa(a,"module")}catch(l){throw J(a)&&(a=
a[a.length-1]),l.message&&(l.stack&&-1==l.stack.indexOf(l.message))&&(l=l.message+"\n"+l.stack),cb("modulerr",a,l.stack||l.message||l);}}});return b}function f(a,b){function c(d){if(a.hasOwnProperty(d)){if(a[d]===g)throw cb("cdep",d+" <- "+m.join(" <- "));return a[d]}try{return m.unshift(d),a[d]=g,a[d]=b(d)}catch(e){throw a[d]===g&&delete a[d],e;}finally{m.shift()}}function d(a,b,e){var f=[],k=sc(a),g,m,h;m=0;for(g=k.length;m<g;m++){h=k[m];if("string"!==typeof h)throw cb("itkn",h);f.push(e&&e.hasOwnProperty(h)?
e[h]:c(h))}J(a)&&(a=a[g]);return a.apply(b,f)}return{invoke:d,instantiate:function(a,b){var c=function(){},e;c.prototype=(J(a)?a[a.length-1]:a).prototype;c=new c;e=d(a,c,b);return T(e)||P(e)?e:c},get:c,annotate:sc,has:function(b){return l.hasOwnProperty(b+k)||a.hasOwnProperty(b)}}}var g={},k="Provider",m=[],h=new bb([],!0),l={$provide:{provider:a(c),factory:a(d),service:a(function(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}),value:a(function(a,b){return d(a,ba(b))}),constant:a(function(a,
b){Da(a,"constant");l[a]=b;p[a]=b}),decorator:function(a,b){var c=n.get(a+k),d=c.$get;c.$get=function(){var a=q.invoke(d,c);return q.invoke(b,null,{$delegate:a})}}}},n=l.$injector=f(l,function(){throw cb("unpr",m.join(" <- "));}),p={},q=p.$injector=f(p,function(a){a=n.get(a+k);return q.invoke(a.$get,a)});r(e(b),function(a){q.invoke(a||E)});return q}function Ld(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;
r(a,function(a){b||"a"!==K(a.nodeName)||(b=a)});return b}function f(){var b=c.hash(),d;b?(d=g.getElementById(b))?d.scrollIntoView():(d=e(g.getElementsByName(b)))?d.scrollIntoView():"top"===b&&a.scrollTo(0,0):a.scrollTo(0,0)}var g=a.document;b&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(f)});return f}]}function he(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:function(b){return a(b,0,!1)}}]}function te(b,a,c,d){function e(a){try{a.apply(null,
Ba.call(arguments,1))}finally{if(s--,0===s)for(;F.length;)try{F.pop()()}catch(b){c.error(b)}}}function f(a,b){(function fa(){r(u,function(a){a()});A=b(fa,a)})()}function g(){z=null;N!=k.url()&&(N=k.url(),r(ca,function(a){a(k.url())}))}var k=this,m=a[0],h=b.location,l=b.history,n=b.setTimeout,p=b.clearTimeout,q={};k.isMock=!1;var s=0,F=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){s++};k.notifyWhenNoOutstandingRequests=function(a){r(u,function(a){a()});0===s?a():F.push(a)};
var u=[],A;k.addPollFn=function(a){x(A)&&f(100,n);u.push(a);return a};var N=h.href,R=a.find("base"),z=null;k.url=function(a,c){h!==b.location&&(h=b.location);l!==b.history&&(l=b.history);if(a){if(N!=a)return N=a,d.history?c?l.replaceState(null,"",a):(l.pushState(null,"",a),R.attr("href",R.attr("href"))):(z=a,c?h.replace(a):h.href=a),k}else return z||h.href.replace(/%27/g,"'")};var ca=[],L=!1;k.onUrlChange=function(a){if(!L){if(d.history)w(b).on("popstate",g);if(d.hashchange)w(b).on("hashchange",g);
else k.addPollFn(g);L=!0}ca.push(a);return a};k.$$checkUrlChange=g;k.baseHref=function(){var a=R.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var O={},da="",B=k.baseHref();k.cookies=function(a,b){var d,e,f,k;if(a)b===t?m.cookie=escape(a)+"=;path="+B+";expires=Thu, 01 Jan 1970 00:00:00 GMT":v(b)&&(d=(m.cookie=escape(a)+"="+escape(b)+";path="+B).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(m.cookie!==
da)for(da=m.cookie,d=da.split("; "),O={},f=0;f<d.length;f++)e=d[f],k=e.indexOf("="),0<k&&(a=unescape(e.substring(0,k)),O[a]===t&&(O[a]=unescape(e.substring(k+1))));return O}};k.defer=function(a,b){var c;s++;c=n(function(){delete q[c];e(a)},b||0);q[c]=!0;return c};k.defer.cancel=function(a){return q[a]?(delete q[a],p(a),e(E),!0):!1}}function Nd(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new te(b,d,a,c)}]}function Od(){this.$get=function(){function b(b,d){function e(a){a!=
n&&(p?p==a&&(p=a.n):p=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw C("$cacheFactory")("iid",b);var g=0,k=D({},d,{id:b}),m={},h=d&&d.capacity||Number.MAX_VALUE,l={},n=null,p=null;return a[b]={put:function(a,b){if(h<Number.MAX_VALUE){var c=l[a]||(l[a]={key:a});e(c)}if(!x(b))return a in m||g++,m[a]=b,g>h&&this.remove(p.key),b},get:function(a){if(h<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return m[a]},remove:function(a){if(h<Number.MAX_VALUE){var b=
l[a];if(!b)return;b==n&&(n=b.p);b==p&&(p=b.n);f(b.n,b.p);delete l[a]}delete m[a];g--},removeAll:function(){m={};g=0;l={};n=p=null},destroy:function(){l=k=m=null;delete a[b]},info:function(){return D({},k,{size:g})}}}var a={};b.info=function(){var b={};r(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function de(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function ic(b,a){var c={},d="Directive",e=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,f=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,
g=/^(on[a-z]+|formaction)$/;this.directive=function m(a,e){Da(a,"directive");v(a)?(Db(e,"directiveFactory"),c.hasOwnProperty(a)||(c[a]=[],b.factory(a+d,["$injector","$exceptionHandler",function(b,d){var e=[];r(c[a],function(c,f){try{var g=b.invoke(c);P(g)?g={compile:ba(g)}:!g.compile&&g.link&&(g.compile=ba(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||a;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"A";e.push(g)}catch(m){d(m)}});return e}])),c[a].push(e)):r(a,$b(m));
return this};this.aHrefSanitizationWhitelist=function(b){return y(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,l,n,p,q,s,F,u,A,N,R){function z(a,b,c,d,e){a instanceof
w||(a=w(a));r(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=w(b).wrap("<span></span>").parent()[0])});var f=L(a,b,a,c,d,e);ca(a,"ng-scope");return function(b,c,d,e){Db(b,"scope");var g=c?La.clone.call(a):a;r(d,function(a,b){g.data("$"+b+"Controller",a)});d=0;for(var m=g.length;d<m;d++){var h=g[d].nodeType;1!==h&&9!==h||g.eq(d).data("$scope",b)}c&&c(g,b);f&&f(b,g,g,e);return g}}function ca(a,b){try{a.addClass(b)}catch(c){}}function L(a,b,c,d,e,f){function g(a,c,d,e){var f,h,l,q,n,
p,s;f=c.length;var M=Array(f);for(q=0;q<f;q++)M[q]=c[q];p=q=0;for(n=m.length;q<n;p++)h=M[p],c=m[q++],f=m[q++],c?(c.scope?(l=a.$new(),w.data(h,"$scope",l)):l=a,s=c.transcludeOnThisElement?O(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?O(a,b):null,c(f,l,h,d,s)):f&&f(a,h.childNodes,t,e)}for(var m=[],h,l,q,n,p=0;p<a.length;p++)h=new Ob,l=da(a[p],[],h,0===p?d:t,e),(f=l.length?H(l,a[p],h,b,c,null,[],[],f):null)&&f.scope&&ca(h.$$element,"ng-scope"),h=f&&f.terminal||!(q=a[p].childNodes)||!q.length?
null:L(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),m.push(f,h),n=n||f||h,f=null;return n?g:null}function O(a,b,c){return function(d,e,f){var g=!1;d||(d=a.$new(),g=d.$$transcluded=!0);e=b(d,e,f,c);if(g)e.on("$destroy",function(){d.$destroy()});return e}}function da(a,b,c,d,g){var m=c.$attr,h;switch(a.nodeType){case 1:fa(b,pa(Ma(a).toLowerCase()),"E",d,g);for(var l,q,n,p=a.attributes,s=0,F=p&&p.length;s<F;s++){var A=!1,N=!1;l=p[s];if(!Q||8<=Q||l.specified){h=l.name;q=
aa(l.value);l=pa(h);if(n=U.test(l))h=mb(l.substr(6),"-");var u=l.replace(/(Start|End)$/,"");l===u+"Start"&&(A=h,N=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6));l=pa(h.toLowerCase());m[l]=h;if(n||!c.hasOwnProperty(l))c[l]=q,qc(a,l)&&(c[l]=!0);S(a,b,q,l);fa(b,l,"A",d,g,A,N)}}a=a.className;if(v(a)&&""!==a)for(;h=f.exec(a);)l=pa(h[2]),fa(b,l,"C",d,g)&&(c[l]=aa(h[3])),a=a.substr(h.index+h[0].length);break;case 3:K(b,a.nodeValue);break;case 8:try{if(h=e.exec(a.nodeValue))l=pa(h[1]),fa(b,l,"M",
d,g)&&(c[l]=aa(h[2]))}catch(z){}}b.sort(x);return b}function B(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ja("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return w(d)}function I(a,b,c){return function(d,e,f,g,h){e=B(e[0],b,c);return a(d,e,f,g,h)}}function H(a,c,d,e,f,g,m,n,p){function F(a,b,c,d){if(a){c&&(a=I(a,c,d));a.require=G.require;a.directiveName=C;if(L===G||G.$$isolateScope)a=
tc(a,{isolateScope:!0});m.push(a)}if(b){c&&(b=I(b,c,d));b.require=G.require;b.directiveName=C;if(L===G||G.$$isolateScope)b=tc(b,{isolateScope:!0});n.push(b)}}function A(a,b,c,d){var e,f="data",g=!1;if(v(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),"^"==e&&(f="inheritedData"),g=g||"?"==e;e=null;d&&"data"===f&&(e=d[b]);e=e||c[f]("$"+b+"Controller");if(!e&&!g)throw ja("ctreq",b,a);}else J(b)&&(e=[],r(b,function(b){e.push(A(a,b,c,d))}));return e}function N(a,e,f,g,p){function F(a,b){var c;2>arguments.length&&
(b=a,a=t);K&&(c=da);return p(a,b,c)}var u,M,z,O,I,B,da={},rb;u=c===f?d:ha(d,new Ob(w(f),d.$attr));M=u.$$element;if(L){var Na=/^\s*([@=&])(\??)\s*(\w*)\s*$/;B=e.$new(!0);!H||H!==L&&H!==L.$$originalDirective?M.data("$isolateScopeNoTemplate",B):M.data("$isolateScope",B);ca(M,"ng-isolate-scope");r(L.scope,function(a,c){var d=a.match(Na)||[],f=d[3]||c,g="?"==d[2],d=d[1],m,l,n,p;B.$$isolateBindings[c]=d+f;switch(d){case "@":u.$observe(f,function(a){B[c]=a});u.$$observers[f].$$scope=e;u[f]&&(B[c]=b(u[f])(e));
break;case "=":if(g&&!u[f])break;l=q(u[f]);p=l.literal?Aa:function(a,b){return a===b||a!==a&&b!==b};n=l.assign||function(){m=B[c]=l(e);throw ja("nonassign",u[f],L.name);};m=B[c]=l(e);B.$watch(function(){var a=l(e);p(a,B[c])||(p(a,m)?n(e,a=B[c]):B[c]=a);return m=a},null,l.literal);break;case "&":l=q(u[f]);B[c]=function(a){return l(e,a)};break;default:throw ja("iscp",L.name,c,a);}})}rb=p&&F;R&&r(R,function(a){var b={$scope:a===L||a.$$isolateScope?B:e,$element:M,$attrs:u,$transclude:rb},c;I=a.controller;
"@"==I&&(I=u[a.name]);c=s(I,b);da[a.name]=c;K||M.data("$"+a.name+"Controller",c);a.controllerAs&&(b.$scope[a.controllerAs]=c)});g=0;for(z=m.length;g<z;g++)try{O=m[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(G){l(G,ia(M))}g=e;L&&(L.template||null===L.templateUrl)&&(g=B);a&&a(g,f.childNodes,t,p);for(g=n.length-1;0<=g;g--)try{O=n[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(y){l(y,ia(M))}}p=p||{};for(var u=-Number.MAX_VALUE,
O,R=p.controllerDirectives,L=p.newIsolateScopeDirective,H=p.templateDirective,fa=p.nonTlbTranscludeDirective,x=!1,D=!1,K=p.hasElementTranscludeDirective,Z=d.$$element=w(c),G,C,V,S=e,Q,Fa=0,qa=a.length;Fa<qa;Fa++){G=a[Fa];var U=G.$$start,Y=G.$$end;U&&(Z=B(c,U,Y));V=t;if(u>G.priority)break;if(V=G.scope)O=O||G,G.templateUrl||(db("new/isolated scope",L,G,Z),T(V)&&(L=G));C=G.name;!G.templateUrl&&G.controller&&(V=G.controller,R=R||{},db("'"+C+"' controller",R[C],G,Z),R[C]=G);if(V=G.transclude)x=!0,G.$$tlb||
(db("transclusion",fa,G,Z),fa=G),"element"==V?(K=!0,u=G.priority,V=Z,Z=d.$$element=w(X.createComment(" "+C+": "+d[C]+" ")),c=Z[0],Na(f,Ba.call(V,0),c),S=z(V,e,u,g&&g.name,{nonTlbTranscludeDirective:fa})):(V=w(Kb(c)).contents(),Z.empty(),S=z(V,e));if(G.template)if(D=!0,db("template",H,G,Z),H=G,V=P(G.template)?G.template(Z,d):G.template,V=W(V),G.replace){g=G;V=Ib.test(V)?w(aa(V)):[];c=V[0];if(1!=V.length||1!==c.nodeType)throw ja("tplrt",C,"");Na(f,Z,c);qa={$attr:{}};V=da(c,[],qa);var $=a.splice(Fa+
1,a.length-(Fa+1));L&&y(V);a=a.concat(V).concat($);E(d,qa);qa=a.length}else Z.html(V);if(G.templateUrl)D=!0,db("template",H,G,Z),H=G,G.replace&&(g=G),N=ue(a.splice(Fa,a.length-Fa),Z,d,f,x&&S,m,n,{controllerDirectives:R,newIsolateScopeDirective:L,templateDirective:H,nonTlbTranscludeDirective:fa}),qa=a.length;else if(G.compile)try{Q=G.compile(Z,d,S),P(Q)?F(null,Q,U,Y):Q&&F(Q.pre,Q.post,U,Y)}catch(ve){l(ve,ia(Z))}G.terminal&&(N.terminal=!0,u=Math.max(u,G.priority))}N.scope=O&&!0===O.scope;N.transcludeOnThisElement=
x;N.templateOnThisElement=D;N.transclude=S;p.hasElementTranscludeDirective=K;return N}function y(a){for(var b=0,c=a.length;b<c;b++)a[b]=bc(a[b],{$$isolateScope:!0})}function fa(b,e,f,g,h,q,n){if(e===h)return null;h=null;if(c.hasOwnProperty(e)){var p;e=a.get(e+d);for(var s=0,u=e.length;s<u;s++)try{p=e[s],(g===t||g>p.priority)&&-1!=p.restrict.indexOf(f)&&(q&&(p=bc(p,{$$start:q,$$end:n})),b.push(p),h=p)}catch(F){l(F)}}return h}function E(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;r(a,function(d,e){"$"!=
e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});r(b,function(b,f){"class"==f?(ca(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function ue(a,b,c,d,e,f,g,h){var m=[],l,q,s=b[0],u=a.shift(),F=D({},u,{templateUrl:null,transclude:null,replace:null,$$originalDirective:u}),N=P(u.templateUrl)?u.templateUrl(b,c):u.templateUrl;
b.empty();n.get(A.getTrustedResourceUrl(N),{cache:p}).success(function(n){var p,A;n=W(n);if(u.replace){n=Ib.test(n)?w(aa(n)):[];p=n[0];if(1!=n.length||1!==p.nodeType)throw ja("tplrt",u.name,N);n={$attr:{}};Na(d,b,p);var z=da(p,[],n);T(u.scope)&&y(z);a=z.concat(a);E(c,n)}else p=s,b.html(n);a.unshift(F);l=H(a,p,c,e,b,u,f,g,h);r(d,function(a,c){a==p&&(d[c]=b[0])});for(q=L(b[0].childNodes,e);m.length;){n=m.shift();A=m.shift();var R=m.shift(),I=m.shift(),z=b[0];if(A!==s){var B=A.className;h.hasElementTranscludeDirective&&
u.replace||(z=Kb(p));Na(R,w(A),z);ca(w(z),B)}A=l.transcludeOnThisElement?O(n,l.transclude,I):I;l(q,n,z,d,A)}m=null}).error(function(a,b,c,d){throw ja("tpload",d.url);});return function(a,b,c,d,e){a=e;m?(m.push(b),m.push(c),m.push(d),m.push(a)):(l.transcludeOnThisElement&&(a=O(b,l.transclude,e)),l(q,b,c,d,a))}}function x(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function db(a,b,c,d){if(b)throw ja("multidir",b.name,c.name,a,ia(d));}function K(a,
c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent().length;b&&ca(a.parent(),"ng-binding");return function(a,c){var e=c.parent(),f=e.data("$binding")||[];f.push(d);e.data("$binding",f);b||ca(e,"ng-binding");a.$watch(d,function(a){c[0].nodeValue=a})}}})}function C(a,b){if("srcdoc"==b)return A.HTML;var c=Ma(a);if("xlinkHref"==b||"FORM"==c&&"action"==b||"IMG"!=c&&("src"==b||"ngSrc"==b))return A.RESOURCE_URL}function S(a,c,d,e){var f=b(d,!0);if(f){if("multiple"===e&&"SELECT"===
Ma(a))throw ja("selmulti",ia(a));c.push({priority:100,compile:function(){return{pre:function(c,d,m){d=m.$$observers||(m.$$observers={});if(g.test(e))throw ja("nodomevents");if(f=b(m[e],!0,C(a,e)))m[e]=f(c),(d[e]||(d[e]=[])).$$inter=!0,(m.$$observers&&m.$$observers[e].$$scope||c).$watch(f,function(a,b){"class"===e&&a!=b?m.$updateClass(a,b):m.$set(e,a)})}}}})}}function Na(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,m;if(a)for(g=0,m=a.length;g<m;g++)if(a[g]==d){a[g++]=c;m=g+e-1;for(var h=a.length;g<
h;g++,m++)m<h?a[g]=a[m]:delete a[g];a.length-=e-1;break}f&&f.replaceChild(c,d);a=X.createDocumentFragment();a.appendChild(d);c[w.expando]=d[w.expando];d=1;for(e=b.length;d<e;d++)f=b[d],w(f).remove(),a.appendChild(f),delete b[d];b[0]=c;b.length=1}function tc(a,b){return D(function(){return a.apply(null,arguments)},a,b)}var Ob=function(a,b){this.$$element=a;this.$attr=b||{}};Ob.prototype={$normalize:pa,$addClass:function(a){a&&0<a.length&&N.addClass(this.$$element,a)},$removeClass:function(a){a&&0<
a.length&&N.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=uc(a,b),d=uc(b,a);0===c.length?N.removeClass(this.$$element,d):0===d.length?N.addClass(this.$$element,c):N.setClass(this.$$element,c,d)},$set:function(a,b,c,d){var e=qc(this.$$element[0],a);e&&(this.$$element.prop(a,b),d=e);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=mb(a,"-"));e=Ma(this.$$element);if("A"===e&&"href"===a||"IMG"===e&&"src"===a)this[a]=b=R(b,"src"===a);!1!==c&&(null===b||b===t?this.$$element.removeAttr(d):
this.$$element.attr(d,b));(c=this.$$observers)&&r(c[a],function(a){try{a(b)}catch(c){l(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);e.push(b);F.$evalAsync(function(){e.$$inter||b(c[a])});return b}};var qa=b.startSymbol(),Z=b.endSymbol(),W="{{"==qa||"}}"==Z?Qa:function(a){return a.replace(/\{\{/g,qa).replace(/}}/g,Z)},U=/^ngAttr[A-Z]/;return z}]}function pa(b){return Za(b.replace(we,""))}function uc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=
0;a:for(;f<d.length;f++){for(var g=d[f],k=0;k<e.length;k++)if(g==e[k])continue a;c+=(0<c.length?" ":"")+g}return c}function Pd(){var b={},a=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,d){Da(a,"controller");T(a)?D(b,a):b[a]=d};this.$get=["$injector","$window",function(c,d){return function(e,f){var g,k,m;v(e)&&(g=e.match(a),k=g[1],m=g[3],e=b.hasOwnProperty(k)?b[k]:hc(f.$scope,k,!0)||hc(d,k,!0),Wa(e,k,!0));g=c.instantiate(e,f);if(m){if(!f||"object"!==typeof f.$scope)throw C("$controller")("noscp",
k||e.name,m);f.$scope[m]=g}return g}}]}function Qd(){this.$get=["$window",function(b){return w(b.document)}]}function Rd(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function vc(b){var a={},c,d,e;if(!b)return a;r(b.split("\n"),function(b){e=b.indexOf(":");c=K(aa(b.substr(0,e)));d=aa(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d)});return a}function wc(b){var a=T(b)?b:t;return function(c){a||(a=vc(b));return c?a[K(c)]||null:a}}function xc(b,a,c){if(P(c))return c(b,
a);r(c,function(c){b=c(b,a)});return b}function Ud(){var b=/^\s*(\[|\{[^\{])/,a=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,d={"Content-Type":"application/json;charset=utf-8"},e=this.defaults={transformResponse:[function(d){v(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=cc(d)));return d}],transformRequest:[function(a){return T(a)&&"[object File]"!==za.call(a)&&"[object Blob]"!==za.call(a)?na(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ha(d),put:ha(d),patch:ha(d)},xsrfCookieName:"XSRF-TOKEN",
xsrfHeaderName:"X-XSRF-TOKEN"},f=this.interceptors=[],g=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,d,n,p){function q(a){function b(a){var d=D({},a,{data:xc(a.data,a.headers,c.transformResponse)});return 200<=a.status&&300>a.status?d:n.reject(d)}var c={method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},d=function(a){var b=e.headers,c=D({},a.headers),d,f,b=D({},b.common,b[K(a.method)]);
a:for(d in b){a=K(d);for(f in c)if(K(f)===a)continue a;c[d]=b[d]}(function(a){var b;r(a,function(c,d){P(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})})(c);return c}(a);D(c,a);c.headers=d;c.method=Ia(c.method);var f=[function(a){d=a.headers;var c=xc(a.data,wc(d),a.transformRequest);x(c)&&r(d,function(a,b){"content-type"===K(b)&&delete d[b]});x(a.withCredentials)&&!x(e.withCredentials)&&(a.withCredentials=e.withCredentials);return s(a,c,d).then(b,b)},t],g=n.when(c);for(r(A,function(a){(a.request||a.requestError)&&
f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var m=f.shift(),g=g.then(a,m)}g.success=function(a){g.then(function(b){a(b.data,b.status,b.headers,c)});return g};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,c)});return g};return g}function s(c,f,g){function h(a,b,c,e){I&&(200<=a&&300>a?I.put(w,[a,b,vc(c),e]):I.remove(w));p(b,a,c,e);d.$$phase||d.$apply()}function p(a,b,d,e){b=Math.max(b,0);(200<=
b&&300>b?A.resolve:A.reject)({data:a,status:b,headers:wc(d),config:c,statusText:e})}function s(){var a=Ra(q.pendingRequests,c);-1!==a&&q.pendingRequests.splice(a,1)}var A=n.defer(),r=A.promise,I,H,w=F(c.url,c.params);q.pendingRequests.push(c);r.then(s,s);!c.cache&&!e.cache||(!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method)||(I=T(c.cache)?c.cache:T(e.cache)?e.cache:u);if(I)if(H=I.get(w),y(H)){if(H&&P(H.then))return H.then(s,s),H;J(H)?p(H[1],H[0],ha(H[2]),H[3]):p(H,200,{},"OK")}else I.put(w,r);x(H)&&
((H=Pb(c.url)?b.cookies()[c.xsrfCookieName||e.xsrfCookieName]:t)&&(g[c.xsrfHeaderName||e.xsrfHeaderName]=H),a(c.method,w,f,h,g,c.timeout,c.withCredentials,c.responseType));return r}function F(a,b){if(!b)return a;var c=[];Tc(b,function(a,b){null===a||x(a)||(J(a)||(a=[a]),r(a,function(a){T(a)&&(a=ta(a)?a.toISOString():na(a));c.push(Ca(b)+"="+Ca(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var u=c("$http"),A=[];r(f,function(a){A.unshift(v(a)?p.get(a):p.invoke(a))});r(g,
function(a,b){var c=v(a)?p.get(a):p.invoke(a);A.splice(b,0,{response:function(a){return c(n.when(a))},responseError:function(a){return c(n.reject(a))}})});q.pendingRequests=[];(function(a){r(arguments,function(a){q[a]=function(b,c){return q(D(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){r(arguments,function(a){q[a]=function(b,c,d){return q(D(d||{},{method:a,url:b,data:c}))}})})("post","put");q.defaults=e;return q}]}function xe(b){if(8>=Q&&(!b.match(/^(get|post|head|put|delete|options)$/i)||
!W.XMLHttpRequest))return new W.ActiveXObject("Microsoft.XMLHTTP");if(W.XMLHttpRequest)return new W.XMLHttpRequest;throw C("$httpBackend")("noxhr");}function Vd(){this.$get=["$browser","$window","$document",function(b,a,c){return ye(b,xe,b.defer,a.angular.callbacks,c[0])}]}function ye(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),g=null;f.type="text/javascript";f.src=a;f.async=!0;g=function(a){$a(f,"load",g);$a(f,"error",g);e.body.removeChild(f);f=null;var k=-1,s="unknown";a&&("load"!==
a.type||d[b].called||(a={type:"error"}),s=a.type,k="error"===a.type?404:200);c&&c(k,s)};sb(f,"load",g);sb(f,"error",g);8>=Q&&(f.onreadystatechange=function(){v(f.readyState)&&/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,g({type:"load"}))});e.body.appendChild(f);return g}var g=-1;return function(e,m,h,l,n,p,q,s){function F(){A=g;R&&R();z&&z.abort()}function u(a,d,e,f,g){L&&c.cancel(L);R=z=null;0===d&&(d=e?200:"file"==ua(m).protocol?404:0);a(1223===d?204:d,e,f,g||"");b.$$completeOutstandingRequest(E)}
var A;b.$$incOutstandingRequestCount();m=m||b.url();if("jsonp"==K(e)){var N="_"+(d.counter++).toString(36);d[N]=function(a){d[N].data=a;d[N].called=!0};var R=f(m.replace("JSON_CALLBACK",JSONP_CALLBACK_PREFIX+N),N,function(a,b){u(l,a,d[N].data,"",b);d[N]=E})}else{var z=a(e);z.open(e,m,!0);r(n,function(a,b){y(a)&&z.setRequestHeader(b,a)});z.onreadystatechange=function(){if(z&&4==z.readyState){var a=null,b=null,c="";A!==g&&(a=z.getAllResponseHeaders(),b="response"in z?z.response:z.responseText);A===g&&
10>Q||(c=z.statusText);u(l,A||z.status,b,a,c)}};q&&(z.withCredentials=!0);if(s)try{z.responseType=s}catch(ca){if("json"!==s)throw ca;}z.send(h||null)}if(0<p)var L=c(F,p);else p&&P(p.then)&&p.then(F)}}function Sd(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,h,l){for(var n,p,q=0,s=[],F=f.length,u=!1,A=[];q<F;)-1!=(n=f.indexOf(b,q))&&-1!=(p=f.indexOf(a,
n+g))?(q!=n&&s.push(f.substring(q,n)),s.push(q=c(u=f.substring(n+g,p))),q.exp=u,q=p+k,u=!0):(q!=F&&s.push(f.substring(q)),q=F);(F=s.length)||(s.push(""),F=1);if(l&&1<s.length)throw yc("noconcat",f);if(!h||u)return A.length=F,q=function(a){try{for(var b=0,c=F,g;b<c;b++){if("function"==typeof(g=s[b]))if(g=g(a),g=l?e.getTrusted(l,g):e.valueOf(g),null==g)g="";else switch(typeof g){case "string":break;case "number":g=""+g;break;default:g=na(g)}A[b]=g}return A.join("")}catch(k){a=yc("interr",f,k.toString()),
d(a)}},q.exp=f,q.parts=s,q}var g=b.length,k=a.length;f.startSymbol=function(){return b};f.endSymbol=function(){return a};return f}]}function Td(){this.$get=["$rootScope","$window","$q",function(b,a,c){function d(d,g,k,m){var h=a.setInterval,l=a.clearInterval,n=c.defer(),p=n.promise,q=0,s=y(m)&&!m;k=y(k)?k:0;p.then(null,null,d);p.$$intervalId=h(function(){n.notify(q++);0<k&&q>=k&&(n.resolve(q),l(p.$$intervalId),delete e[p.$$intervalId]);s||b.$apply()},g);e[p.$$intervalId]=n;return p}var e={};d.cancel=
function(b){return b&&b.$$intervalId in e?(e[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete e[b.$$intervalId],!0):!1};return d}]}function bd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),
SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function Qb(b){b=b.split("/");for(var a=b.length;a--;)b[a]=
lb(b[a]);return b.join("/")}function zc(b,a,c){b=ua(b,c);a.$$protocol=b.protocol;a.$$host=b.hostname;a.$$port=U(b.port)||ze[b.protocol]||null}function Ac(b,a,c){var d="/"!==b.charAt(0);d&&(b="/"+b);b=ua(b,c);a.$$path=decodeURIComponent(d&&"/"===b.pathname.charAt(0)?b.pathname.substring(1):b.pathname);a.$$search=ec(b.search);a.$$hash=decodeURIComponent(b.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function ra(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function eb(b){var a=
b.indexOf("#");return-1==a?b:b.substr(0,a)}function Rb(b){return b.substr(0,eb(b).lastIndexOf("/")+1)}function Bc(b,a){this.$$html5=!0;a=a||"";var c=Rb(b);zc(b,this,b);this.$$parse=function(a){var e=ra(c,a);if(!v(e))throw Sb("ipthprfx",a,c);Ac(e,this,b);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Cb(this.$$search),b=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$rewrite=function(d){var e;
if((e=ra(b,d))!==t)return d=e,(e=ra(a,e))!==t?c+(ra("/",e)||e):b+d;if((e=ra(c,d))!==t)return c+e;if(c==d+"/")return c}}function Tb(b,a){var c=Rb(b);zc(b,this,b);this.$$parse=function(d){var e=ra(b,d)||ra(c,d),e="#"==e.charAt(0)?ra(a,e):this.$$html5?e:"";if(!v(e))throw Sb("ihshprfx",d,a);Ac(e,this,b);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?
"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"")};this.$$rewrite=function(a){if(eb(b)==eb(a))return a}}function Ub(b,a){this.$$html5=!0;Tb.apply(this,arguments);var c=Rb(b);this.$$rewrite=function(d){var e;if(b==eb(d))return d;if(e=ra(c,d))return b+a+e;if(c===d+"/")return c};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url}}function tb(b){return function(){return this[b]}}
function Cc(b,a){return function(c){if(x(c))return this[b];this[b]=a(c);this.$$compose();return this}}function Wd(){var b="",a=!1;this.hashPrefix=function(a){return y(a)?(b=a,this):b};this.html5Mode=function(b){return y(b)?(a=b,this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,f){function g(a){c.$broadcast("$locationChangeSuccess",k.absUrl(),a)}var k,m,h=d.baseHref(),l=d.url(),n;a?(n=l.substring(0,l.indexOf("/",l.indexOf("//")+2))+(h||"/"),m=e.history?Bc:Ub):(n=
eb(l),m=Tb);k=new m(n,"#"+b);k.$$parse(k.$$rewrite(l));var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var e=w(a.target);"a"!==K(e[0].nodeName);)if(e[0]===f[0]||!(e=e.parent())[0])return;var g=e.prop("href");T(g)&&"[object SVGAnimatedString]"===g.toString()&&(g=ua(g.animVal).href);if(!p.test(g)){if(m===Ub){var h=e.attr("href")||e.attr("xlink:href");if(h&&0>h.indexOf("://"))if(g="#"+b,"/"==h[0])g=n+g+h;else if("#"==h[0])g=n+g+(k.path()||"/")+h;
else{var l=k.path().split("/"),h=h.split("/");2!==l.length||l[1]||(l.length=1);for(var q=0;q<h.length;q++)"."!=h[q]&&(".."==h[q]?l.pop():h[q].length&&l.push(h[q]));g=n+g+l.join("/")}}l=k.$$rewrite(g);g&&(!e.attr("target")&&l&&!a.isDefaultPrevented())&&(a.preventDefault(),l!=d.url()&&(k.$$parse(l),c.$apply(),angular["ff-684208-preventDefault"]=!0))}}});k.absUrl()!=l&&d.url(k.absUrl(),!0);d.onUrlChange(function(a){k.absUrl()!=a&&(c.$evalAsync(function(){var b=k.absUrl();k.$$parse(a);c.$broadcast("$locationChangeStart",
a,b).defaultPrevented?(k.$$parse(b),d.url(b)):g(b)}),c.$$phase||c.$digest())});var q=0;c.$watch(function(){var a=d.url(),b=k.$$replace;q&&a==k.absUrl()||(q++,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",k.absUrl(),a).defaultPrevented?k.$$parse(a):(d.url(k.absUrl(),b),g(a))}));k.$$replace=!1;return q});return k}]}function Xd(){var b=!0,a=this;this.debugEnabled=function(a){return y(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&
-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||E;a=!1;try{a=!!e.apply}catch(m){}return a?function(){var a=[];r(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function ka(b,
a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw la("isecfld",a);return b}function va(b,a){if(b){if(b.constructor===b)throw la("isecfn",a);if(b.document&&b.location&&b.alert&&b.setInterval)throw la("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw la("isecdom",a);if(b===Object)throw la("isecobj",a);}return b}function ub(b,a,c,d,e){va(b,d);e=e||{};a=a.split(".");for(var f,g=0;1<a.length;g++){f=ka(a.shift(),
d);var k=va(b[f],d);k||(k={},b[f]=k);b=k;b.then&&e.unwrapPromises&&(wa(d),"$$v"in b||function(a){a.then(function(b){a.$$v=b})}(b),b.$$v===t&&(b.$$v={}),b=b.$$v)}f=ka(a.shift(),d);va(b[f],d);return b[f]=c}function Dc(b,a,c,d,e,f,g){ka(b,f);ka(a,f);ka(c,f);ka(d,f);ka(e,f);return g.unwrapPromises?function(g,m){var h=m&&m.hasOwnProperty(b)?m:g,l;if(null==h)return h;(h=h[b])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!a)return h;if(null==h)return t;(h=h[a])&&h.then&&
(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!c)return h;if(null==h)return t;(h=h[c])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!d)return h;if(null==h)return t;(h=h[d])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!e)return h;if(null==h)return t;(h=h[e])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);return h}:function(f,g){var h=g&&g.hasOwnProperty(b)?g:f;if(null==
h)return h;h=h[b];if(!a)return h;if(null==h)return t;h=h[a];if(!c)return h;if(null==h)return t;h=h[c];if(!d)return h;if(null==h)return t;h=h[d];return e?null==h?t:h=h[e]:h}}function Ec(b,a,c){if(Vb.hasOwnProperty(b))return Vb[b];var d=b.split("."),e=d.length,f;if(a.csp)f=6>e?Dc(d[0],d[1],d[2],d[3],d[4],c,a):function(b,f){var g=0,k;do k=Dc(d[g++],d[g++],d[g++],d[g++],d[g++],c,a)(b,f),f=t,b=k;while(g<e);return k};else{var g="var p;\n";r(d,function(b,d){ka(b,c);g+="if(s == null) return undefined;\ns="+
(d?"s":'((k&&k.hasOwnProperty("'+b+'"))?k:s)')+'["'+b+'"];\n'+(a.unwrapPromises?'if (s && s.then) {\n pw("'+c.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")});var g=g+"return s;",k=new Function("s","k","pw",g);k.toString=ba(g);f=a.unwrapPromises?function(a,b){return k(a,b,wa)}:k}"hasOwnProperty"!==b&&(Vb[b]=f);return f}function Yd(){var b={},a={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=
function(b){return y(b)?(a.unwrapPromises=!!b,this):a.unwrapPromises};this.logPromiseWarnings=function(b){return y(b)?(a.logPromiseWarnings=b,this):a.logPromiseWarnings};this.$get=["$filter","$sniffer","$log",function(c,d,e){a.csp=d.csp;wa=function(b){a.logPromiseWarnings&&!Fc.hasOwnProperty(b)&&(Fc[b]=!0,e.warn("[$parse] Promise found in the expression `"+b+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))};return function(d){var e;switch(typeof d){case "string":if(b.hasOwnProperty(d))return b[d];
e=new Wb(a);e=(new fb(e,c,a)).parse(d);"hasOwnProperty"!==d&&(b[d]=e);return e;case "function":return d;default:return E}}}]}function $d(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return Ae(function(a){b.$evalAsync(a)},a)}]}function Ae(b,a){function c(a){return a}function d(a){return g(a)}var e=function(){var g=[],h,l;return l={resolve:function(a){if(g){var c=g;g=t;h=f(a);c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],h.then(a[0],a[1],a[2])})}},reject:function(a){l.resolve(k(a))},
notify:function(a){if(g){var c=g;g.length&&b(function(){for(var b,d=0,e=c.length;d<e;d++)b=c[d],b[2](a)})}},promise:{then:function(b,f,k){var l=e(),F=function(d){try{l.resolve((P(b)?b:c)(d))}catch(e){l.reject(e),a(e)}},u=function(b){try{l.resolve((P(f)?f:d)(b))}catch(c){l.reject(c),a(c)}},A=function(b){try{l.notify((P(k)?k:c)(b))}catch(d){a(d)}};g?g.push([F,u,A]):h.then(F,u,A);return l.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,c){var d=e();c?d.resolve(a):
d.reject(a);return d.promise}function d(e,f){var g=null;try{g=(a||c)()}catch(k){return b(k,!1)}return g&&P(g.then)?g.then(function(){return b(e,f)},function(a){return b(a,!1)}):b(e,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},f=function(a){return a&&P(a.then)?a:{then:function(c){var d=e();b(function(){d.resolve(c(a))});return d.promise}}},g=function(a){var b=e();b.reject(a);return b.promise},k=function(c){return{then:function(f,g){var k=e();b(function(){try{k.resolve((P(g)?
g:d)(c))}catch(b){k.reject(b),a(b)}});return k.promise}}};return{defer:e,reject:g,when:function(k,h,l,n){var p=e(),q,s=function(b){try{return(P(h)?h:c)(b)}catch(d){return a(d),g(d)}},F=function(b){try{return(P(l)?l:d)(b)}catch(c){return a(c),g(c)}},u=function(b){try{return(P(n)?n:c)(b)}catch(d){a(d)}};b(function(){f(k).then(function(a){q||(q=!0,p.resolve(f(a).then(s,F,u)))},function(a){q||(q=!0,p.resolve(F(a)))},function(a){q||p.notify(u(a))})});return p.promise},all:function(a){var b=e(),c=0,d=J(a)?
[]:{};r(a,function(a,e){c++;f(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise}}}function ge(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:
function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};f.supported=e;return f}]}function Zd(){var b=10,a=C("$rootScope"),c=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,e,f,g){function k(){this.$id=hb();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=
[];this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings={}}function m(b){if(p.$$phase)throw a("inprog",p.$$phase);p.$$phase=b}function h(a,b){var c=f(a);Wa(c,b);return c}function l(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function n(){}k.prototype={constructor:k,$new:function(a){a?(a=new k,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=
function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=hb();this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),a=new this.$$childScopeClass);a["this"]=a;a.$parent=this;a.$$prevSibling=this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,d){var e=h(a,"watch"),f=this.$$watchers,g={fn:b,last:n,get:e,exp:a,
eq:!!d};c=null;if(!P(b)){var k=h(b||E,"listener");g.fn=function(a,b,c){k(c)}}if("string"==typeof a&&e.constant){var l=g.fn;g.fn=function(a,b,c){l.call(this,a,b,c);Sa(f,g)}}f||(f=this.$$watchers=[]);f.unshift(g);return function(){Sa(f,g);c=null}},$watchCollection:function(a,b){var c=this,d,e,g,k=1<b.length,h=0,l=f(a),m=[],p={},n=!0,r=0;return this.$watch(function(){d=l(c);var a,b,f;if(T(d))if(Pa(d))for(e!==m&&(e=m,r=e.length=0,h++),a=d.length,r!==a&&(h++,e.length=r=a),b=0;b<a;b++)f=e[b]!==e[b]&&d[b]!==
d[b],f||e[b]===d[b]||(h++,e[b]=d[b]);else{e!==p&&(e=p={},r=0,h++);a=0;for(b in d)d.hasOwnProperty(b)&&(a++,e.hasOwnProperty(b)?(f=e[b]!==e[b]&&d[b]!==d[b],f||e[b]===d[b]||(h++,e[b]=d[b])):(r++,e[b]=d[b],h++));if(r>a)for(b in h++,e)e.hasOwnProperty(b)&&!d.hasOwnProperty(b)&&(r--,delete e[b])}else e!==d&&(e=d,h++);return h},function(){n?(n=!1,b(d,d,c)):b(d,g,c);if(k)if(T(d))if(Pa(d)){g=Array(d.length);for(var a=0;a<d.length;a++)g[a]=d[a]}else for(a in g={},d)kb.call(d,a)&&(g[a]=d[a]);else g=d})},$digest:function(){var d,
f,k,h,l=this.$$asyncQueue,r=this.$$postDigestQueue,R,z,t=b,L,O=[],w,B,I;m("$digest");g.$$checkUrlChange();c=null;do{z=!1;for(L=this;l.length;){try{I=l.shift(),I.scope.$eval(I.expression)}catch(H){p.$$phase=null,e(H)}c=null}a:do{if(h=L.$$watchers)for(R=h.length;R--;)try{if(d=h[R])if((f=d.get(L))!==(k=d.last)&&!(d.eq?Aa(f,k):"number"===typeof f&&"number"===typeof k&&isNaN(f)&&isNaN(k)))z=!0,c=d,d.last=d.eq?Ha(f,null):f,d.fn(f,k===n?f:k,L),5>t&&(w=4-t,O[w]||(O[w]=[]),B=P(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):
d.exp,B+="; newVal: "+na(f)+"; oldVal: "+na(k),O[w].push(B));else if(d===c){z=!1;break a}}catch(y){p.$$phase=null,e(y)}if(!(h=L.$$childHead||L!==this&&L.$$nextSibling))for(;L!==this&&!(h=L.$$nextSibling);)L=L.$parent}while(L=h);if((z||l.length)&&!t--)throw p.$$phase=null,a("infdig",b,na(O));}while(z||l.length);for(p.$$phase=null;r.length;)try{r.shift()()}catch(v){e(v)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this!==p&&(r(this.$$listenerCount,
Bb(null,l,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=E,this.$on=
this.$watch=function(){return E})}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){p.$$phase||p.$$asyncQueue.length||g.defer(function(){p.$$asyncQueue.length&&p.$digest()});this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return m("$apply"),this.$eval(a)}catch(b){e(b)}finally{p.$$phase=null;try{p.$digest()}catch(c){throw e(c),c;}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=
c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){c[Ra(c,b)]=null;l(e,1,a)}},$emit:function(a,b){var c=[],d,f=this,g=!1,k={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){k.defaultPrevented=!0},defaultPrevented:!1},h=[k].concat(Ba.call(arguments,1)),l,m;do{d=f.$$listeners[a]||c;k.currentScope=f;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,h)}catch(p){e(p)}else d.splice(l,
1),l--,m--;if(g)break;f=f.$parent}while(f);return k},$broadcast:function(a,b){for(var c=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1},g=[f].concat(Ba.call(arguments,1)),k,h;c=d;){f.currentScope=c;d=c.$$listeners[a]||[];k=0;for(h=d.length;k<h;k++)if(d[k])try{d[k].apply(null,g)}catch(l){e(l)}else d.splice(k,1),k--,h--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}return f}};
var p=new k;return p}]}function cd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(a){return y(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;if(!Q||8<=Q)if(f=ua(c).href,""!==f&&!f.match(e))return"unsafe:"+f;return c}}}function Be(b){if("self"===b)return b;if(v(b)){if(-1<b.indexOf("***"))throw xa("iwcard",b);b=b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,
"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return RegExp("^"+b+"$")}if(jb(b))return RegExp("^"+b.source+"$");throw xa("imatcher");}function Gc(b){var a=[];y(b)&&r(b,function(b){a.push(Be(b))});return a}function be(){this.SCE_CONTEXTS=ga;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=Gc(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=Gc(b));return a};this.$get=["$injector",function(c){function d(a){var b=
function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var e=function(a){throw xa("unsafe");};c.has("$sanitize")&&(e=c.get("$sanitize"));var f=d(),g={};g[ga.HTML]=d(f);g[ga.CSS]=d(f);g[ga.URL]=d(f);g[ga.JS]=d(f);g[ga.RESOURCE_URL]=d(g[ga.URL]);return{trustAs:function(a,b){var c=g.hasOwnProperty(a)?g[a]:null;if(!c)throw xa("icontext",
a,b);if(null===b||b===t||""===b)return b;if("string"!==typeof b)throw xa("itype",a);return new c(b)},getTrusted:function(c,d){if(null===d||d===t||""===d)return d;var f=g.hasOwnProperty(c)?g[c]:null;if(f&&d instanceof f)return d.$$unwrapTrustedValue();if(c===ga.RESOURCE_URL){var f=ua(d.toString()),l,n,p=!1;l=0;for(n=b.length;l<n;l++)if("self"===b[l]?Pb(f):b[l].exec(f.href)){p=!0;break}if(p)for(l=0,n=a.length;l<n;l++)if("self"===a[l]?Pb(f):a[l].exec(f.href)){p=!1;break}if(p)return d;throw xa("insecurl",
d.toString());}if(c===ga.HTML)return e(d);throw xa("unsafe");},valueOf:function(a){return a instanceof f?a.$$unwrapTrustedValue():a}}}]}function ae(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b};this.$get=["$parse","$sniffer","$sceDelegate",function(a,c,d){if(b&&c.msie&&8>c.msieDocumentMode)throw xa("iequirks");var e=ha(ga);e.isEnabled=function(){return b};e.trustAs=d.trustAs;e.getTrusted=d.getTrusted;e.valueOf=d.valueOf;b||(e.trustAs=e.getTrusted=function(a,b){return b},
e.valueOf=Qa);e.parseAs=function(b,c){var d=a(c);return d.literal&&d.constant?d:function(a,c){return e.getTrusted(b,d(a,c))}};var f=e.parseAs,g=e.getTrusted,k=e.trustAs;r(ga,function(a,b){var c=K(b);e[Za("parse_as_"+c)]=function(b){return f(a,b)};e[Za("get_trusted_"+c)]=function(b){return g(a,b)};e[Za("trust_as_"+c)]=function(b){return k(a,b)}});return e}]}function ce(){this.$get=["$window","$document",function(b,a){var c={},d=U((/android (\d+)/.exec(K((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||
{}).userAgent),f=a[0]||{},g=f.documentMode,k,m=/^(Moz|webkit|O|ms)(?=[A-Z])/,h=f.body&&f.body.style,l=!1,n=!1;if(h){for(var p in h)if(l=m.exec(p)){k=l[0];k=k.substr(0,1).toUpperCase()+k.substr(1);break}k||(k="WebkitOpacity"in h&&"webkit");l=!!("transition"in h||k+"Transition"in h);n=!!("animation"in h||k+"Animation"in h);!d||l&&n||(l=v(f.body.style.webkitTransition),n=v(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hashchange:"onhashchange"in b&&(!g||7<
g),hasEvent:function(a){if("input"==a&&9==Q)return!1;if(x(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Xa(),vendorPrefix:k,transitions:l,animations:n,android:d,msie:Q,msieDocumentMode:g}}]}function ee(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(b,a,c,d){function e(e,k,m){var h=c.defer(),l=h.promise,n=y(m)&&!m;k=a.defer(function(){try{h.resolve(e())}catch(a){h.reject(a),d(a)}finally{delete f[l.$$timeoutId]}n||b.$apply()},k);l.$$timeoutId=k;f[k]=h;
return l}var f={};e.cancel=function(b){return b&&b.$$timeoutId in f?(f[b.$$timeoutId].reject("canceled"),delete f[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return e}]}function ua(b,a){var c=b;Q&&(Y.setAttribute("href",c),c=Y.href);Y.setAttribute("href",c);return{href:Y.href,protocol:Y.protocol?Y.protocol.replace(/:$/,""):"",host:Y.host,search:Y.search?Y.search.replace(/^\?/,""):"",hash:Y.hash?Y.hash.replace(/^#/,""):"",hostname:Y.hostname,port:Y.port,pathname:"/"===Y.pathname.charAt(0)?Y.pathname:
"/"+Y.pathname}}function Pb(b){b=v(b)?ua(b):b;return b.protocol===Hc.protocol&&b.host===Hc.host}function fe(){this.$get=ba(W)}function mc(b){function a(d,e){if(T(d)){var f={};r(d,function(b,c){f[c]=a(c,b)});return f}return b.factory(d+c,e)}var c="Filter";this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}];a("currency",Ic);a("date",Jc);a("filter",Ce);a("json",De);a("limitTo",Ee);a("lowercase",Fe);a("number",Kc);a("orderBy",Lc);a("uppercase",Ge)}function Ce(){return function(b,
a,c){if(!J(b))return b;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0};"function"!==d&&(c="boolean"===d&&c?function(a,b){return Va.equals(a,b)}:function(a,b){if(a&&b&&"object"===typeof a&&"object"===typeof b){for(var d in a)if("$"!==d.charAt(0)&&kb.call(a,d)&&c(a[d],b[d]))return!0;return!1}b=(""+b).toLowerCase();return-1<(""+a).toLowerCase().indexOf(b)});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return c(a,
b);case "object":switch(typeof b){case "object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case "array":for(d=0;d<a.length;d++)if(f(a[d],b))return!0;return!1;default:return!1}};switch(typeof a){case "boolean":case "number":case "string":a={$:a};case "object":for(var g in a)(function(b){"undefined"!==typeof a[b]&&e.push(function(c){return f("$"==b?c:c&&c[b],a[b])})})(g);break;case "function":e.push(a);break;default:return b}d=[];for(g=0;g<b.length;g++){var k=
b[g];e.check(k)&&d.push(k)}return d}}function Ic(b){var a=b.NUMBER_FORMATS;return function(b,d){x(d)&&(d=a.CURRENCY_SYM);return Mc(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\u00A4/g,d)}}function Kc(b){var a=b.NUMBER_FORMATS;return function(b,d){return Mc(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Mc(b,a,c,d,e){if(null==b||!isFinite(b)||T(b))return"";var f=0>b;b=Math.abs(b);var g=b+"",k="",m=[],h=!1;if(-1!==g.indexOf("e")){var l=g.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&
l[3]>e+1?(g="0",b=0):(k=g,h=!0)}if(h)0<e&&(-1<b&&1>b)&&(k=b.toFixed(e));else{g=(g.split(Nc)[1]||"").length;x(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);0===b&&(f=!1);b=(""+b).split(Nc);g=b[0];b=b[1]||"";var l=0,n=a.lgSize,p=a.gSize;if(g.length>=n+p)for(l=g.length-n,h=0;h<l;h++)0===(l-h)%p&&0!==h&&(k+=c),k+=g.charAt(h);for(h=l;h<g.length;h++)0===(g.length-h)%n&&0!==h&&(k+=c),k+=g.charAt(h);for(;b.length<e;)b+="0";e&&"0"!==e&&(k+=d+b.substr(0,
e))}m.push(f?a.negPre:a.posPre);m.push(k);m.push(f?a.negSuf:a.posSuf);return m.join("")}function Xb(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function $(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return Xb(e,a,d)}}function vb(b,a){return function(c,d){var e=c["get"+b](),f=Ia(a?"SHORT"+b:b);return d[f][e]}}function Jc(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,k=b[8]?
a.setUTCFullYear:a.setFullYear,m=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=U(b[9]+b[10]),g=U(b[9]+b[11]));k.call(a,U(b[1]),U(b[2])-1,U(b[3]));f=U(b[4]||0)-f;g=U(b[5]||0)-g;k=U(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));m.call(a,f,g,k,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e){var f="",g=[],k,m;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;v(c)&&(c=He.test(c)?U(c):a(c));ib(c)&&(c=new Date(c));
if(!ta(c))return c;for(;e;)(m=Ie.exec(e))?(g=g.concat(Ba.call(m,1)),e=g.pop()):(g.push(e),e=null);r(g,function(a){k=Je[a];f+=k?k(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return f}}function De(){return function(b){return na(b,!0)}}function Ee(){return function(b,a){if(!J(b)&&!v(b))return b;a=Infinity===Math.abs(Number(a))?Number(a):U(a);if(v(b))return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";var c=[],d,e;a>b.length?a=b.length:a<-b.length&&(a=-b.length);0<a?(d=0,e=a):(d=
b.length+a,e=b.length);for(;d<e;d++)c.push(b[d]);return c}}function Lc(b){return function(a,c,d){function e(a,b){return Ua(b)?function(b,c){return a(c,b)}:a}function f(a,b){var c=typeof a,d=typeof b;return c==d?(ta(a)&&ta(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!Pa(a)||!c)return a;c=J(c)?c:[c];c=Vc(c,function(a){var c=!1,d=a||Qa;if(v(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);d=b(a);if(d.constant){var g=
d();return e(function(a,b){return f(a[g],b[g])},c)}}return e(function(a,b){return f(d(a),d(b))},c)});for(var g=[],k=0;k<a.length;k++)g.push(a[k]);return g.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function ya(b){P(b)&&(b={link:b});b.restrict=b.restrict||"AC";return ba(b)}function Oc(b,a,c,d){function e(a,c){c=c?"-"+mb(c,"-"):"";d.setClass(b,(a?wb:xb)+c,(a?xb:wb)+c)}var f=this,g=b.parent().controller("form")||yb,k=0,m=f.$error={},h=[];f.$name=
a.name||a.ngForm;f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;g.$addControl(f);b.addClass(Oa);e(!0);f.$addControl=function(a){Da(a.$name,"input");h.push(a);a.$name&&(f[a.$name]=a)};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];r(m,function(b,c){f.$setValidity(c,!0,a)});Sa(h,a)};f.$setValidity=function(a,b,c){var d=m[a];if(b)d&&(Sa(d,c),d.length||(k--,k||(e(b),f.$valid=!0,f.$invalid=!1),m[a]=!1,e(!0,a),g.$setValidity(a,!0,f)));else{k||e(b);if(d){if(-1!=Ra(d,c))return}else m[a]=
d=[],k++,e(!1,a),g.$setValidity(a,!1,f);d.push(c);f.$valid=!1;f.$invalid=!0}};f.$setDirty=function(){d.removeClass(b,Oa);d.addClass(b,zb);f.$dirty=!0;f.$pristine=!1;g.$setDirty()};f.$setPristine=function(){d.removeClass(b,zb);d.addClass(b,Oa);f.$dirty=!1;f.$pristine=!0;r(h,function(a){a.$setPristine()})}}function sa(b,a,c,d){b.$setValidity(a,c);return c?d:t}function Pc(b,a){var c,d;if(a)for(c=0;c<a.length;++c)if(d=a[c],b[d])return!0;return!1}function Ke(b,a,c,d,e){T(e)&&(b.$$hasNativeValidators=!0,
b.$parsers.push(function(f){if(b.$error[a]||Pc(e,d)||!Pc(e,c))return f;b.$setValidity(a,!1)}))}function Ab(b,a,c,d,e,f){var g=a.prop(Le),k=a[0].placeholder,m={},h=K(a[0].type);d.$$validityState=g;if(!e.android){var l=!1;a.on("compositionstart",function(a){l=!0});a.on("compositionend",function(){l=!1;n()})}var n=function(e){if(!l){var f=a.val();if(Q&&"input"===(e||m).type&&a[0].placeholder!==k)k=a[0].placeholder;else if("password"!==h&&Ua(c.ngTrim||"T")&&(f=aa(f)),e=g&&d.$$hasNativeValidators,d.$viewValue!==
f||""===f&&e)b.$root.$$phase?d.$setViewValue(f):b.$apply(function(){d.$setViewValue(f)})}};if(e.hasEvent("input"))a.on("input",n);else{var p,q=function(){p||(p=f.defer(function(){n();p=null}))};a.on("keydown",function(a){a=a.keyCode;91===a||(15<a&&19>a||37<=a&&40>=a)||q()});if(e.hasEvent("paste"))a.on("paste cut",q)}a.on("change",n);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)};var s=c.ngPattern;s&&((e=s.match(/^\/(.*)\/([gim]*)$/))?(s=RegExp(e[1],e[2]),e=function(a){return sa(d,
"pattern",d.$isEmpty(a)||s.test(a),a)}):e=function(c){var e=b.$eval(s);if(!e||!e.test)throw C("ngPattern")("noregexp",s,e,ia(a));return sa(d,"pattern",d.$isEmpty(c)||e.test(c),c)},d.$formatters.push(e),d.$parsers.push(e));if(c.ngMinlength){var r=U(c.ngMinlength);e=function(a){return sa(d,"minlength",d.$isEmpty(a)||a.length>=r,a)};d.$parsers.push(e);d.$formatters.push(e)}if(c.ngMaxlength){var u=U(c.ngMaxlength);e=function(a){return sa(d,"maxlength",d.$isEmpty(a)||a.length<=u,a)};d.$parsers.push(e);
d.$formatters.push(e)}}function Yb(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],l=0;l<b.length;l++)if(e==b[l])continue a;c.push(e)}return c}function e(a){if(!J(a)){if(v(a))return a.split(" ");if(T(a)){var b=[];r(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",link:function(f,g,k){function m(a,b){var c=g.data("$classCounts")||{},d=[];r(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<
b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function h(b){if(!0===a||f.$index%2===a){var h=e(b||[]);if(!l){var q=m(h,1);k.$addClass(q)}else if(!Aa(b,l)){var s=e(l),q=d(h,s),h=d(s,h),h=m(h,-1),q=m(q,1);0===q.length?c.removeClass(g,h):0===h.length?c.addClass(g,q):c.setClass(g,q,h)}}l=ha(b)}var l;f.$watch(k[b],h,!0);k.$observe("class",function(a){h(f.$eval(k[b]))});"ngClass"!==b&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var h=e(f.$eval(k[b]));g===a?(g=m(h,1),k.$addClass(g)):
(g=m(h,-1),k.$removeClass(g))}})}}}]}var Le="validity",K=function(b){return v(b)?b.toLowerCase():b},kb=Object.prototype.hasOwnProperty,Ia=function(b){return v(b)?b.toUpperCase():b},Q,w,Ea,Ba=[].slice,Me=[].push,za=Object.prototype.toString,Ta=C("ng"),Va=W.angular||(W.angular={}),Ya,Ma,ma=["0","0","0"];Q=U((/msie (\d+)/.exec(K(navigator.userAgent))||[])[1]);isNaN(Q)&&(Q=U((/trident\/.*; rv:(\d+)/.exec(K(navigator.userAgent))||[])[1]));E.$inject=[];Qa.$inject=[];var J=function(){return P(Array.isArray)?
Array.isArray:function(b){return"[object Array]"===za.call(b)}}(),aa=function(){return String.prototype.trim?function(b){return v(b)?b.trim():b}:function(b){return v(b)?b.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b}}();Ma=9>Q?function(b){b=b.nodeName?b:b[0];return b.scopeName&&"HTML"!=b.scopeName?Ia(b.scopeName+":"+b.nodeName):b.nodeName}:function(b){return b.nodeName?b.nodeName:b[0].nodeName};var Xa=function(){if(y(Xa.isActive_))return Xa.isActive_;var b=!(!X.querySelector("[ng-csp]")&&!X.querySelector("[data-ng-csp]"));
if(!b)try{new Function("")}catch(a){b=!0}return Xa.isActive_=b},Yc=/[A-Z]/g,ad={full:"1.2.26",major:1,minor:2,dot:26,codeName:"captivating-disinterest"};S.expando="ng339";var ab=S.cache={},ne=1,sb=W.document.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+a,c)},$a=W.document.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)};S._data=function(b){return this.cache[b[this.expando]]||{}};var ie=/([\:\-\_]+(.))/g,
je=/^moz([A-Z])/,Hb=C("jqLite"),ke=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ib=/<|&#?\w+;/,le=/<([\w:]+)/,me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ea={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ea.optgroup=ea.option;ea.tbody=ea.tfoot=ea.colgroup=ea.caption=ea.thead;ea.th=
ea.td;var La=S.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===X.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),S(W).on("load",a))},toString:function(){var b=[];r(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?w(this[b]):w(this[this.length+b])},length:0,push:Me,sort:[].sort,splice:[].splice},qb={};r("multiple selected checked disabled readOnly required open".split(" "),function(b){qb[K(b)]=b});var rc={};r("input select option textarea button form details".split(" "),
function(b){rc[Ia(b)]=!0});r({data:Mb,removeData:Lb},function(b,a){S[a]=b});r({data:Mb,inheritedData:pb,scope:function(b){return w.data(b,"$scope")||pb(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return w.data(b,"$isolateScope")||w.data(b,"$isolateScopeNoTemplate")},controller:oc,injector:function(b){return pb(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Nb,css:function(b,a,c){a=Za(a);if(y(c))b.style[a]=c;else{var d;8>=Q&&(d=b.currentStyle&&b.currentStyle[a],
""===d&&(d="auto"));d=d||b.style[a];8>=Q&&(d=""===d?t:d);return d}},attr:function(b,a,c){var d=K(a);if(qb[d])if(y(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||E).specified?d:t;else if(y(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?t:b},prop:function(b,a,c){if(y(c))b[a]=c;else return b[a]},text:function(){function b(b,d){var e=a[b.nodeType];if(x(d))return e?b[e]:"";b[e]=d}var a=[];9>Q?(a[1]=
"innerText",a[3]="nodeValue"):a[1]=a[3]="textContent";b.$dv="";return b}(),val:function(b,a){if(x(a)){if("SELECT"===Ma(b)&&b.multiple){var c=[];r(b.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(x(a))return b.innerHTML;for(var c=0,d=b.childNodes;c<d.length;c++)Ja(d[c]);b.innerHTML=a},empty:pc},function(b,a){S.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==pc&&(2==b.length&&b!==Nb&&b!==oc?a:d)===t){if(T(a)){for(e=
0;e<g;e++)if(b===Mb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;g=e===t?Math.min(g,1):g;for(f=0;f<g;f++){var k=b(this[f],a,d);e=e?e+k:k}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}});r({removeData:Lb,dealoc:Ja,on:function a(c,d,e,f){if(y(f))throw Hb("onargs");var g=oa(c,"events"),k=oa(c,"handle");g||oa(c,"events",g={});k||oa(c,"handle",k=oe(c,g));r(d.split(" "),function(d){var f=g[d];if(!f){if("mouseenter"==d||"mouseleave"==d){var l=X.body.contains||X.body.compareDocumentPosition?
function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!!(e&&1===e.nodeType&&(d.contains?d.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};g[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;c&&(c===this||l(this,c))||k(a,d)})}else sb(c,d,k),g[d]=[];f=g[d]}f.push(e)})},off:nc,one:function(a,c,d){a=w(a);a.on(c,function f(){a.off(c,
d);a.off(c,f)});a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;Ja(a);r(new S(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];r(a.childNodes,function(a){1===a.nodeType&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){r(new S(c),function(c){1!==a.nodeType&&11!==a.nodeType||a.appendChild(c)})},prepend:function(a,c){if(1===a.nodeType){var d=a.firstChild;r(new S(c),function(c){a.insertBefore(c,
d)})}},wrap:function(a,c){c=w(c)[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:function(a){Ja(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,c){var d=a,e=a.parentNode;r(new S(c),function(a){e.insertBefore(a,d.nextSibling);d=a})},addClass:ob,removeClass:nb,toggleClass:function(a,c,d){c&&r(c.split(" "),function(c){var f=d;x(f)&&(f=!Nb(a,c));(f?ob:nb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;
for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Kb,triggerHandler:function(a,c,d){var e,f;e=c.type||c;var g=(oa(a,"events")||{})[e];g&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:E,type:e,target:a},c.type&&(e=D(e,c)),c=ha(g),f=d?[e].concat(d):[e],r(c,function(c){c.apply(a,f)}))}},function(a,c){S.prototype[c]=
function(c,e,f){for(var g,k=0;k<this.length;k++)x(g)?(g=a(this[k],c,e,f),y(g)&&(g=w(g))):Jb(g,a(this[k],c,e,f));return y(g)?g:this};S.prototype.bind=S.prototype.on;S.prototype.unbind=S.prototype.off});bb.prototype={put:function(a,c){this[Ka(a,this.nextUid)]=c},get:function(a){return this[Ka(a,this.nextUid)]},remove:function(a){var c=this[a=Ka(a,this.nextUid)];delete this[a];return c}};var qe=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,re=/,/,se=/^\s*(_?)(\S+?)\1\s*$/,pe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,
cb=C("$injector"),Ne=C("$animate"),Md=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw Ne("notcsel",c);this.$$selectors[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$timeout","$$asyncCallback",function(a,d){return{enter:function(a,c,g,k){g?g.after(a):(c&&c[0]||(c=g.parent()),c.append(a));k&&
d(k)},leave:function(a,c){a.remove();c&&d(c)},move:function(a,c,d,k){this.enter(a,c,d,k)},addClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){ob(a,c)});g&&d(g)},removeClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){nb(a,c)});g&&d(g)},setClass:function(a,c,g,k){r(a,function(a){ob(a,c);nb(a,g)});k&&d(k)},enabled:E}}]}],ja=C("$compile");ic.$inject=["$provide","$$sanitizeUriProvider"];var we=/^(x[\:\-_]|data[\:\-_])/i,yc=C("$interpolate"),Oe=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
ze={http:80,https:443,ftp:21},Sb=C("$location");Ub.prototype=Tb.prototype=Bc.prototype={$$html5:!1,$$replace:!1,absUrl:tb("$$absUrl"),url:function(a){if(x(a))return this.$$url;a=Oe.exec(a);a[1]&&this.path(decodeURIComponent(a[1]));(a[2]||a[1])&&this.search(a[3]||"");this.hash(a[5]||"");return this},protocol:tb("$$protocol"),host:tb("$$host"),port:tb("$$port"),path:Cc("$$path",function(a){a=a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;
case 1:if(v(a)||ib(a))a=a.toString(),this.$$search=ec(a);else if(T(a))r(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Sb("isrcharg");break;default:x(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:Cc("$$hash",function(a){return a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};var la=C("$parse"),Fc={},wa,Pe=Function.prototype.call,Qe=Function.prototype.apply,Qc=Function.prototype.bind,gb={"null":function(){return null},
"true":function(){return!0},"false":function(){return!1},undefined:E,"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return y(d)?y(e)?d+e:d:y(e)?e:t},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(y(d)?d:0)-(y(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"^":function(a,c,d,e){return d(a,c)^e(a,c)},"=":E,"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,
c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"&":function(a,c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},Re={n:"\n",f:"\f",r:"\r",
t:"\t",v:"\v","'":"'",'"':'"'},Wb=function(a){this.options=a};Wb.prototype={constructor:Wb,lex:function(a){this.text=a;this.index=0;this.ch=t;this.lastCh=":";for(this.tokens=[];this.index<this.text.length;){this.ch=this.text.charAt(this.index);if(this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),
this.index++;else if(this.isWhitespace(this.ch)){this.index++;continue}else{a=this.ch+this.peek();var c=a+this.peek(2),d=gb[this.ch],e=gb[a],f=gb[c];f?(this.tokens.push({index:this.index,text:c,fn:f}),this.index+=3):e?(this.tokens.push({index:this.index,text:a,fn:e}),this.index+=2):d?(this.tokens.push({index:this.index,text:this.ch,fn:d}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},
was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;c=y(c)?"s "+c+"-"+this.index+" ["+
this.text.substring(c,d)+"]":" "+d;throw la("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=K(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}a*=
1;this.tokens.push({index:c,text:a,literal:!0,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a=this,c="",d=this.index,e,f,g,k;this.index<this.text.length;){k=this.text.charAt(this.index);if("."===k||this.isIdent(k)||this.isNumber(k))"."===k&&(e=this.index),c+=k;else break;this.index++}if(e)for(f=this.index;f<this.text.length;){k=this.text.charAt(f);if("("===k){g=c.substr(e-d+1);c=c.substr(0,e-d);this.index=f;break}if(this.isWhitespace(k))f++;else break}d={index:d,text:c};if(gb.hasOwnProperty(c))d.fn=
gb[c],d.literal=!0,d.constant=!0;else{var m=Ec(c,this.options,this.text);d.fn=D(function(a,c){return m(a,c)},{assign:function(d,e){return ub(d,c,e,a.text,a.options)}})}this.tokens.push(d);g&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:g}))},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||
this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=Re[g]||g,f=!1;else if("\\"===g)f=!0;else{if(g===a){this.index++;this.tokens.push({index:c,text:e,string:d,literal:!0,constant:!0,fn:function(){return d}});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var fb=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};fb.ZERO=D(function(){return 0},{constant:!0});fb.prototype={constructor:fb,parse:function(a){this.text=
a;this.tokens=this.lexer.lex(a);a=this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var c=this.expect();(a=c.fn)||this.throwError("not a primary expression",c);a.literal=!!c.literal;a.constant=!!c.constant}for(var d;c=
this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw la("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw la("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){if(0<this.tokens.length){var f=this.tokens[0],g=f.text;if(g===a||g===c||g===d||g===
e||!(a||c||d||e))return f}return!1},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,c){return D(function(d,e){return a(d,e,c)},{constant:c.constant})},ternaryFn:function(a,c,d){return D(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})},binaryFn:function(a,c,d){return D(function(e,f){return c(e,f,a,d)},{constant:a.constant&&
d.constant})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,d){for(var e,f=0;f<a.length;f++){var g=a[f];g&&(e=g(c,d))}return e}},filterChain:function(){for(var a=this.expression(),c;;)if(c=this.expect("|"))a=this.binaryFn(a,c.fn,this.filter());else return a},filter:function(){for(var a=this.expect(),c=this.$filter(a.text),d=[];;)if(a=this.expect(":"))d.push(this.expression());
else{var e=function(a,e,k){k=[k];for(var m=0;m<d.length;m++)k.push(d[m](a,e));return c.apply(a,k)};return function(){return e}}},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),function(d,f){return a.assign(d,c(d,f),f)}):a},ternary:function(){var a=this.logicalOR(),c,d;if(this.expect("?")){c=this.assignment();
if(d=this.expect(":"))return this.ternaryFn(a,c,this.assignment());this.throwError("expected :",d)}else return a},logicalOR:function(){for(var a=this.logicalAND(),c;;)if(c=this.expect("||"))a=this.binaryFn(a,c.fn,this.logicalAND());else return a},logicalAND:function(){var a=this.equality(),c;if(c=this.expect("&&"))a=this.binaryFn(a,c.fn,this.logicalAND());return a},equality:function(){var a=this.relational(),c;if(c=this.expect("==","!=","===","!=="))a=this.binaryFn(a,c.fn,this.equality());return a},
relational:function(){var a=this.additive(),c;if(c=this.expect("<",">","<=",">="))a=this.binaryFn(a,c.fn,this.relational());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.fn,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.fn,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(fb.ZERO,a.fn,
this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=this,d=this.expect().text,e=Ec(d,this.options,this.text);return D(function(c,d,k){return e(k||a(c,d))},{assign:function(e,g,k){(k=a(e,k))||a.assign(e,k={});return ub(k,d,g,c.text,c.options)}})},objectIndex:function(a){var c=this,d=this.expression();this.consume("]");return D(function(e,f){var g=a(e,f),k=d(e,f),m;ka(k,c.text);if(!g)return t;(g=va(g[k],c.text))&&(g.then&&c.options.unwrapPromises)&&
(m=g,"$$v"in g||(m.$$v=t,m.then(function(a){m.$$v=a})),g=g.$$v);return g},{assign:function(e,f,g){var k=ka(d(e,g),c.text);(g=va(a(e,g),c.text))||a.assign(e,g={});return g[k]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());while(this.expect(","))}this.consume(")");var e=this;return function(f,g){for(var k=[],m=c?c(f,g):f,h=0;h<d.length;h++)k.push(va(d[h](f,g),e.text));h=a(f,g,m)||E;va(m,e.text);var l=e.text;if(h){if(h.constructor===h)throw la("isecfn",
l);if(h===Pe||h===Qe||Qc&&h===Qc)throw la("isecff",l);}k=h.apply?h.apply(m,k):h(k[0],k[1],k[2],k[3],k[4]);return va(k,e.text)}},arrayDeclaration:function(){var a=[],c=!0;if("]"!==this.peekToken().text){do{if(this.peek("]"))break;var d=this.expression();a.push(d);d.constant||(c=!1)}while(this.expect(","))}this.consume("]");return D(function(c,d){for(var g=[],k=0;k<a.length;k++)g.push(a[k](c,d));return g},{literal:!0,constant:c})},object:function(){var a=[],c=!0;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
var d=this.expect(),d=d.string||d.text;this.consume(":");var e=this.expression();a.push({key:d,value:e});e.constant||(c=!1)}while(this.expect(","))}this.consume("}");return D(function(c,d){for(var e={},m=0;m<a.length;m++){var h=a[m];e[h.key]=h.value(c,d)}return e},{literal:!0,constant:c})}};var Vb={},xa=C("$sce"),ga={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Y=X.createElement("a"),Hc=ua(W.location.href,!0);mc.$inject=["$provide"];Ic.$inject=["$locale"];Kc.$inject=["$locale"];
var Nc=".",Je={yyyy:$("FullYear",4),yy:$("FullYear",2,0,!0),y:$("FullYear",1),MMMM:vb("Month"),MMM:vb("Month",!0),MM:$("Month",2,1),M:$("Month",1,1),dd:$("Date",2),d:$("Date",1),HH:$("Hours",2),H:$("Hours",1),hh:$("Hours",2,-12),h:$("Hours",1,-12),mm:$("Minutes",2),m:$("Minutes",1),ss:$("Seconds",2),s:$("Seconds",1),sss:$("Milliseconds",3),EEEE:vb("Day"),EEE:vb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Xb(Math[0<
a?"floor":"ceil"](a/60),2)+Xb(Math.abs(a%60),2))}},Ie=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,He=/^\-?\d+$/;Jc.$inject=["$locale"];var Fe=ba(K),Ge=ba(Ia);Lc.$inject=["$parse"];var dd=ba({restrict:"E",compile:function(a,c){8>=Q&&(c.href||c.name||c.$set("href",""),a.append(X.createComment("IE fix")));if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){var f="[object SVGAnimatedString]"===za.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||
a.preventDefault()})}}}),Fb={};r(qb,function(a,c){if("multiple"!=a){var d=pa("ng-"+c);Fb[d]=function(){return{priority:100,link:function(a,f,g){a.$watch(g[d],function(a){g.$set(c,!!a)})}}}}});r(["src","srcset","href"],function(a){var c=pa("ng-"+a);Fb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,k=a;"href"===a&&"[object SVGAnimatedString]"===za.call(e.prop("href"))&&(k="xlinkHref",f.$attr[k]="xlink:href",g=null);f.$observe(c,function(c){c?(f.$set(k,c),Q&&g&&e.prop(g,f[k])):"href"===
a&&f.$set(k,null)})}}}});var yb={$addControl:E,$removeControl:E,$setValidity:E,$setDirty:E,$setPristine:E};Oc.$inject=["$element","$attrs","$scope","$animate"];var Rc=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:Oc,compile:function(){return{pre:function(a,e,f,g){if(!f.action){var k=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};sb(e[0],"submit",k);e.on("$destroy",function(){c(function(){$a(e[0],"submit",k)},0,!1)})}var m=e.parent().controller("form"),
h=f.name||f.ngForm;h&&ub(a,h,g,h);if(m)e.on("$destroy",function(){m.$removeControl(g);h&&ub(a,h,t,h);D(g,yb)})}}}}}]},ed=Rc(),rd=Rc(!0),Se=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Te=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ue=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Sc={text:Ab,number:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);e.$parsers.push(function(a){var c=e.$isEmpty(a);if(c||Ue.test(a))return e.$setValidity("number",
!0),""===a?null:c?a:parseFloat(a);e.$setValidity("number",!1);return t});Ke(e,"number",Ve,null,e.$$validityState);e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a});d.min&&(a=function(a){var c=parseFloat(d.min);return sa(e,"min",e.$isEmpty(a)||a>=c,a)},e.$parsers.push(a),e.$formatters.push(a));d.max&&(a=function(a){var c=parseFloat(d.max);return sa(e,"max",e.$isEmpty(a)||a<=c,a)},e.$parsers.push(a),e.$formatters.push(a));e.$formatters.push(function(a){return sa(e,"number",e.$isEmpty(a)||
ib(a),a)})},url:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"url",e.$isEmpty(a)||Se.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},email:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"email",e.$isEmpty(a)||Te.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},radio:function(a,c,d,e){x(d.name)&&c.attr("name",hb());c.on("click",function(){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value)})});e.$render=function(){c[0].checked=d.value==e.$viewValue};
d.$observe("value",e.$render)},checkbox:function(a,c,d,e){var f=d.ngTrueValue,g=d.ngFalseValue;v(f)||(f=!0);v(g)||(g=!1);c.on("click",function(){a.$apply(function(){e.$setViewValue(c[0].checked)})});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return a!==f};e.$formatters.push(function(a){return a===f});e.$parsers.push(function(a){return a?f:g})},hidden:E,button:E,submit:E,reset:E,file:E},Ve=["badInput"],jc=["$browser","$sniffer",function(a,c){return{restrict:"E",require:"?ngModel",
link:function(d,e,f,g){g&&(Sc[K(f.type)]||Sc.text)(d,e,f,g,c,a)}}}],wb="ng-valid",xb="ng-invalid",Oa="ng-pristine",zb="ng-dirty",We=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(a,c,d,e,f,g){function k(a,c){c=c?"-"+mb(c,"-"):"";g.removeClass(e,(a?xb:wb)+c);g.addClass(e,(a?wb:xb)+c)}this.$modelValue=this.$viewValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=
d.name;var m=f(d.ngModel),h=m.assign;if(!h)throw C("ngModel")("nonassign",d.ngModel,ia(e));this.$render=E;this.$isEmpty=function(a){return x(a)||""===a||null===a||a!==a};var l=e.inheritedData("$formController")||yb,n=0,p=this.$error={};e.addClass(Oa);k(!0);this.$setValidity=function(a,c){p[a]!==!c&&(c?(p[a]&&n--,n||(k(!0),this.$valid=!0,this.$invalid=!1)):(k(!1),this.$invalid=!0,this.$valid=!1,n++),p[a]=!c,k(c,a),l.$setValidity(a,c,this))};this.$setPristine=function(){this.$dirty=!1;this.$pristine=
!0;g.removeClass(e,zb);g.addClass(e,Oa)};this.$setViewValue=function(d){this.$viewValue=d;this.$pristine&&(this.$dirty=!0,this.$pristine=!1,g.removeClass(e,Oa),g.addClass(e,zb),l.$setDirty());r(this.$parsers,function(a){d=a(d)});this.$modelValue!==d&&(this.$modelValue=d,h(a,d),r(this.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}}))};var q=this;a.$watch(function(){var c=m(a);if(q.$modelValue!==c){var d=q.$formatters,e=d.length;for(q.$modelValue=c;e--;)c=d[e](c);q.$viewValue!==c&&(q.$viewValue=
c,q.$render())}return c})}],Gd=function(){return{require:["ngModel","^?form"],controller:We,link:function(a,c,d,e){var f=e[0],g=e[1]||yb;g.$addControl(f);a.$on("$destroy",function(){g.$removeControl(f)})}}},Id=ba({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),kc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){d.required=!0;var f=function(a){if(d.required&&e.$isEmpty(a))e.$setValidity("required",!1);else return e.$setValidity("required",
!0),a};e.$formatters.push(f);e.$parsers.unshift(f);d.$observe("required",function(){f(e.$viewValue)})}}}},Hd=function(){return{require:"ngModel",link:function(a,c,d,e){var f=(a=/\/(.*)\//.exec(d.ngList))&&RegExp(a[1])||d.ngList||",";e.$parsers.push(function(a){if(!x(a)){var c=[];a&&r(a.split(f),function(a){a&&c.push(aa(a))});return c}});e.$formatters.push(function(a){return J(a)?a.join(", "):t});e.$isEmpty=function(a){return!a||!a.length}}}},Xe=/^(true|false|\d+)$/,Jd=function(){return{priority:100,
compile:function(a,c){return Xe.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},jd=ya({compile:function(a){a.addClass("ng-binding");return function(a,d,e){d.data("$binding",e.ngBind);a.$watch(e.ngBind,function(a){d.text(a==t?"":a)})}}}),ld=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));d.addClass("ng-binding").data("$binding",c);e.$observe("ngBindTemplate",function(a){d.text(a)})}}],
kd=["$sce","$parse",function(a,c){return{compile:function(d){d.addClass("ng-binding");return function(d,f,g){f.data("$binding",g.ngBindHtml);var k=c(g.ngBindHtml);d.$watch(function(){return(k(d)||"").toString()},function(c){f.html(a.getTrustedHtml(k(d))||"")})}}}}],md=Yb("",!0),od=Yb("Odd",0),nd=Yb("Even",1),pd=ya({compile:function(a,c){c.$set("ngCloak",t);a.removeClass("ng-cloak")}}),qd=[function(){return{scope:!0,controller:"@",priority:500}}],lc={},Ye={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var c=pa("ng-"+a);lc[c]=["$parse","$rootScope",function(d,e){return{compile:function(f,g){var k=d(g[c]);return function(c,d){d.on(a,function(d){var f=function(){k(c,{$event:d})};Ye[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var td=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var k,m,h;c.$watch(e.ngIf,function(f){Ua(f)?m||(m=c.$new(),g(m,function(c){c[c.length++]=X.createComment(" end ngIf: "+e.ngIf+
" ");k={clone:c};a.enter(c,d.parent(),d)})):(h&&(h.remove(),h=null),m&&(m.$destroy(),m=null),k&&(h=Eb(k.clone),a.leave(h,function(){h=null}),k=null))})}}}],ud=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Va.noop,compile:function(g,k){var m=k.ngInclude||k.src,h=k.onload||"",l=k.autoscroll;return function(g,k,q,r,F){var u=0,t,w,R,z=function(){w&&(w.remove(),w=null);t&&(t.$destroy(),t=null);
R&&(e.leave(R,function(){w=null}),w=R,R=null)};g.$watch(f.parseAsResourceUrl(m),function(f){var m=function(){!y(l)||l&&!g.$eval(l)||d()},q=++u;f?(a.get(f,{cache:c}).success(function(a){if(q===u){var c=g.$new();r.template=a;a=F(c,function(a){z();e.enter(a,null,k,m)});t=c;R=a;t.$emit("$includeContentLoaded");g.$eval(h)}}).error(function(){q===u&&z()}),g.$emit("$includeContentRequested")):(z(),r.template=null)})}}}}],Kd=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",
link:function(c,d,e,f){d.html(f.template);a(d.contents())(c)}}}],vd=ya({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),wd=ya({terminal:!0,priority:1E3}),xd=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,f,g){var k=g.count,m=g.$attr.when&&f.attr(g.$attr.when),h=g.offset||0,l=e.$eval(m)||{},n={},p=c.startSymbol(),q=c.endSymbol(),s=/^when(Minus)?(.+)$/;r(g,function(a,c){s.test(c)&&(l[K(c.replace("when","").replace("Minus","-"))]=
f.attr(g.$attr[c]))});r(l,function(a,e){n[e]=c(a.replace(d,p+k+"-"+h+q))});e.$watch(function(){var c=parseFloat(e.$eval(k));if(isNaN(c))return"";c in l||(c=a.pluralCat(c-h));return n[c](e,f,!0)},function(a){f.text(a)})}}}],yd=["$parse","$animate",function(a,c){var d=C("ngRepeat");return{transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,link:function(e,f,g,k,m){var h=g.ngRepeat,l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),n,p,q,s,t,u,A={$id:Ka};if(!l)throw d("iexp",
h);g=l[1];k=l[2];(l=l[3])?(n=a(l),p=function(a,c,d){u&&(A[u]=a);A[t]=c;A.$index=d;return n(e,A)}):(q=function(a,c){return Ka(c)},s=function(a){return a});l=g.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!l)throw d("iidexp",g);t=l[3]||l[1];u=l[2];var y={};e.$watchCollection(k,function(a){var g,k,l=f[0],n,A={},B,I,H,v,E,C,x,J=[];if(Pa(a))C=a,E=p||q;else{E=p||s;C=[];for(H in a)a.hasOwnProperty(H)&&"$"!=H.charAt(0)&&C.push(H);C.sort()}B=C.length;k=J.length=C.length;for(g=0;g<k;g++)if(H=a===
C?g:C[g],v=a[H],n=E(H,v,g),Da(n,"`track by` id"),y.hasOwnProperty(n))x=y[n],delete y[n],A[n]=x,J[g]=x;else{if(A.hasOwnProperty(n))throw r(J,function(a){a&&a.scope&&(y[a.id]=a)}),d("dupes",h,n,na(v));J[g]={id:n};A[n]=!1}for(H in y)y.hasOwnProperty(H)&&(x=y[H],g=Eb(x.clone),c.leave(g),r(g,function(a){a.$$NG_REMOVED=!0}),x.scope.$destroy());g=0;for(k=C.length;g<k;g++){H=a===C?g:C[g];v=a[H];x=J[g];J[g-1]&&(l=J[g-1].clone[J[g-1].clone.length-1]);if(x.scope){I=x.scope;n=l;do n=n.nextSibling;while(n&&n.$$NG_REMOVED);
x.clone[0]!=n&&c.move(Eb(x.clone),null,w(l));l=x.clone[x.clone.length-1]}else I=e.$new();I[t]=v;u&&(I[u]=H);I.$index=g;I.$first=0===g;I.$last=g===B-1;I.$middle=!(I.$first||I.$last);I.$odd=!(I.$even=0===(g&1));x.scope||m(I,function(a){a[a.length++]=X.createComment(" end ngRepeat: "+h+" ");c.enter(a,null,w(l));l=a;x.scope=I;x.clone=a;A[x.id]=x})}y=A})}}}],zd=["$animate",function(a){return function(c,d,e){c.$watch(e.ngShow,function(c){a[Ua(c)?"removeClass":"addClass"](d,"ng-hide")})}}],sd=["$animate",
function(a){return function(c,d,e){c.$watch(e.ngHide,function(c){a[Ua(c)?"addClass":"removeClass"](d,"ng-hide")})}}],Ad=ya(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Bd=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=[],k=[],m=[],h=[];c.$watch(e.ngSwitch||e.on,function(d){var n,p;n=0;for(p=m.length;n<p;++n)m[n].remove();n=m.length=0;for(p=
h.length;n<p;++n){var q=k[n];h[n].$destroy();m[n]=q;a.leave(q,function(){m.splice(n,1)})}k.length=0;h.length=0;if(g=f.cases["!"+d]||f.cases["?"])c.$eval(e.change),r(g,function(d){var e=c.$new();h.push(e);d.transclude(e,function(c){var e=d.element;k.push(c);a.enter(c,e.parent(),e)})})})}}}],Cd=ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),Dd=
ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),Fd=ya({link:function(a,c,d,e,f){if(!f)throw C("ngTransclude")("orphan",ia(c));f(function(a){c.empty();c.append(a)})}}),fd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],Ze=C("ngOptions"),Ed=ba({terminal:!0}),gd=["$compile","$parse",function(a,c){var d=
/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:E};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var m=this,h={},l=e,n;m.databound=d.ngModel;m.init=function(a,c,d){l=a;n=d};m.addOption=function(c){Da(c,'"option value"');h[c]=!0;l.$viewValue==c&&(a.val(c),n.parent()&&n.remove())};
m.removeOption=function(a){this.hasOption(a)&&(delete h[a],l.$viewValue==a&&this.renderUnknownOption(a))};m.renderUnknownOption=function(c){c="? "+Ka(c)+" ?";n.val(c);a.prepend(n);a.val(c);n.prop("selected",!0)};m.hasOption=function(a){return h.hasOwnProperty(a)};c.$on("$destroy",function(){m.renderUnknownOption=E})}],link:function(e,g,k,m){function h(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(v.parent()&&v.remove(),c.val(a),""===a&&u.prop("selected",!0)):x(a)&&u?c.val(""):e.renderUnknownOption(a)};
c.on("change",function(){a.$apply(function(){v.parent()&&v.remove();d.$setViewValue(c.val())})})}function l(a,c,d){var e;d.$render=function(){var a=new bb(d.$viewValue);r(c.find("option"),function(c){c.selected=y(a.get(c.value))})};a.$watch(function(){Aa(e,d.$viewValue)||(e=ha(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];r(c.find("option"),function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function n(e,f,g){function k(){var a={"":[]},c=[""],d,h,
s,t,v;s=g.$modelValue;t=w(e)||[];var E=n?Zb(t):t,I,M,B;M={};B=!1;if(q)if(h=g.$modelValue,x&&J(h))for(B=new bb([]),d={},v=0;v<h.length;v++)d[m]=h[v],B.put(x(e,d),h[v]);else B=new bb(h);v=B;var D,K;for(B=0;I=E.length,B<I;B++){h=B;if(n){h=E[B];if("$"===h.charAt(0))continue;M[n]=h}M[m]=t[h];d=r(e,M)||"";(h=a[d])||(h=a[d]=[],c.push(d));q?d=y(v.remove(x?x(e,M):u(e,M))):(x?(d={},d[m]=s,d=x(e,d)===x(e,M)):d=s===u(e,M),v=v||d);D=l(e,M);D=y(D)?D:"";h.push({id:x?x(e,M):n?E[B]:B,label:D,selected:d})}q||(F||null===
s?a[""].unshift({id:"",label:"",selected:!v}):v||a[""].unshift({id:"?",label:"",selected:!0}));M=0;for(E=c.length;M<E;M++){d=c[M];h=a[d];z.length<=M?(s={element:C.clone().attr("label",d),label:h.label},t=[s],z.push(t),f.append(s.element)):(t=z[M],s=t[0],s.label!=d&&s.element.attr("label",s.label=d));D=null;B=0;for(I=h.length;B<I;B++)d=h[B],(v=t[B+1])?(D=v.element,v.label!==d.label&&D.text(v.label=d.label),v.id!==d.id&&D.val(v.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",v.selected=d.selected),
Q&&D.prop("selected",v.selected))):(""===d.id&&F?K=F:(K=A.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).text(d.label),t.push({element:K,label:d.label,id:d.id,selected:d.selected}),p.addOption(d.label,K),D?D.after(K):s.element.append(K),D=K);for(B++;t.length>B;)d=t.pop(),p.removeOption(d.label),d.element.remove()}for(;z.length>M;)z.pop()[0].element.remove()}var h;if(!(h=s.match(d)))throw Ze("iexp",s,ia(f));var l=c(h[2]||h[1]),m=h[4]||h[6],n=h[5],r=c(h[3]||""),u=c(h[2]?
h[1]:m),w=c(h[7]),x=h[8]?c(h[8]):null,z=[[{element:f,label:""}]];F&&(a(F)(e),F.removeClass("ng-scope"),F.remove());f.empty();f.on("change",function(){e.$apply(function(){var a,c=w(e)||[],d={},h,l,p,r,s,v,y;if(q)for(l=[],r=0,v=z.length;r<v;r++)for(a=z[r],p=1,s=a.length;p<s;p++){if((h=a[p].element)[0].selected){h=h.val();n&&(d[n]=h);if(x)for(y=0;y<c.length&&(d[m]=c[y],x(e,d)!=h);y++);else d[m]=c[h];l.push(u(e,d))}}else if(h=f.val(),"?"==h)l=t;else if(""===h)l=null;else if(x)for(y=0;y<c.length;y++){if(d[m]=
c[y],x(e,d)==h){l=u(e,d);break}}else d[m]=c[h],n&&(d[n]=h),l=u(e,d);g.$setViewValue(l);k()})});g.$render=k;e.$watchCollection(w,k);e.$watchCollection(function(){var a={},c=w(e);if(c){for(var d=Array(c.length),f=0,g=c.length;f<g;f++)a[m]=c[f],d[f]=l(e,a);return d}},k);q&&e.$watchCollection(function(){return g.$modelValue},k)}if(m[1]){var p=m[0];m=m[1];var q=k.multiple,s=k.ngOptions,F=!1,u,A=w(X.createElement("option")),C=w(X.createElement("optgroup")),v=A.clone();k=0;for(var z=g.children(),E=z.length;k<
E;k++)if(""===z[k].value){u=F=z.eq(k);break}p.init(m,F,v);q&&(m.$isEmpty=function(a){return!a||0===a.length});s?n(e,g,m):q?l(e,g,m):h(e,g,m,p)}}}}],id=["$interpolate",function(a){var c={addOption:E,removeOption:E};return{restrict:"E",priority:100,compile:function(d,e){if(x(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var h=d.parent(),l=h.data("$selectController")||h.parent().data("$selectController");l&&l.databound?d.prop("selected",!1):l=c;f?a.$watch(f,function(a,
c){e.$set("value",a);a!==c&&l.removeOption(c);l.addOption(a)}):l.addOption(e.value);d.on("$destroy",function(){l.removeOption(e.value)})}}}}],hd=ba({restrict:"E",terminal:!0});W.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((Ea=W.jQuery)&&Ea.fn.on?(w=Ea,D(Ea.fn,{scope:La.scope,isolateScope:La.isolateScope,controller:La.controller,injector:La.injector,inheritedData:La.inheritedData}),Gb("remove",!0,!0,!1),Gb("empty",!1,!1,!1),Gb("html",!1,!1,!0)):w=S,Va.element=w,
$c(Va))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');
//# sourceMappingURL=angular.min.js.map


if(msie<=8)(function(){function isString(value){return typeof value==="string"}var trim=function(){if(!String.prototype.trim)return function(value){return isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value};return function(value){return isString(value)?value.trim():value}}();function overrideHasClass(element,selector){if(!element.getAttribute)return false;return(" "+(element.className||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1}function overrideRemoveClass(element,
cssClasses){if(cssClasses&&element.setAttribute)angular.forEach(cssClasses.split(" "),function(cssClass){var tmp=trim((" "+(element.className||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," "));element.className=tmp})}function overrideAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.className||"")+" ").replace(/[\n\t]/g," ");angular.forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass);if(existingClasses.indexOf(" "+
cssClass+" ")===-1)existingClasses+=cssClass+" "});element.className=trim(existingClasses)}}angular.forEach({addClass:overrideAddClass,removeClass:overrideRemoveClass,hasClass:overrideHasClass},function(fn,name){var jqLite=angular.element;jqLite.prototype[name]=function(arg1,arg2){var value;for(var i=0;i<this.length;i++)if(value==undefined){value=fn(this[i],arg1,arg2);if(value!==undefined)value=jqLite(value)}else JQLiteAddNodes(value,fn(this[i],arg1,arg2));return value==undefined?this:value}});angular.module("ng").config(function($provide){$provide.decorator("$animate",
["$delegate","$timeout","$$asyncCallback",function($delegate,$timeout,$$asyncCallback){function async(fn){fn&&$$asyncCallback(fn)}var addClass=function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"";angular.forEach(element,function(element){overrideAddClass(element,className)});async(done)};var removeClass=function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"";angular.forEach(element,
function(element){overrideRemoveClass(element,className)});async(done)};var setClass=function(element,add,remove,done){angular.forEach(element,function(element){overrideAddClass(element,add);overrideRemoveClass(element,remove)});async(done)};$delegate.addClass=addClass;$delegate.removeClass=removeClass;$delegate.setClass=setClass;return $delegate}])})})();if(window.dydujQuery!==undefined)window.jQuery=window.$=window.dydujQuery;
var SERVLET_RESPONSE_TYPE_PREFIX="__";
var globalMediatorChannels={CHECK_SERVER_AVAILABILITY:"evt_common_check_server_availability",FEEDBACK_INTERACTION_ANSWER:"evt_fieldbox_feedback_interaction",FEEDBACK:"evt_feedback",FEEDBACK_WITH_REWORD:"evt_feedback_with_reword",FEEDBACK_REASON:"evt_feedback_reason",FEEDBACK_COMMENT:"evt_feedback_comment",FEEDBACK_UPDATE_STATE:"evt_feedback_update_state",GDPR_REQUEST:"evt_gdpr_request",GET_CONTEXT_RESPONSE:"__getContextResponse",GET_SUGGESTIONS:"evt_common_get_suggestions",INITIALIZATION_SUCCESSFUL:"evt_common_initialization_successful",
KNOWLEDGE_SPACES_LIST_REQUEST:"evt_common_knowledge_spaces_list_request",KNOWLEDGE_SPACES_LIST_RESPONSE:SERVLET_RESPONSE_TYPE_PREFIX+"spacesListResponse",ERROR_RESPONSE:SERVLET_RESPONSE_TYPE_PREFIX+"errorResponse",LOG_ERROR:"evt_common_log_error",REGISTER_VISITOR:"evt_common_register_visitor",REQUEST_NEW_CONTEXT_ID:"evt_common_request_context_id",CONTEXT_ID_CHANGED:"evt_common_context_id_changed",RESET_CONTEXT_DATA:"evt_common_reset_context_data",REWORD:"evt_dialog_reword",SERVLET_EMIT:"evt_servlet_emit",
SERVLET_RECEIVE:"evt_servlet_receive",SERVLET_RESPONSE_TYPE_PREFIX:"__",SET_OR_DELETE_VARIABLE:"evt_common_set_or_delete_variable",ADD_INTERNAUT_EVENT:"evt_common_add_internaut_event",SUGGESTION_CLICKED:"evt_common_suggestion_clicked",SUGGESTIONS_RECEIVED:"evt_common_suggestions_received",SURVEY_BOOTSTRAP_REQUEST:"evt_survey_bootstrap_request",SURVEY_END_SUBMIT:"evt_survey_submit_survey_end",SURVEY_LOADED:"evt_survey_loaded",SURVEY_READY:"evt_survey_ready",SURVEY_RESET:"evt_survey_reset_survey",SURVEY_START_SUBMIT:"evt_survey_submit_survey_start",
SURVEY_SUBMIT:"evt_survey_submit_survey",SURVEY_UPDATE:"evt_survey_update_survey",TOP_KNOWLEDGE_CLICKED:"evt_topknowledge_clicked",TOP_KNOWLEDGE_REQUEST:"evt_topknowledge_request",TOP_KNOWLEDGE_RESPONSE:"__topKnowledgeResponse",TOP_KNOWLEDGE_RESPONSE_PREFIX:"evt_topknowledge_response_",TOP_KNOWLEDGE_ANY_RESPONSE:"evt_topknowledge_any_response",TRIGGER_URL_QUERY:"evt_trigger_url_query",UPDATE_SERVLET_URL:"evt_common_update_servlet_url",UPDATE_CONTEXT_ID:"evt_common_update_context_id",UPDATE_LANGUAGE:"evt_common_update_language",
UPDATE_LAST_QUESTION:"evt_common_update_last_question",UPDATE_SPACE:"evt_common_update_space",UPDATE_COMPETENCY:"evt_common_update_competency",UPDATE_SERVER_TIME:"evt_common_update_server_time",SELECTION_ELEMENT_UPDATE:"evt_selection_element_update"};var FEEDBACK_STATES={question:"question",reason:"reason",improve:"improve",endPositive:"endPositive",endNegative:"endNegative",done:"done"};var ALL_EVENTS="ALL_EVENTS";window.dydu=window.dydu||{};window.dydu.common={EVENTS:angular.extend({},globalMediatorChannels)};
var COOKIES_OPTION={expires:10,expirationUnit:"minutes",path:"/"};angular.module("configurationModule",[]);angular.module("contextMessageModule",["messageFactoryModule"]);angular.module("cookieModule",["ab-base64","ipCookie","ngStorage"]);angular.module("dyduApiModule",["configurationModule","logModule"]);angular.module("logModule",["messageFactoryModule"]);angular.module("mediatorModule",[]);angular.module("pingModule",[]);angular.module("utilsModule",[]);
angular.module("autoCompleteModule",["mediatorModule","utilsModule"]);angular.module("contextModule",["mediatorModule","configurationModule","cookieModule"]);angular.module("feedbackModule",["mediatorModule","messageFactoryModule","resourceModule"]);angular.module("generalModule",["mediatorModule","configurationModule","resourceModule","serverAvailabilityModule"]);angular.module("gdprModule",["messageFactoryModule"]);angular.module("messageFactoryModule",["contextModule"]);
angular.module("pushModule",["mediatorModule","contextModule"]);angular.module("resourceModule",["contextModule"]);angular.module("serverAvailabilityModule",["contextModule","pingModule"]);angular.module("servletModule",["mediatorModule","configurationModule","cookieModule"]);angular.module("surveyModule",["contextModule","ngSanitize","html5.placeholder"]);angular.module("topKnowledgeModule",["messageFactoryModule"]);angular.module("triggerModule",["contextModule"]);
angular.module("welcomeCallModule",[]);
var DYDU_SCRIPT_ID = 'dyduchatbox';
var JS_CREATION = '07/09/2020 10:58:07';

var resourcesConfiguration = JSON.parse('{"chatbox.feedback.yes":{"fr":"Oui"},"chatbox.callback.error.text":{"fr":"chatbox.callback.error.text.default"},"chatbox.pin.loading.message":{"fr":"chatbox.pin.loading.message.default"},"chatbox.notification.newmessage":{"fr":"Nouveau message"},"chatbox.monitored.dialog.suggest.help.no":{"fr":""},"gdpr.export.prompt":{"fr":"gdpr.export.prompt.default"},"chatbox.pin.introduction":{"fr":"chatbox.pin.introduction.default"},"chatbox.teaser.need.help":{"fr":"Besoin d\'aide ?"},"chatbox.videochat.title":{"fr":"chatbox.videochat.title.default"},"time.lessthan1minute":{"fr":"Moins d\'une minute"},"chatbox.livechat.confirm.end.title":{"fr":"Arr&ecirc;t du livechat"},"chatbox.notification.icon.url":{"fr":"/img/operator.png"},"chatbox.videochat.disconnection":{"fr":"chatbox.videochat.disconnection.default"},"chatbox.cobrowsing.confirm.end.no":{"fr":"Annuler"},"chatbox.upload.form.title":{"fr":"Upload"},"chatbox.cobrowsing.confirm.end.yes":{"fr":"Confirmer"},"chatbox.rackbot.choice.intro":{"fr":"chatbox.rackbot.choice.intro.default"},"chatbox.pin.loading.title":{"fr":"chatbox.pin.loading.title.default"},"common.topknowledge.tags":{"fr":""},"feedback.choice2.key":{"fr":"Votre r&eacute;ponse ne me convient pas"},"time.and":{"fr":"et"},"chatbox.pin.no":{"fr":"chatbox.pin.no.default"},"chatbox.upload.failure.message":{"fr":"Upload &eacute;chou&eacute;"},"chatbox.videochat.confirm.end.title":{"fr":"chatbox.videochat.confirm.end.title.default"},"chatbox.topknowledge.title":{"fr":"chatbox.topknowledge.title.default"},"chatbox.feedback.question":{"fr":"&Ecirc;tes-vous satisfait par ma r&eacute;ponse ?"},"chatbox.queue.confirm.no":{"fr":"Annuler"},"chatbox.limit.length.reached":{"fr":"Le nombre de caract&egrave;res maximum est atteint"},"chatbox.operator.is.writing":{"fr":"L\'op&eacute;rateur est en train d\'&eacute;crire..."},"chatbox.feedback.negative.reason":{"fr":"Motif d\'insatisfaction"},"chatbox.queue.title":{"fr":"File d\'attente"},"chatbox.interaction.bot.label":{"fr":"MX"},"chatbox.queue.leavequeue":{"fr":"Quitter la file d\'attente"},"chatbox.cobrowsing.confirm.end.title":{"fr":"Fin de co-navigation"},"chatbox.popin.date.label":{"fr":"dd/MM/yy HH:mm"},"chatbox.step.previous":{"fr":"chatbox.step.previous.default"},"time.minutes":{"fr":"minutes"},"chatbox.notification.timeout.reminder.text":{"fr":"La conversation est inactive et va bient&ocirc;t se terminer."},"chatbox.videochat.no":{"fr":"chatbox.videochat.no.default"},"chatbox.monitored.dialog.suggest.help.title":{"fr":""},"gdpr.clean.help":{"fr":"gdpr.clean.help.default"},"chatbox.teaser.confirm.text":{"fr":"Une question ?"},"chatbox.videochat.loading":{"fr":"chatbox.videochat.loading.default"},"gdpr.disclaimer.accept":{"fr":"gdpr.disclaimer.accept.default"},"chatbox.queue.estimation":{"fr":"(estimation) :"},"chatbox.callback.yes":{"fr":"chatbox.callback.yes.default"},"chatbox.callback.calling.title":{"fr":"chatbox.callback.calling.title.default"},"chatbox.callback.busy.title":{"fr":"chatbox.callback.busy.title.default"},"chatbox.popin.suggest.help":{"fr":"vous r&eacute;pond 24h/24 7j/7"},"chatbox.cobrowsing.visitor.label":{"fr":"Op&eacute;rateur"},"chatbox.interaction.bot.askmailsentence":{"fr":""},"chatbox.cobrowsing.yes":{"fr":"Accepter"},"chatbox.popin.confirm.close.no":{"fr":"Annuler"},"chatbox.callback.calling.text":{"fr":"chatbox.callback.calling.text.default"},"chatbox.videochat.introduction":{"fr":"chatbox.videochat.introduction.default"},"common.topknowledge.title":{"fr":"Top 3"},"chatbox.callback.button.title":{"fr":"chatbox.callback.button.title.default"},"chatbox.queue.confirm.text":{"fr":"Un op&eacute;rateur est disponible. Vous allez &ecirc;tre mis en relation."},"chatbox.videochat.confirm.end.no":{"fr":"chatbox.videochat.confirm.end.no.default"},"chatbox.cobrowsing.disconnection":{"fr":"D&eacute;connexion"},"chatbox.videochat.confirm.end.yes":{"fr":"chatbox.videochat.confirm.end.yes.default"},"chatbox.complementary.information":{"fr":"Afficher d&eacute;tail"},"chatbox.popin.livechat.title":{"fr":"{operatorFirstName}"},"chatbox.feedback.thank.positive":{"fr":"Merci"},"chatbox.callback.introduction":{"fr":"chatbox.callback.introduction.default"},"chatbox.pin.error.title":{"fr":"chatbox.pin.error.title.default"},"gdpr.export.help":{"fr":"gdpr.export.help.default"},"chatbox.pin.title":{"fr":"chatbox.pin.title.default"},"chatbox.callback.userNumber":{"fr":"chatbox.callback.userNumber.default"},"chatbox.monitored.dialog.suggest.help.yes":{"fr":""},"chatbox.feedback.leave.comment":{"fr":"Avez-vous un commentaire ?"},"chatbox.cobrowsing.loading":{"fr":"D&eacute;marrage de la co-navigation en cours..."},"chatbox.queue.wait":{"fr":"Attente"},"gdpr.clean.done":{"fr":"gdpr.clean.done.default"},"chatbox.pin.yes":{"fr":"chatbox.pin.yes.default"},"chatbox.callback.no":{"fr":"chatbox.callback.no.default"},"chatbox.popin.multiple.new.messages":{"fr":"nouveaux messages"},"chatbox.queue.confirm.yes":{"fr":"Continuer"},"chatbox.popin.confirm.close.title":{"fr":"Fermeture de la bo&icirc;te"},"chatbox.cobrowsing.no":{"fr":"Refuser"},"chatbox.queue.intro":{"fr":"Vous &ecirc;tes en file d\'attente, un op&eacute;rateur va bient&ocirc;t vous r&eacute;pondre"},"chatbox.livechat.confirm.end.text":{"fr":"&Ecirc;tes-vous s&ucirc;r de vouloir terminer la conversation avec l\'op&eacute;rateur ?"},"chatbox.queue.no.operator.available.anymore":{"fr":"chatbox.queue.no.operator.available.anymore.default"},"chatbox.monitored.dialog.suggest.help.text":{"fr":""},"chatbox.callback.busy.text":{"fr":"chatbox.callback.busy.text.default"},"time.morethan":{"fr":"Plus de"},"chatbox.upload.success.message":{"fr":"Upload r&eacute;ussi"},"chatbox.cobrowsing.confirm.end.introduction":{"fr":"&Ecirc;tes-vous s&ucirc;r de vouloir arr&ecirc;ter la co-navigation ?"},"chatbox.dialog.suggest.help.no":{"fr":"chatbox.dialog.suggest.help.no.default"},"chatbox.queue.confirm.title":{"fr":"Livechat disponible"},"chatbox.interaction.bot.welcomesentence":{"fr":"Je suis l&rsquo;assistant virtuel Maxance. En quoi puis-je vous aider ?"},"chatbox.teaser.confirm.yes":{"fr":"Oui"},"chatbox.popin.one.new.message":{"fr":"nouveau message"},"chatbox.dialog.enter.your.question":{"fr":"Ecrivez ici"},"saml2.no-auth.text":{"fr":"saml2.no-auth.text.default"},"chatbox.dialog.suggest.help.yes":{"fr":"chatbox.dialog.suggest.help.yes.default"},"chatbox.upload.form.submit.value":{"fr":"chatbox.upload.form.submit.value.default"},"chatbox.cobrowsing.active.text":{"fr":"Vous &ecirc;tes en train de co-naviguer avec un conseiller"},"chatbox.queue.position":{"fr":"Position"},"chatbox.dialog.your.mail.address":{"fr":""},"gdpr.export.done":{"fr":"gdpr.export.done.default"},"chatbox.teaser.confirm.no":{"fr":"Non"},"chatbox.feedback.no":{"fr":"Non"},"chatbox.callback.title":{"fr":"chatbox.callback.title.default"},"chatbox.step.next":{"fr":"chatbox.step.next.default"},"chatbox.cobrowsing.introduction":{"fr":"Le conseiller souhaite co-naviguer avec vous afin de mieux vous aider"},"feedback.choice1.key":{"fr":"Je n\'ai pas compris votre r&eacute;ponse"},"chatbox.livechat.confirm.end.yes":{"fr":"Terminer"},"feedback.choice0.key":{"fr":"Vous n\'avez pas r&eacute;pondu &agrave; ma question"},"gdpr.disclaimer.body.authenticated":{"fr":"gdpr.disclaimer.body.authenticated.default"},"chatbox.videochat.confirm.end.introduction":{"fr":"chatbox.videochat.confirm.end.introduction.default"},"chatbox.callback.error.title":{"fr":"chatbox.callback.error.title.default"},"chatbox.dialog.suggest.help.text":{"fr":"chatbox.dialog.suggest.help.text.default"},"chatbox.pin.pincode":{"fr":"chatbox.pin.pincode.default"},"gdpr.disclaimer.body.unauthenticated":{"fr":"gdpr.disclaimer.body.unauthenticated.default"},"chatbox.cobrowsing.title":{"fr":"Demande de co-navigation"},"chatbox.cobrowsing.error":{"fr":"Une erreur est survenue lors du d&eacute;marrage de la co-navigation"},"chatbox.popin.confirm.close.text":{"fr":"&Ecirc;tes-vous s&ucirc;r de vouloir fermer d&eacute;finitivement la bo&icirc;te de dialogue ?"},"chatbox.livechat.confirm.end.no":{"fr":"Annuler"},"chatbox.popin.title":{"fr":"MAXANCE"},"chatbox.limit.length.almost.reached":{"fr":"Le nombre de caract&egrave;res maximum est bient&ocirc;t atteint"},"chatbox.videochat.notsupported.message":{"fr":"Le navigateur utilis&eacute; n\'est pas compatible avec le visio-tchat."},"chatbox.pin.error.message":{"fr":"chatbox.pin.error.message.default"},"chatbox.interaction.operator.label":{"fr":"{operatorFirstName}"},"chatbox.feedback.thank.negative":{"fr":"Merci pour votre avis"},"chatbox.videochat.error":{"fr":"chatbox.videochat.error.default"},"chatbox.interaction.user.label":{"fr":"Moi"},"chatbox.videochat.yes":{"fr":"chatbox.videochat.yes.default"},"saml2.no-auth.title":{"fr":"saml2.no-auth.title.default"},"gdpr.clean.prompt":{"fr":"gdpr.clean.prompt.default"},"chatbox.dialog.suggest.help.title":{"fr":"chatbox.dialog.suggest.help.title.default"},"time.between":{"fr":"entre"},"chatbox.popin.confirm.close.yes":{"fr":"Fermer"}}');
var configurations = JSON.parse('{"maxSuggestionNumber":5,"avatarFile":"eva.png","userCanPrintDialog":false,"useInternalSurvey":false,"configurationComment":"","useInternalFeedback":false,"useLocalStorage":false,"language":"fr","historicBotUuid":"","chatbox.upload.callback":"dyduUploadCallBack","cookieDomain":"","gdprEnabled":false,"showGdprExportButton":true,"userCanMinimizePopin":true,"topknowledge.with.content":true,"ignoreManualTopKnowledge":false,"positivefeedbackreword":"","servletUrl":"https://web.archive.org/web/20210703141519/https://app1.earth.doyoudreamup.com/servlet","qualificationMode":false,"chatbox.upload.fileinputid":"dydu-upload-file","useLabelForRedirection":true,"configurationName":"Maxance","chatbox.upload.result.delay":5000,"textColor":"#FFFFFF","securityTokenDateVariableName":"","feedBack.choices":["feedback.choice0.key","feedback.choice1.key","feedback.choice2.key"],"securityTokenVariableName":"","cookiesDisabled":false,"userCanResizeSidebar":false,"useBotLabelForRedirection":false,"displayEstimatedWaitingTime":true,"consultationSpace":"","replayLastQuestion":true,"topknowledgePeriod":"Last30Days","defaultConsultationSpaceName":"CONNAISSANCES_GENERIQUES_ASSURANCE","chatbox.survey.at.start.keep.information.for.session":false,"possibleLanguages":["fr"],"negativefeedbackreword":"","showTeaserOnLoad":true,"backgroundFile":"background-72a011c0-bf35-4037-b9f9-bfe39d735743","buttonColor":"#F48123","saml2.use.relay":false,"backupServletUrl":"https://web.archive.org/web/20210703141519/https://app2.earth.doyoudreamup.com/servlet","showTeaserIfOperatorAvailable":false,"saml2.redirect.top.window":false,"consultationSpaceParam":"","useServerCookieForContext":false,"isPureLivechat":false,"mainColor":"#1F84A7","operatorAvailabilityCheckIntervalInSeconds":10,"autoSearchParam":"","botId":"5826436b-01e8-4ce0-adc9-206e7d639aa6","userCanSendDialogByMail":false,"closeSidebarAutomatically":true,"livechatAvatarFile":"eva.png","blinkTitleBar":true,"showPopinOnLoad":false,"userCanEndLivechat":false,"buttonSpriteFile":"buttons-white.png","apiPointName":"dydu_api","useWebSocketIfPossible":false,"templateFormats":"","mathJaxCDN":"cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js","userId":"","scriptId":"","topknowledgeMaxKnowledge":3,"chatbox.survey.at.end.timeout":1,"showGdprCleanButton":true,"userCanMovePopin":false,"languageDetection":false,"userCanReopenSidebar":true,"userCanClosePopin":false,"topknowledgeIncludeTagChildren":false,"secondaryColor":"#114759"}');

(function () {
    var css = '/* Boîte de dialogue (base) : dydu-popin.css *//* DECLARATION DES FONTS*/@font-face {    font-family: \'Oxygen-Regular\';  src: url(\'#baseUrl#files/Oxygen-Regular.ttf\') format(\'ttf\');  src: url(\'#baseUrl#files/Oxygen-Regular.eot\') format(\'eot\');  src: url(\'#baseUrl#files/Oxygen-Regular?#iefix\') format(\'embedded-opentype\');  src: url(\'#baseUrl#files/Oxygen-Regular.woff\') format(\'woff\');  src: url(\'#baseUrl#files/Oxygen-Regular.woff2\') format(\'woff2\');  font-weight: normal;    font-style: normal;}@font-face {    font-family: \'Oxygen-Bold\';  src: url(\'#baseUrl#files/Oxygen-Bold.ttf\') format(\'ttf\');  src: url(\'#baseUrl#files/Oxygen-Bold.eot\') format(\'eot\');  src: url(\'#baseUrl#files/Oxygen-Bold?#iefix\') format(\'embedded-opentype\');  src: url(\'#baseUrl#files/Oxygen-Bold.woff\') format(\'woff\');  src: url(\'#baseUrl#files/Oxygen-Bold.woff2\') format(\'woff2\');  font-weight: normal;    font-style: normal;}@font-face {    font-family: \'Oxygen-Light\';  src: url(\'#baseUrl#files/Oxygen-Light.ttf\') format(\'ttf\');  src: url(\'#baseUrl#files/Oxygen-Light.eot\') format(\'eot\');  src: url(\'#baseUrl#files/Oxygen-Light?#iefix\') format(\'embedded-opentype\');   src: url(\'#baseUrl#files/Oxygen-Light.woff\') format(\'woff\');  src: url(\'#baseUrl#files/Oxygen-Light.woff2\') format(\'woff2\');  font-weight: normal;    font-style: normal;}/*END FONTS*/#dydu-chatbox .nofloat {    clear: both;    font-size: 0;    height: 0;}#dydu-survey, #dydu-popin, #dydu-confirm-dialog, #dydu-external-panel {    background-color: #FFF;    font-family: Oxygen-Regular, Arial,helvetica,sans-serif;    font-size: 100%;    position: fixed;    box-sizing: border-box;    -moz-box-sizing:border-box;    -webkit-box-sizing:border-box;    -o-box-sizing:border-box;    -ms-box-sizing:border-box;    -khtml-box-sizing:border-box;}#dydu-survey *, #dydu-popin *, #dydu-lateral-panel *, #dydu-external-panel *, #dydu-confirm-dialog * {    box-sizing: border-box;    -moz-box-sizing:border-box;    -webkit-box-sizing:border-box;    -o-box-sizing:border-box;    -ms-box-sizing:border-box;    -khtml-box-sizing:border-box;}#dydu-popin {    bottom: 0 !important;    height: 506px;    right: 20px !important;    width: 340px;  z-index: 9999999;  border-radius: 6px;  box-shadow: 0px 3px 8px 0px rgba(0, 0, 0, 0.5);  -moz-box-shadow: 0px 3px 8px 0px rgba(0, 0, 0, 0.5);}#dydu-popin p, #dydu-teaser p, #dydu-confirm-dialog p {    margin: 0;}#dydu-lateral-panel, #dydu-external-panel {    top: 0;    height: 480px;    min-height: 150px;    min-width: 300px;    position: absolute;    right: 345px;    width: 350px;  box-shadow: 0px 3px 8px 0px rgba(0, 0, 0, 0.5);  -moz-box-shadow: 0px 3px 8px 0px rgba(0, 0, 0, 0.5);    -webkit-transition:all linear 0.5s;    transition:all linear 0.5s;}#dydu-lateral-panel.ng-hide {  opacity:0;  /* transform: scale(0.8); */}#dydu-lateral-panel .dydu-lateral-panel header {  position:relative;font-size:16px;  font-weight:bold;  padding:22px 25px;  background-color: #AF2B11;} #dydu-lateral-panel .dydu-lateral-panel header .dydu-title-container .dydu-title {font-size:17px;}#dydu-lateral-panel .dydu-lateral-panel header .dydu-option .dydu-close {background:url("#baseUrl#files/croix-sidebar.png") no-repeat 0 0;  width:16px;  height:16px;}#dydu-external-panel {    bottom: 10px;    max-height: 450px;    position: fixed;    right: 10px;}#dydu-popin p {    margin: 0;}#dydu-chatbox {    height: 100%;    position: relative;}header#dydu-header-popin, #dydu-lateral-panel header, #dydu-external-panel header, header#dydu-header-msgbox, header#dydu-confirm-dialog-header {  position:relative;    background-color: #FFF;    height: 65px;    padding: 10px;    width: 100%;  font-size:16px;  font-weight:bold;  border-bottom: 1px solid #ebeae9;  border-radius: 6px;}#dydu-popin #dydu-chatbox #dydu-header-popin .dydu-avatar-header {  position:absolute;  left: 20px;  top:50%;  margin-top:-21.5px;background:url("#baseUrl#files/avatar-header-maxance.png") no-repeat 0 0;  width:43px;  height:43px;}#dydu-history {    color: #333;    font-size: 0.875em;    height: 390px;    max-height: 390px;    overflow-x: hidden;    overflow-y: auto;  background-color:#FFF;  padding-bottom:20px;}#dydu-history .dydu-operator-textfield {position: relative;    background: #FFF;  border:1px solid #ebeae9;    float: left;    clear: both;    max-width: 265px;  margin-left: 35px;  margin-bottom:10px;  border-radius: 6px;}#dydu-history .dydu-operator-textfield .dydu-min-avatar {  background:url("#baseUrl#files/min-avatar-maxance.png") no-repeat 0 0;  width:22px;  height:22px;float:left;  margin-right:10px;  position:absolute;  bottom:0;  left:-30px;}#dydu-history .dydu-operator-textfield ul {padding-left: 20px;    margin-bottom: 0;    margin-top: 5px;}#dydu-history .dydu-operator-textfield::before {content: \'\';    background: url("#baseUrl#files/before-bot.png") no-repeat 0 0;    width: 9px;    height: 9px;    position: absolute;    left: -9px;    top: 0;}.dydu-textfield {display: inline-block;    margin: 5% 5% 0 5%;    padding: 13px;    width: auto;}.automaticrewords {padding-left:20px;}/*USERS*//*TOP KNOWLEDGE*/.dydu-top-knowledge-container {padding:20px;}.dydu-top-knowledge-container span {font-weight:bold;}.dydu-top-knowledge-container ul {padding-left:0;  margin-bottom:0;}.dydu-top-knowledge-container ul li {list-style:none;  margin-bottom:10px;  padding-left:20px;  position:relative;}.dydu-top-knowledge-container ul li a:hover {text-decoration:underline;color:#000 !important;}.dydu-top-knowledge-container ul li:before {content:\'\';  background: url("#baseUrl#files/top-arrow.png") no-repeat 0 0;  width:8px;  height:11px;  display:inline-block;  position:absolute;  top:5px;  left:0;  margin-right:10px;}/*END TOP KNOWLEDGE*//*feedback*/.dydu-external-feedback ul li:hover {text-decoration:underline;}/*End feedback*/#dydu-history .dydu-user-textfield {position: relative;    background: #fbd6d6;    float: right;    clear: both;    max-width: 220px;  color:#FFF;  border-radius: 6px;}#dydu-history .dydu-user-textfield::after {content: \'\';    background: url("#baseUrl#files/after-user.png") no-repeat 0 0;    width: 9px;    height: 9px;    position: absolute;    right: -9px;    top: 0;}.dydu-new-message {    background-color: #fff;    border-left: 1px solid #f3f3f3;    border-right: 1px solid #f3f3f3;    cursor: pointer;    position: absolute;    text-align: center;    top: -31px;    width: 100%;}.dydu-new-message p {    background:url("#baseUrl#files/#buttonSpriteFile#") no-repeat right -185px;    display: inline-block;    font-size: 10px;    line-height: 30px;    padding-right: 20px;    text-align: center;    text-decoration: underline;}.dydu-new-message:hover {    background-color: #secondaryColor#;    color: #textColor#;}.dydu-new-message:hover p {    background:url("#baseUrl#files/#buttonSpriteFile#") no-repeat right -222px;}#dydu-history .container-notifies {    position: absolute;    top: 60px;}#dydu-history .container-notifies .notify {    font-size: 0.875em;}.dydu-operator-text {    line-height: 1.5em;    overflow: hidden;    width: 100%;    word-wrap: break-word;}footer#dydu-textbox {  max-height:50px;    bottom: 0;    position: unset;    width: 100%;    z-index: 10;  border-top: 1px solid #ebeae9;  border-radius: 6px;}/*footer#dydu-textbox form div {    min-height: 100%;}*/footer#dydu-textbox form {    height: 100%;    max-height: 50px;    overflow: hidden;    position: relative;    width: 100%;    margin-bottom: 0;  border-radius: 6px;    border: 2px solid #AF2B11;}.dydu-textfield.dydu-hidden-interaction {    min-height: auto;    height: 0px;    padding: 0px;}.dydu-external-satisfied {  background:#FFF;    width: auto;    z-index: 10;}#dydu-popin .sastified > p {    margin-bottom: 10px;}.dydu-step2 ul {    margin-left: 0;    padding-left: 20px;}.dydu-sastified.dydu-external-satisfied.dydu-step2, .dydu-sastified.dydu-external-satisfied.dydu-step3 {}.dydu-step3 form {margin-bottom:0;}.dydu-step2 ul li {    margin-bottom:5px;}.dydu-step2 ul li span{    cursor:pointer;    text-decoration: underline;  color:#AF2B11;}.dydu-step3 textarea {    resize: none;    width: 100%;  margin-top: 10px;    min-height: 70px;    background-color: #FFF;    border: 1px solid #ebeae9;    margin-bottom: 10px;  outline:none;  padding:10px;  font-family:Oxygen-Regular,arial;}.dydu-step3 input[type="submit"] {    float: right;    width: 90px;    border: none;    padding: 11px;    background-color: #AF2B11;    text-align: center;    color: #FFF;    font-size: 13px;    font-weight: bold;}.dydu-textarea {    color: #000000;    float: left;    font-family: Oxygen-Regular,Arial,sans-serif;    font-size: 0.875em;    max-height: 60px;    min-height: 50px;    line-height: 25px;    height: 45px !important;    width: 100%;    padding: 10px 50px 10px 13px;    outline: none;  resize:none !important;  box-shadow:none;  border-radius: 0;  border: none;}/*.dydu-textarea textarea:focus {   border: none !important;}*/.dydu-textarea:focus {   border: none !important;}.dydu-textarea div {    font-family: Oxygen-Regular,arial,helvetica,sans-serif;    font-size: 0.875em;    left: 2%;    margin: 0;    max-height: 60px;    overflow: auto;    position: absolute;    resize: none;    right: 15%;}.dydu-textarea div.dydu-desactivate {    line-height: 27px;}.dydu-mail-form {margin:0;  margin-top:5px;}.dydu-mail-form input {    display: inline-block;    vertical-align: middle;}.dydu-mail-form input[type="submit"] {    background-color: #AF2B11;    border: none;    color: #textColor#;    height: 32px;    width: 40px;  text-transform:uppercase;}.dydu-mail-form input[type="text"], .dydu-mail-form input[type="email"] {    border: 1px solid #ccc;    color: #333;    height: 32px;    text-indent: 4px;    width: 75%;}.dydu-mail-form input[type="text"], .dydu-mail-form input[type="email"]:invalid {background-color:#FFF;  box-shadow:none;}.dydu-mail-form input[type="text"], .dydu-mail-form input[type="email"]:required {background-color:#FFF;  box-shadow:none;  outline:none;}#dydu-textbox ::-moz-placeholder{    color:grey;    line-height:30px;}#dydu-textbox ::-webkit-input-placeholder {    color:grey;    line-height:30px;}.dydu-submit {    position: absolute;    top: 0;    right: 0;  bottom:0;    width: 50px;  height:50px;  background-color: #AF2B11;  cursor:pointer;}.dydu-submit input {    background-color: #AF2B11;  background: url("#baseUrl#files/arrow-submit.png") no-repeat 0 0;    border: none;    color: #fff;    display: block;  padding:25px;  background-position:center center;    height: 16px;    width: 18px;  text-indent: -999999px;}/*.dydu-min-avatar, .dydu-user-ico, .dydu-system-min-avatar {    background: #fff;    display: none;    float: left;    height: 35px;    margin-right: 10px;    width: 35px;}*/.dydu-system-min-avatar {    background: url("#baseUrl#files/avatar-sys.png") no-repeat 0 0;}.dydu-system-textfield {    background-color: #e1e1e1;    border-left: 3px solid #000;    font-family: Oxygen-Regular, arial;}.dydu-operator-textfield .dydu-operator-name {  display:none;}.dydu-operator-textfield .dydu-operator-name::before {display:none;}.dydu-user-textfield .dydu-operator-name {display:none;}#dydu-textbox .dydu-user-ico {    left: 10px;    position: absolute;}.live-chat .dydu-avatar-header {    background: url("#baseUrl#files/#livechatAvatarFile#") no-repeat 0 0;}#dydu-teaser .dydu-avatar-header {    background: url("#baseUrl#files/avatar-teaser-maxance.png") no-repeat 0 0;  position: absolute;    height: 43px;    width: 43px;    left: 10px;    top: 50%;    margin-top: -21.5px;}header#dydu-header-popin .dydu-title-container {    color: #textColor#;    margin-left: 80px;}header#dydu-header-popin .dydu-top-knowledge-title-container {    color: #textColor#;}.dydu-second-title {  color:#333;    font-size: 14px;  font-family:Oxygen-Regular;  font-weight: initial;}#dydu-lateral-panel .dydu-title-container .dydu-title, #dydu-external-panel .dydu-title-container .dydu-title {    background-color: transparent;    font-size: 0.875em;}#dydu-lateral-panel .dydu-title-container .dydu-title span, #dydu-external-panel .dydu-title-container .dydu-title span {    color: #textColor#;}.dydu-title-container .dydu-title {    font-size:18px;  font-family:Oxygen-Bold;  color:#333;  text-transform:uppercase;}.dydu-title {    font-size: 0.75em;}.dydu-option {    position: absolute;    right: 0;    top: 50%;  margin-top:-8px;  right:20px;}.dydu-option div {    float: left;    height: 16px;    width: 16px;  padding: 0 13px;}.dydu-option div.dydu-close {  background: url("#baseUrl#files/croix-maxance.png") no-repeat 0 0;    cursor: pointer;  padding-right:0;}.dydu-option div.dydu-lower {  background: url("#baseUrl#files/line-maxance.png") no-repeat 0 0;    cursor: pointer;}.dydu-option div.dydu-livechat-end {    cursor: pointer;}.dydu-option div.dydu-print {  background: url("#baseUrl#files/print.png") no-repeat 0 0;    cursor: pointer;}.dydu-option div.dydu-mail {    background: url("#baseUrl#files/mail-maxance.png") no-repeat 0 0;    cursor: pointer;}.dydu-option div.dydu-dragNdrop {    background-position: center -74px;    cursor: move;}.dydu-option div.dydu-gdpr-export {    background-position: center -413px;    cursor: pointer;}.dydu-option div.dydu-gdpr-clean {    background-position: center -449px;    cursor: pointer;}#dydu-aside-content {    bottom: 0;    left: 0;    overflow: auto;    padding: 5%;    position: absolute;    right: 0;    top: 60px;}#dydu-aside-frame iframe {    width: 100%;}#dydu-lateral-panel p, #dydu-external-panel p {    font-size: 0.875em;    padding: 10px;}#dydu-teaser {    bottom: 10px;    font-family: Oxygen-Regular,Arial,helvetica,sans-serif;    font-size: 100%;    position: fixed;    right: 10px;    z-index: 9999999;  box-shadow: 3px 4px 10px rgba(0, 0, 0, 0.22);    border-radius: 6px;  border: #9a9a9a 1px solid;  -moz-box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.3);  -webkit-box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.3);  -ms-box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.3);}#dydu-teaser .dydu-chatbox, #dydu-teaser > div {    background-color: #FFF;    font-size: 0.875em;    line-height: 30px;    padding: 13px;    position: relative;    width: 210px;  height:55px;  box-sizing:border-box;  border-radius: 6px;}#dydu-teaser .dydu-chatbox p {margin:0;  padding:0;  font-size:16px;  line-height: 15px;  margin-left:60px;  font-weight:bold;  color:#FFF;}#dydu-teaser a.dydu-link-teaser {    margin-left: 55px;  font-size:17px;  text-decoration:none;  font-family: Oxygen-Bold;    color: #000;}#dydu-teaser a {    color: #textColor#;}#dydu-popin a {    color: #AF2B11;  text-decoration: underlinefont-size:12px;}#dydu-popin a:hover {  text-decoration-color: #AF2B11;}footer#dydu-textbox.notif {    overflow: visible;}.container-notifies {    top: -15px;    width: 100%;    z-index: 11;}.notify {    background: #000;    border-bottom: 1px solid #fff;    color: #fff;    font-size: 0.75em;    text-align: center;    width: 100%;}#dydu-popin .shortcut {    background-color: #f1f1f1;    border-bottom: 1px solid #e1e1e1;    border-top: 1px solid #e1e1e1;    bottom: 55px;    color: #000;    font-size: 100%;    position: absolute;    z-index: 11;}#dydu-popin .shortcut ul {    margin: 0 0 0 5%;    overflow: hidden;    padding: 0;    width: 95%;}#dydu-popin .shortcut li {    float: left;    list-style: square inside;    padding: 5px 0;    text-align: left;    width: 50%;}.action-container {    bottom: 0;    position: fixed;    right: 0;}.action-content {    background: #F1F1F1;    border: 1px solid #000;    cursor: pointer;    padding: 5px 10px;}.action-content:hover {    background-color: #e1e1e1;}.action-content p {    background: url(\'#baseUrl#files/puce.png\') no-repeat 0 center;    padding-left: 10px;}.nav-container {    background: #f1f1f1;    border: 1px solid #000;    bottom: 0;    display: none;    position: absolute;    right: 127px;}.nav-container ul {    margin: 5px 10px;    padding: 0;}.nav-container li {    cursor: pointer;    font-size: 0.875em;    list-style: none outside;    padding: 5px;}.nav-container li:hover {    background-color: #e1e1e1;}#dydu-survey {    bottom: 0;    font-family: Oxygen-Regular,Arial,sans-serif;    font-size: 0.875em;    margin: auto;    right: 20px;    width: 340px;    z-index: 20;}#dydu-survey input, #dydu-survey label {    vertical-align: middle;}#dydu-survey article {    width: 100%;}#dydu-survey input[type="submit"] {    float: right;    margin-top: 5px;}.dydu-survey.dydu-internal #dydu-survey {    box-shadow: none;    font-family: Oxygen-Regular,Arial,sans-serif;    font-size: 14px;    margin: auto;    position: static;    width: auto;}.dydu-hidden-survey {    display: none !important;}#dydu-msgbox-content {    margin: 5%;    width: 90%;}.answer.textfield label {    display: block;    float: left;    width: 30%;}#dydu-msgbox-content textarea {    font: 0.875em/20px arial,helvetica,sans-serif;    max-height: 285px;    min-height: 100px;    resize: vertical;    width: 100%;}header#dydu-header-msgbox {height: auto;}header#dydu-header-msgbox, header#dydu-confirm-dialog-header {    padding: 0;}#dydu-confirm-dialog .dydu-second-title {    color: #333;    font-size: 0.875em;    padding: 5px 5px 5px 20px;  font-weight:bold;}#dydu-survey .dydu-second-title {    color: #333;    font-size: 0.875em;    padding: 6px 0 0 10px;}#dydu-survey .question {    margin: 10px 0 5px;    padding: 0;    width: 100%;}#dydu-confirm-dialog {    bottom: 0;    height: 140px;    left: 0;    margin: auto;    right: 0;    top: 0;    width: 320px;    z-index: 20;  box-shadow: 0px 3px 8px 0px rgba(0, 0, 0, 0.5);  -moz-box-shadow: 0px 3px 8px 0px rgba(0, 0, 0, 0.5);}.error-field {    border: 1px solid #ff0000;    color: #ff0000;    font-size: 0.75em;    margin: 2px 0;    padding: 5px;}header#dydu-confirm-dialog-header {    height: 30px;}#dydu-confirm-dialog-content {    font-size: 0.875em;    padding: 20px;    width: 100%;}#dydu-confirm-dialog-content .dydu-question-container a:first-child {    margin-right: 10px;}#dydu-confirm-dialog-content .dydu-question-container {    margin-top: 10px;}.waiting-queue .dydu-avatar-header {    background: url(\'#baseUrl#files/ico-time.png\') no-repeat center center;    height: 60px;    top: 0;    width: 60px;}.waiting-queue header#dydu-header-popin .dydu-title-container {    margin-left: 50px;}.waiting-queue footer#dydu-textbox {    opacity: 0.3;}.content-waiting-queue {    background-color: rgba(255, 255, 255, 0.95);    border-bottom: 1px solid #e1e1e1;    border-top: 1px solid #e1e1e1;    bottom: 0;    left: 0;    position: absolute;    right: 0;    top: 60px;    z-index: 12;}.content-waiting-queue .dydu-textfield {    padding: 15px;}.content-waiting-queue .dydu-textfield p {    line-height: 20px;}#dydu-popin .content-waiting-queue .dydu-textfield > p:first-child {    margin-bottom: 20px;}.content-waiting-queue div.dydu-textfield:last-child {    min-height: 0;}.ask {    background-color: #008000;    color: #fff;    cursor: pointer;    padding: 5px 10px;}.decline {    background-color: #ff0000;    color: #fff;    cursor: pointer;    padding: 5px 10px;}#dydu-confirm-dialog .dydu-avatar-header {    bottom: -1px;    left: -60px;    top: auto;}#dydu-popin .dydu-confirm {    margin-top: 5px;}#dydu-popin .dydu-confirm a {    color: #fff;    display: inline-block;    margin-right: 5px;    padding: 5px;    text-decoration: none;}#dydu-popin .dydu-confirm a.confirm01 {    background-color: #ff9900;}#dydu-popin .dydu-confirm a.confirm02 {    background-color: #ff7700;}#dydu-popin .dydu-confirm a:hover {    background-color: #ff0000;    transition-duration: 1s;}#dydu-popin .dydu-sastified > span,#dydu-popin .dydu-step-buttons > span,#dydu-popin .dydu-show-sidebar-container {    color: #fff;    cursor: pointer;    display: inline-block;    margin-top: 5px;    overflow: hidden;    padding: 8px;    /*white-space: nowrap;*/    width: 47%;  background-color: #AF2B11;    text-align: center;    font-family: Oxygen-Bold;    text-transform: uppercase;}#dydu-popin .dydu-step-buttons > span[ng-click="requestPreviousStep()"],#dydu-popin .dydu-show-sidebar-container {    background-color: #AF2B11;    text-align: center;    width: 96%;}#dydu-popin .dydu-step-buttons > span[ng-click="requestNextStep()"] {    background-color: #mainColor#;    text-align: center;}#dydu-popin .dydu-sastified .dydu-feed {height: 40px;    width: 100%;    display: inline-block;    text-align: center;  margin:0 auto;  margin-top:10px;}#dydu-lateral-panel > div.dydu-lateral-panel, #dydu-external-panel > div.dydu-lateral-panel {    height: 100%;}#dydu-lateral-panel aside, #dydu-external-panel aside {    background: #fff;    max-height: 100%;    overflow: auto;}.btn-outline {    background: url(\'#baseUrl#files/icon-close.png\') no-repeat 8px 18px #secondaryColor#;    box-sizing: border-box;    -moz-box-sizing:border-box;    -webkit-box-sizing:border-box;    -o-box-sizing:border-box;    -ms-box-sizing:border-box;    -khtml-box-sizing:border-box;    float: right;    font-size: 12px;    height: 50px;    max-width: 10%;    padding: 0 0 0 30px;    position: relative;    right: 0;    width: 10%;}.btn-outline div {    color: #textColor#;    cursor: pointer;}.nofloat {    clear: both;}.top-tools {    background-color: #mainColor#;    color: #textColor#;    font-family: Oxygen-Regular,Arial,Helvetica,sans-serif;    font-size: 14px;    height: 50px;    line-height: 50px;    position: fixed;    top: 0;    width: 100%;}.tools-title {    float: left;    text-indent: 1%;    width: 90%;}.resizable {    position: relative;}.resizable.no-transition {    transition: none !important;}.rg-right, .rg-left, .rg-top, .rg-bottom, .rg-top-left {    -moz-user-select: -moz-none;    -ms-user-select: none;    -webkit-user-select: none;    user-select: none;    background: transparent;    display: block;    height: 14px;    line-height: 14px;    position: absolute;    width: 14px;    z-index: 1;}.rg-right span, .rg-left span, .rg-top span, .rg-bottom span, .rg-top-left span {    border: 1px solid #ccc;    box-sizing: border-box;    display: block;    position: absolute;}.rg-right span, .rg-left span {    border-width: 0 1px;    height: 20px;    margin: -10px 0 0 3.5px;    top: 50%;    width: 7px;}.rg-top span, .rg-bottom span {    border-width: 1px 0;    height: 7px;    left: 50%;    margin: 3.5px 0 0 -10px;    width: 20px;}.rg-top-left span {    border-width: 1px 0 0 1px;    height: 20px;    margin: 7px;    width: 20px;}.rg-top {    cursor: row-resize;    left: 0;    margin-top: -14px;    top: 0;    width: 100%;}.rg-right {    cursor: col-resize;    height: 100%;    margin-right: -14px;    right: 0;    top: 0;}.rg-bottom {    bottom: 0;    cursor: row-resize;    left: 0;    margin-bottom: -14px;    width: 100%;}.rg-left {    cursor: col-resize;    height: 100%;    left: 0;    margin-left: -14px;    top: 0;}/*DYDUPOPUP*/#dyduPopup {    font-size: 13px;    position: absolute;    z-index: 30;    bottom: 49px;  left:0;    width: 100%;    background: #FFFFFF;}#dyduPopup .dydu_suggest {    border-top: 1px solid #d8d8d8;    border-bottom: 1px solid #d8d8d8;    font-size: 12px;    background-color: #FECFC6;  border-radius: 6px;}#dyduPopup .dydu_suggest ul {    padding: 10px 0;    margin: 0;    background-color: #FECFC6;}#dyduPopup .dydu_suggest ul li:before {    content: none;    padding-left: none;    padding-right: none;}#dyduPopup .dydu_suggest ul li {  cursor: pointer;    padding: 6px 15px 6px 0;    position: relative;    color: #000000;    margin: 0;    list-style: none;  min-height:35px;  font-size: 13px;    padding-left: 15px;    line-height: 22px;  text-decoration: underline;    display: list-item;    text-align: left;}#dyduPopup .dydu_suggest ul li:hover {    background-color: #fba595;  color:#333;}/*END DYDU POPUP*/.rg-top-left {    cursor: nw-resize;    left: 0;    margin-left: -14px;    margin-top: -14px;    top: 0;}#dydu-history .dydu-dialog-date {    color: #333;    font: 11px sans-serif;    text-align: center;  font-family:Oxygen-Bold;}/*#dydu-history .dydu-dialog-date .dydu-dialog-date-label {    background:url("#baseUrl#files/ico-time-small.png") no-repeat 5px #fff;    display: inline-block;    padding: 0 5px 0 18px;}*//*#dydu-history .dydu-dialog-date-line {    border-top: 1px solid #ccc;    margin: -6px 5% 0;    padding-top: 6px;}*/#dydu-self-video-chat-container {    position: absolute;    height: 50px;    width: 50px;    right: 20px;    bottom: 20px;    border: solid 1px #fff;}.dydu-video-chat-container {    position: absolute;    bottom: 33%;    width: 100%;    top: 60px;}#dydu-operator-video-chat-container {    position: absolute;    height: 100%;    width: 100%;}div.withVideo #dydu-history {    position: absolute;    top:67%;    width: 100%;    height: calc(33% - 40px);}div.withVideo #dydu-history .container-notifies {    top: 0px;}div.dydu-video-chat-close {    position: absolute;    left: 0px;    right: 0px;    bottom: 0px;    height: 20px;    width: 100%;    color: white;    text-align: center;    background-color: rgba(0,0,0,0.6);    z-index: 1;    line-height: 17px;    cursor: pointer;}div.dydu-video-chat-close span {    background:url("#baseUrl#files/buttons-white.png") no-repeat -3px -327px;    padding-left: 16px;    text-transform: uppercase;    font-weight: bold;    font-size: 0.675em;}@media screen and (max-width: 767px) {  #dydu-popin {        height: 100%;        right: 0 !important;      bottom:2px !important;        width: 100%;    }    html, html * {        -webkit-text-size-adjust: 100%!important;    }    #dydu-confirm-dialog {        bottom: 0;        left: 0;        right: 0;        top: 0;    }    header#dydu-header-msgbox {        border-radius: 0;    }    #dydu-msgbox-content {        border: medium none;        padding: 0;    }    #dydu-survey {        box-shadow: none;        font-family: Oxygen-Regular,Arial,sans-serif;        font-size: 14px;        margin: auto;        max-height:auto;        position: static;        width: auto;    }    #dydu-survey {        display: none;    }    #dydu-teaser a.dydu-link-teaser {        display: none; /*affichage mini*/  }    #dydu-teaser .dydu-chatbox {        width: 63px;/*affichage mini*//*background-color: transparent;*/      border-radius: 50%;/*affichage mini & rond*/            /*border-radius: 0px;//affichage large*/      /*bottom: 0px;//affichage large*/      /*right: 0px;//affichage large*/      /*width: 100%;//affichage large*/    }    #dydu-teaser .dydu-chatbox, #dydu-teaser > div {      border-radius: 50%; /*affichage mini & rond*/      /*width: 100%;//affichage large*/  }    #dydu-teaser {  /*width: 100%;/affichage large*/      border-radius: 50%;      /*bottom: 0px;/affichage large*/      /*right: 0px;/affichage large*/  }}@media screen and (min-width: 300px) and (max-width: 460px) {   #dydu-popin {        height: 100%;        right: 0 !important;      bottom:2px !important;        width: 100%;    }    #dydu-history {        height: calc(100% - 130px);        max-height: calc(100% - 130px);        width: 100%;      padding:0;    }    .mobile-panel #dydu-history {        max-height: 45%;        display: inline-block;        height: calc(49% - 55px);        max-height: calc(49% - 55px);    }    #dydu-lateral-panel {        display: inline-block;        height: 100% !important;        z-index:11;        right: 0;        overflow: hidden;        width: 100% !important;    }    #dydu-aside-content {        max-height: calc(100% - 30px);        overflow: auto;    }    .dydu-external-satisfied {        background: transparent;        border: none;        padding: 0;        position: static;        width: auto;    }    .dydu-sastified.dydu-external-satisfied.dydu-step2, .dydu-sastified.dydu-external-satisfied.dydu-step3 {        width: auto;    }    #dydu-aside-content.scroll-wrapper {        max-height: calc(100% - 30px);        overflow-y: auto;        width: 100%;        -webkit-overflow-scrolling: touch;    }}@media screen and (min-width: 461px) and (max-width: 800px) {    #dydu-popin {        height: 100%;        right: 0 !important;      bottom:2px !important;        width: 100%;    }    #dydu-history {        height: calc(100% - 130px);        max-height: 55%;        max-height: calc(100% - 130px);      padding:0;    }    .mobile-panel #dydu-history {        display: inline-block;        width: 49%;    }    #dydu-lateral-panel {        display: inline-block;        height: 100% !important;        z-index:11;        right: 0;        overflow: hidden;        width: 100% !important;    }    #dydu-aside-content {        max-height: calc(100% - 30px);        overflow: auto;    }    .dydu-external-satisfied {        background: transparent;        border: none;        padding: 0;        position: static;        width: auto;    }    .dydu-sastified.dydu-external-satisfied.dydu-step2, .dydu-sastified.dydu-external-satisfied.dydu-step3 {        width: auto;    }      #dydu-history .dydu-operator-textfield {      max-width:inherit;    }    #dydu-aside-content.scroll-wrapper {        max-height: calc(100% - 30px);        overflow-y: auto;        width: 100%;        -webkit-overflow-scrolling: touch;    }}/* Boîte de dialogue (base) : dydu-popin-ie7.css */#IE7 header#dydu-header-popin, #lateral-panel header {    padding: 0;}#IE7 #dydu-alert {    top: 50%;    left: 50%;}#IE7 .dydu-title {    padding: 10px 0 0 10px;}#IE7 .dydu-second-title {    padding-left: 10px;}#IE7 .ng-hide {    display: none !important;}.selectCalendar{  padding:3px;border-radius:10px;  outline:none;border: 2px solid #AF2B11;  cursor:pointer;width:100%;  font-family:monospace;  font-size:inherit;}.day.selectable.selected {color: #FFF;background: #AF2B11;}.day {color:#ccc;background:#eee;border:1px solid #eee;padding:0.6em;font-size:1em; text-align:center;vertical-align: middle;}.selectable{cursor:pointer;color:#000;border:1px solid #AF2B11;background-color:white;}.day.selectable:hover{color:#FFF;background:#AF2B11;}.th{color:#AF2B11;font-size:1.5em;text-align:center;vertical-align: middle;}.th.move {cursor:pointer;font-weight:bold;font-size:1.5em;}.divCalendar, .divCalendarParent{border:2px solid #AF2B11;border-radius:8px;width: 100%;background: #eee;}.divCalendarParent{border:none;}.tabCalendar{width:100%;border-collapse: initial; border-spacing: 2px;height: 240px;}';
    var baseUrl = dyduUtils.getJsBaseUrl();
    css = css.replace(/#baseUrl#/g, baseUrl);

    function replaceInCss(name) {
        var replacement = 'undefined';
        if (typeof(configurations[name]) !== 'undefined' && configurations[name] !== null) {
            replacement = configurations[name];
        }
        css = css.replace(new RegExp('#' + name + '#', 'g'), replacement);
    }

    replaceInCss("buttonSpriteFile");
    replaceInCss("avatarFile");
    replaceInCss("livechatAvatarFile");
    replaceInCss("backgroundFile");
    replaceInCss("mainColor");
    replaceInCss("secondaryColor");
    replaceInCss("buttonColor");
    replaceInCss("textColor");

    var head = document.head || document.getElementsByTagName('head')[0];
    var style = document.createElement('style');

    style.type = 'text/css';
    // Must insert tag before setting the css, or it will crash on IE < 8 if @font-face is used.
    head.appendChild(style);

    if (style.styleSheet) {
        style.styleSheet.cssText = css;
    } else {
        style.appendChild(document.createTextNode(css));
    }
})();

angular.module("generalModule")
    .run(function ($templateCache) {
            $templateCache.put('SuggestionPopin.html', '<div id="dyduPopup" ng-controller="suggestionPopinController" >    <div class="dydu_suggest" ng-if="suggestions.length>0" ng-controller="keySelectionController" ng-init="init(suggestions,selectSuggestion,clickSuggestion,true)">        <ul>            <li ng-repeat="suggestion in suggestions" ng-click="clickSuggestion(suggestion)" ng-class="{selected:isSelected(suggestion)}">{{suggestion}}</li>        </ul>    </div></div>');
            $templateCache.put('Gdpr.html', '<div ng-if="!gdprService.value" class="gdpr-disclaimer">    <div ng-bind-html="resources.get(\'gdpr.disclaimer.body.authenticated\')"></div>    <div class="gdpr-buttons">        <button ng-bind-html="resources.get(\'gdpr.disclaimer.accept\')"                ng-click="gdprService.accept()">        </button>    </div></div>');
            $templateCache.put('Chatbox.html', '<!--[if lte IE 7]><div id="IE7"><![endif]--><div ng-controller="chatboxController">    <div ng-if="loadChatbox" ng-class="{withVideo: isVideochat()}">        <div ng-include="\'Teaser.html\'" ng-if="loadTeaser"></div>        <div ng-if="loadSidebar">            <div ng-hide="showPopin || showTeaser">                <div id="dydu-external-panel" ng-style="sidebarContainerStyle" ng-show="showSidebar" ng-include="\'Sidebar.html\'"></div>            </div>        </div>        <div ng-include="\'DialogHistory.html\'" ng-if="loadDialog"></div>        <div ng-include="\'Cobrowsing.html\'"></div>        <div ng-include="\'ConfirmBox.html\'"></div>        <div ng-include="\'CallBackButton.html\'"></div>    </div></div><!--[if lte IE 7]></div><![endif]-->');
            $templateCache.put('DialogHistory.html', '<div ng-controller="dialogController">    <div id="dydu-popin" ng-show="showPopin" ng-class="{\'mobile-panel\':showSidebar, \'waiting-queue\':showWaitingQueue, \'live-chat\':isLiveChatMode()}">        <div id="dydu-chatbox">            <header id="dydu-header-popin">                <div class="dydu-avatar-header"  ng-style="getProfilePictureStyle()"></div> <!-- ng-if="!showTopKnowledgeHeader" -->                <div class=\'dydu-title-container\'>                    <div class="dydu-title" ng-bind-html="getPopinTitle()"></div>                    <div ng-bind-html="getSecondTitle()"  class="dydu-second-title"></div> <!-- ng-show="!showTopKnowledgeHeader" -->                </div>              <!--                <div class=\'dydu-top-knowledge-title-container\' ng-show="showTopKnowledgeHeader">                    <div ng-bind-html="getSecondTitle()" class="dydu-second-title"></div>                </div>-->              <section class="dydu-option">                  <!--<div ng-if="showMoveButton" class="dydu-dragNdrop" ng-mousedrag="onDragPopin($event)"></div>-->                  <div ng-if="showPrintButton()" class="dydu-print" ng-click="printDialog()"></div>                  <div ng-if="showSendByMailButton()" class="dydu-mail" ng-click="showMailForm()"></div>                  <div ng-if="showMinimizeButton" class="dydu-lower" ng-click="hidePopin()"></div>                  <!--<div ng-if="showLivechatEndButton()" class="dydu-livechat-end" ng-click="livechatend()"></div>-->                  <div ng-if="showCloseButton()" class="dydu-close" ng-click="closePopin()"></div>            </section>            </header>            <div ng-if="gdprService.configurations.gdprEnabled" ng-include="\'Gdpr.html\'" ng-controller="gdprController"></div>            <div ng-include="\'Videochat.html\'"></div>            <section id="dydu-history" ng-hide="gdprService.configurations.gdprEnabled && !gdprService.value" in-view-container>                <article class="container-notifies">                    <p ng-show="showNotification" ng-bind-html="notification" class="notify"></p>                </article>                <article ng-show="showWaitingQueue" class="content-waiting-queue">                    <div class="dydu-textfield">                        <p ng-if="isAnyOperatorAvailable" ng-bind-html="resources.get(\'chatbox.queue.intro\')"></p>                        <p ng-if="!isAnyOperatorAvailable" ng-bind-html="resources.get(\'chatbox.queue.no.operator.available.anymore\')"></p>                        <p ng-show="queuePosition">                            <strong ng-bind-html="resources.get(\'chatbox.queue.position\')"></strong><strong>: </strong>{{queuePosition}}                        </p>                        <p ng-show="queueTime"><strong ng-bind-html="resources.get(\'chatbox.queue.wait\')"></strong>                            <span ng-bind-html="resources.get(\'chatbox.queue.estimation\')"></span>{{queueTime}}</p>                    </div>                    <div class="dydu-textfield">                        <div ng-click="livechatleavequeue()" ng-bind-html="resources.get(\'chatbox.queue.leavequeue\')"></div>                    </div>                </article>                              <article ng-repeat="dialog in dialogs" ng-class="{\'dydu-current-dialog\': $last}">                                      <div ng-if="$last" ng-include="\'TopKnowledgeList.html\'"></div>                  <article class="dydu-dialog-date">                        <div class="dydu-dialog-date-label" ng-bind-html="getDialogDate(dialog)"></div>                    </article>                    <article class="dydu-textfield dydu-operator-textfield dydu-welcome-sentence" ng-show="!hideWelcomeSentence()">                        <div class="dydu-min-avatar"></div>                        <div class="dydu-operator-text">                            <span class="dydu-operator-name" ng-bind-html="resources.get(\'chatbox.interaction.bot.label\')"></span>                            <span ng-bind-html="resources.get(\'chatbox.interaction.bot.welcomesentence\')"></span>                        </div>                    </article>                    <div ng-repeat="interaction in dialog.interactions">                        <article class="dydu-textfield" style="display: block"                                ng-class="{\'dydu-operator-textfield\': interaction.type === \'response\', \'dydu-survey\': interaction.type === \'survey\',                                \'dydu-rackbotchoice\': interaction.type === \'rackbotchoice\', \'dydu-user-textfield\':interaction.type === \'request\',                                \'dydu-hidden-survey\': isDisabledSurvey(interaction),                        \'dydu-interaction\':$last,                        \'dydu-hidden-interaction\': mustHideInteraction(interaction)}">                            <div ng-class="{\'dydu-min-avatar\': interaction.type === \'response\', \'dydu-operator\': interaction.operatorName !== undefined,                        \'dydu-user-ico\': interaction.type === \'request\'}" ng-style="getProfilePictureStyle(interaction)"></div>                            <div ng-if="interaction.type === \'response\' || interaction.type === \'request\'" class="dydu-operator-text">                                <span ng-hide="mustHideFromLabel(interaction)" class="dydu-operator-name" ng-bind-html="interaction.from"></span>                                <span ng-if="interaction.type === \'response\'" in-view="checkInView($inview, $index)" ng-bind-html="trustAsHtml(interaction)"></span>                                <span ng-if="interaction.type === \'request\'" in-view="checkInView($inview, $index)" ng-bind="interaction.text"></span>                                <div class="dydu-show-sidebar-container" ng-show="mustShowDisplaySidebarButton(interaction)" ng-click="openSidebar(interaction)">                                  <span ng-bind="interaction.sideBarTitle" class="dydu-show-sidebar"></span>                                </div>                            </div>                            <div ng-if="interaction.type === \'template\'" class="dydu-operator-text">                                <span ng-hide="mustHideFromLabel(interaction)" class="dydu-operator-name" ng-bind-html="interaction.from"></span>                                <span in-view="checkInView($inview, $index)" ng-include="interaction.templateFile"></span>                            </div>                            <div ng-if="interaction.type === \'rackbotchoice\'" class="dydu-operator-text" ng-include="\'RackBotChoice.html\'"></div>                            <div ng-if="$last && $parent.$last" ng-include="\'StepActionButtons.html\'"></div>                            <div ng-if="insertSurvey(interaction)" ng-include="\'Survey.html\'"></div>                        </article>                        <article class="dydu-textfield dydu-operator-textfield" ng-if="$last && mustAskFeedback(interaction) && !feedbackSent">                            <div ng-include="\'FeedBack.html\'"></div>                        </article>                    </div>                </article>                              <div ng-if="isSideBarSurveyActive()" class="dydu-survey" ng-include="\'Survey.html\'"></div>                <article class="dydu-textfield dydu-operator-textfield" ng-show="askMail">                    <div class="dydu-min-avatar" ng-style="getProfilePictureStyle(interaction)"></div>                    <div class="dydu-operator-text">                        <span class="dydu-operator-name" ng-bind-html="resources.get(\'chatbox.interaction.bot.label\')"></span>                        <span> saisissez votre adresse e-mail</span>                        <form class="dydu-mail-form" ng-submit="sendByMail()">                           <input type="email" ng-model="mailAddress" placeholder="{{renderHtml(resources.get(\'chatbox.dialog.your.mail.address\'))}}" required/>                            <input type="submit" value="ok">                        </form>                    </div>                </article>            </section>            <div id="dydu-lateral-panel" ng-show="showSidebar" ng-style="sidebarContainerStyle" ng-include="\'Sidebar.html\'" resizable r-directions="[\'top\', \'left\', \'top-left\']"></div>            <footer id="dydu-textbox" ng-hide="gdprService.configurations.gdprEnabled && !gdprService.value">                <div class="dydu-new-message" ng-click="scrollToBottom()" ng-show="hasNewMessages()">                    <p ng-bind-html="getNewMessagesLabel()"></p>                </div>                <div class="container-notifies">                    <p ng-show="warnLength" class="notify warn">{{renderHtml(resources.get(\'chatbox.limit.length.almost.reached\'))}} ({{messageLength}})</p>                    <p ng-show="errorLength" class="notify error">{{renderHtml(resources.get(\'chatbox.limit.length.reached\'))}} ({{messageLength}})</p>                    <p ng-show="operatorWriting" class="notify operator-writing">{{renderHtml(resources.get(\'chatbox.operator.is.writing\'))}}</p>                </div>                <div ng-include="\'SuggestionPopin.html\'"></div>                <form ng-submit="ask($event)"                        ng-hide="lockTextfield || showWaitingQueue">                    <textarea id="dydu-textarea" ng-keyup="keyup($event)" ng-keypress="keypress($event)" ng-focus="onFocus();" class="dydu-textarea" ng-model="question" autofocus                            placeholder="{{renderHtml(resources.get(\'chatbox.dialog.enter.your.question\'))}}" msd-elastic                            ng-disabled="lockTextfield || showWaitingQueue" autofocus>                    </textarea>                  <input type="number" id="dydu-inputNumber" ng-keyup="keyup($event)" ng-keypress="keypress($event)" class="dydu-textarea" ng-model="question" autofocus                            placeholder="{{renderHtml(resources.get(\'chatbox.dialog.enter.your.question\'))}}" msd-elastic                            ng-disabled="lockTextfield || showWaitingQueue" style="display: none;">                    <div class="dydu-submit">                        <input type="submit" value="Ok">                    </div>                </form>              <div id="calendarParent" class="divCalendarParent"></div>            </footer>        </div>    </div></div>');
            $templateCache.put('Sidebar.html', '<div ng-controller="sidebarController" class="dydu-lateral-panel">    <aside class="dydu-lateral-panel" ng-show="sidebar.show" style="height:100%">        <div style="height:100%">            <header>                <div class=\'dydu-title-container\'>                    <div class="dydu-title"><span ng-bind-html="sidebar.title"></span></div>                </div>              <section class="dydu-option inside">                <div class="dydu-close" ng-click="close()"></div>            </section>            </header>            <section id="dydu-aside-upload" ng-include="\'UploadFile.html\'" ng-if="sidebar.showUpload">            </section>            <section id="dydu-aside-content" ng-style="sidebar.contentStyle" class="scroll-wrapper" ng-if="hasContent()">                <span ng-bind-html="trustAsHtml(sidebar.content)"></span>            </section>            <section id="dydu-aside-frame" ng-style="sidebar.frameStyle" style="width:100%; height:100%;" class="scroll-wrapper" ng-if="sidebar.show && hasFrame()">                <iframe style="height:100%;" ng-src="{{trustAsResourceUrl(sidebar.url)}}"></iframe>            </section>        </div>    </aside></div>');
            $templateCache.put('Survey.html', '<article ng-controller="surveyController" class="dydu-survey" ng-show="showSurvey" ng-class="{\'dydu-external\':!useInternalSurvey, \'dydu-internal\': useInternalSurvey}">    <div id="dydu-survey" class=\'dydu-main-container\'>        <aside id="dydu-msgbox">            <header id="dydu-header-msgbox">                <div class=\'dydu-title-container\'>                    <div class="dydu-second-title" ng-bind-html="getTitle()"></div>                </div>            </header>            <section id="dydu-msgbox-content">                <span ng-bind-html="getText()"></span>                <span ng-show="showRequiredMsg" ng-bind-html="getRequiredMessage()"></span>                <form ng-submit="submit()">                    <article ng-repeat="field in fields" ng-class="[{required:field.classRequired}, field.masterClasses]">                        <div ng-switch on="field.type">                            <div class="answer textfield {{field.name}}" ng-switch-when="TEXT">                                <div>                                    <label>{{field.label}}</label>                                    <input dydu-id="field.name" type="text" ng-model="field.value">                                </div>                                <div class="nofloat"></div>                            </div>                            <div class="answer textarea {{field.name}}" ng-switch-when="LONG_TEXT">                                <textarea dydu-id="field.name" ng-model="field.value" placeholder="{{field.label}}"></textarea>                                <div class="nofloat"></div>                            </div>                            <div ng-switch-when="MULTIPLE_CHOICE">                                <p class="question">{{field.label}}</p>                                <div class="answer-container">                                    <div class="answer" ng-repeat="choice in field.children" ng-switch on="choice.type">                                        <div class="{{choice.parentName}}_{{$index}}" ng-switch-when="CHECKBOX">                                            <input dydu-id="choice.name" type="checkbox" ng-model="choice.value" value="{{choice.id}}" name="child_{{choice.parentName}}" ng-change="refreshSlaveFields(choice.name)">                                            <label for="{{choice.name}}">{{choice.label}}</label>                                        </div>                                        <div class="{{choice.parentName}}_{{$index}}" ng-switch-when="RADIO">                                            <input dydu-id="choice.name" type="radio" ng-model="field.value" ng-value="choice.childValue" name="child_{{choice.parentName}}" ng-change="refreshSlaveFields(choice.name)">                                            <label for="{{choice.name}}">{{choice.label}}</label>                                        </div>                                    </div>                                </div>                                <div class="nofloat"></div>                            </div>                            <div class="answer select  {{field.name}}" ng-switch-when="SELECT">                                <label>{{field.label}}</label>                                <select dydu-id="field.name" ng-model="field.value" ng-options="option.label for option in field.children" ng-change="refreshSlaveFields(field.name)">                                </select>                                <div class="nofloat"></div>                            </div>                        </div>                    </article>                    <input type="submit" value="ok">                    <div class="nofloat"></div>                </form>            </section>            <section class="dydu-option">                <div class="dydu-close" ng-hide="hasAnyRequiredField()" ng-click="close()"></div>            </section>        </aside>    </div></article>');
            $templateCache.put('Teaser.html', '<section id="dydu-teaser" ng-controller="teaserController">    <div class="dydu-chatbox" ng-show="showClassicTeaser()" ng-click="onClick()">        <div class="dydu-avatar-header" ng-style="getProfilePictureStyle()"></div>        <a class="dydu-link-teaser" ng-bind-html="resources.get(\'chatbox.teaser.need.help\')"></a>    </div>    <aside class=\'action-container\' ng-show="showOptionTeaser()" >        <div class=\'action-content\'>            <p ng-bind-html="resources.get(\'chatbox.teaser.need.help\')"></p>            <div class=\'pointer\'></div>        </div>        <nav class=\'nav-container\'>            <ul>                <li class=\'online\'><a href="#">option01</a></li>                <li class=\'recall\'><a href="#">option02</a></li>                <li class=\'email\'><a href="#">option03</a></li>                <li class=\'faq\'><a href="#">option04</a></li>            </ul>        </nav>    </aside></section>');
            $templateCache.put('Videochat.html', '<div ng-controller="videochatController" class="dydu-videochat">    <div class="dydu-video-chat-container" ng-show="isVideochatEnabled()">        <div id="dydu-operator-video-chat-container"></div>        <div id="dydu-self-video-chat-container"></div>        <div class="dydu-video-chat-close">            <span ng-bind-html="resources.get(\'chatbox.videochat.disconnection\')" ng-click="videochatEnd();"></span>        </div>    </div></div>');
            $templateCache.put('ConfirmBox.html', '<section id="dydu-confirm" ng-controller="confirmController">    <div id="dydu-confirm-dialog" class=\'dydu-main-container\' ng-class="message.clazz" ng-hide="hideDialog();">        <div>            <header id="dydu-confirm-dialog-header">                <div class=\'dydu-title-container\'>                    <div class="dydu-second-title" ng-bind-html="message.title"></div>                </div>              <section class="dydu-option inside">                <div class="dydu-close" ng-click="cancelDialog();"></div>            </section>            </header>            <section id="dydu-confirm-dialog-content">                <div class="dydu-avatar-header" ng-style="getProfilePictureStyle()"></div>                <p ng-bind-html="message.text"></p>                <div ng-show="showForm()" class="dydu-form-container">                    <form ng-submit="confirmDialog()">                        <article ng-repeat="param in message.formParams">                            <div ng-switch on="param.type">                                <div class="answer phone {{param.name}}" ng-switch-when="PHONE">                                    <div>                                        <label>{{renderHtml(param.label)}}</label>                                        <input dydu-id="{{param.name}}" type="tel" pattern="^(?:0|\\(?\\+33\\)?\\s?)[1-79](?:[\\.\\-\\s]?\\d\\d){4}$" ng-model="param.value">                                    </div>                                    <div class="nofloat"></div>                                </div>                            </div>                            <div ng-switch on="param.type">                                <div class="answer phone {{param.name}}" ng-switch-when="TEXT">                                    <div>                                        <label>{{renderHtml(param.label)}}</label>                                        <input dydu-id="{{param.name}}" type="text" ng-model="param.value">                                    </div>                                    <div class="nofloat"></div>                                </div>                            </div>                        </article>                        <input class="ask" type="submit" value="{{message.yes}}">                        <span class="decline" ng-click="cancelDialog();" ng-bind-html="message.no"></span>                        <div class="nofloat"></div>                    </form>                </div>                <div ng-show="showButtons()" class="dydu-question-container">                    <span class="ask" ng-click="confirmDialog();" ng-bind-html="message.yes"></span>                    <span class="decline" ng-click="cancelDialog();" ng-bind-html="message.no"></span>                </div>            </section>        </div>    </div></section>');
            $templateCache.put('UploadFile.html', '<div ng-controller="uploadFileController">    <iframe class="uploadFileFrame" ng-if="showFrame" ng-src="{{getIFrameSource()}}"></iframe>    <div class="uploadResult" ng-switch="uploadResult">        <div class="success" ng-switch-when="success" ng-bind-html="resources.get(\'chatbox.upload.success.message\')"></div>        <div class="success" ng-switch-when="failure" ng-bind-html="resources.get(\'chatbox.upload.failure.message\')"></div>        <div ng-switch-default></div>    </div></div>');
            $templateCache.put('Cobrowsing.html', '<section id="dydu-cobrowsing" ng-controller="cobrowsingController">    <div class="top-tools" ng-show="isCobrowsingEnabled()">        <div class="tools-title" ng-bind-html="resources.get(\'chatbox.cobrowsing.active.text\')"></div>        <div class="btn-outline"><div ng-click="endCobrowsingRequest()" ng-bind-html="resources.get(\'chatbox.cobrowsing.disconnection\')"></div></div>        <div class="nofloat"></div>    </div></section>');
            $templateCache.put('FeedBack.html', '<div ng-controller="feedbackController">    <div class="dydu-external-feedback" ng-show="isState(\'question\')">        <div class="dydu-sastified" ng-class="{\'dydu-external-satisfied\':!useInternalFeedback}">            <p ng-bind-html="resources.get(\'chatbox.feedback.question\')"></p>            <span ng-click="clickYes()" ng-bind-html="resources.get(\'chatbox.feedback.yes\')"></span>&nbsp;            <span ng-click="clickNo()" ng-bind-html="resources.get(\'chatbox.feedback.no\')"></span>        </div>    </div>    <div class="dydu-external-feedback" ng-show="isState(\'reason\')">        <div class="dydu-sastified dydu-step2" ng-class="{\'dydu-external-satisfied\':!useInternalFeedback}">            <p ng-bind-html="resources.get(\'chatbox.feedback.negative.reason\')"></p>            <ul>                <li ng-repeat="choice in choices">                    <span ng-click="setChoice(choice.discriminator);submitReason();" ng-bind-html="resources.get(choice.key)"></span>                </li>            </ul>        </div>    </div>    <div class="dydu-external-feedback" ng-show="isState(\'improve\')">        <div class="dydu-sastified dydu-step3" ng-class="{\'dydu-external-satisfied\':!useInternalFeedback}">            <form ng-submit="submitImprove()">                <label ng-bind-html="resources.get(\'chatbox.feedback.leave.comment\')"></label>                <textarea ng-model="improvement" placeholder="Votre commentaire..."></textarea>                <input type="submit" value="ENVOYER">                <div class="nofloat"></div>            </form>        </div>    </div>    <div class="dydu-external-feedback" ng-show="isState(\'endPositive\')">        <div class="dydu-sastified" ng-class="{\'dydu-external-satisfied\':!useInternalFeedback}" ng-bind-html="resources.get(\'chatbox.feedback.thank.positive\')">        </div>    </div>    <div class="dydu-external-feedback" ng-show="isState(\'endNegative\')">        <div class="dydu-sastified" ng-class="{\'dydu-external-satisfied\':!useInternalFeedback}" ng-bind-html="resources.get(\'chatbox.feedback.thank.negative\')">        </div>    </div></div>');
    })
    .config(function ($provide) {
        $provide.decorator('$templateCache', ['$delegate', function ($delegate) {
            var oldGetter = $delegate.get;
            $delegate.get = function (key) {
                var value = oldGetter(key) || '';
                return value;
            };
            return $delegate;
        }])
    });

angular.module("ivpusic.cookie",["ipCookie"]),angular.module("ipCookie",["ng"]).factory("ipCookie",["$document",function(e){"use strict";function i(e){try{return decodeURIComponent(e)}catch(i){}}return function(){function t(t,n,r){var o,s,p,u,a,c,d,x,f;r=r||{};var g=r.decode||i,l=r.encode||encodeURIComponent;if(void 0!==n)return n="object"==typeof n?JSON.stringify(n):n+"","number"==typeof r.expires&&(f=r.expires,r.expires=new Date,-1===f?r.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):void 0!==r.expirationUnit?"hours"===r.expirationUnit?r.expires.setHours(r.expires.getHours()+f):"minutes"===r.expirationUnit?r.expires.setMinutes(r.expires.getMinutes()+f):"seconds"===r.expirationUnit?r.expires.setSeconds(r.expires.getSeconds()+f):"milliseconds"===r.expirationUnit?r.expires.setMilliseconds(r.expires.getMilliseconds()+f):r.expires.setDate(r.expires.getDate()+f):r.expires.setDate(r.expires.getDate()+f)),e[0].cookie=[l(t),"=",l(n),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("");for(s=[],x=e[0].cookie,x&&(s=x.split("; ")),o={},d=!1,p=0;s.length>p;++p)if(s[p]){if(u=s[p],a=u.indexOf("="),c=u.substring(0,a),n=g(u.substring(a+1)),angular.isUndefined(n))continue;if(void 0===t||t===c){try{o[c]=JSON.parse(n)}catch(m){o[c]=n}if(t===c)return o[c];d=!0}}return d&&void 0===t?o:void 0}return t.remove=function(e,i){var n=void 0!==t(e);return n&&(i||(i={}),i.expires=-1,t(e,"",i)),n},t}()}]);

/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
 */
(function(q,g,r){'use strict';function F(a){var d=[];t(d,g.noop).chars(a);return d.join("")}function m(a){var d={};a=a.split(",");var c;for(c=0;c<a.length;c++)d[a[c]]=!0;return d}function G(a,d){function c(a,b,c,h){b=g.lowercase(b);if(u[b])for(;f.last()&&v[f.last()];)e("",f.last());w[b]&&f.last()==b&&e("",b);(h=x[b]||!!h)||f.push(b);var n={};c.replace(H,function(a,b,d,c,e){n[b]=s(d||c||e||"")});d.start&&d.start(b,n,h)}function e(a,b){var c=0,e;if(b=g.lowercase(b))for(c=f.length-1;0<=c&&f[c]!=b;c--);
    if(0<=c){for(e=f.length-1;e>=c;e--)d.end&&d.end(f[e]);f.length=c}}"string"!==typeof a&&(a=null===a||"undefined"===typeof a?"":""+a);var b,l,f=[],n=a,h;for(f.last=function(){return f[f.length-1]};a;){h="";l=!0;if(f.last()&&y[f.last()])a=a.replace(RegExp("(.*)<\\s*\\/\\s*"+f.last()+"[^>]*>","i"),function(a,b){b=b.replace(I,"$1").replace(J,"$1");d.chars&&d.chars(s(b));return""}),e("",f.last());else{if(0===a.indexOf("\x3c!--"))b=a.indexOf("--",4),0<=b&&a.lastIndexOf("--\x3e",b)===b&&(d.comment&&d.comment(a.substring(4,
    b)),a=a.substring(b+3),l=!1);else if(z.test(a)){if(b=a.match(z))a=a.replace(b[0],""),l=!1}else if(K.test(a)){if(b=a.match(A))a=a.substring(b[0].length),b[0].replace(A,e),l=!1}else L.test(a)&&((b=a.match(B))?(b[4]&&(a=a.substring(b[0].length),b[0].replace(B,c)),l=!1):(h+="<",a=a.substring(1)));l&&(b=a.indexOf("<"),h+=0>b?a:a.substring(0,b),a=0>b?"":a.substring(b),d.chars&&d.chars(s(h)))}if(a==n)throw M("badparse",a);n=a}e()}function s(a){if(!a)return"";var d=N.exec(a);a=d[1];var c=d[3];if(d=d[2])p.innerHTML=
    d.replace(/</g,"&lt;"),d="textContent"in p?p.textContent:p.innerText;return a+d+c}function C(a){return a.replace(/&/g,"&amp;").replace(O,function(a){var c=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(c-55296)+(a-56320)+65536)+";"}).replace(P,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function t(a,d){var c=!1,e=g.bind(a,a.push);return{start:function(a,l,f){a=g.lowercase(a);!c&&y[a]&&(c=a);c||!0!==D[a]||(e("<"),e(a),g.forEach(l,function(c,f){var k=
    g.lowercase(f),l="img"===a&&"src"===k||"background"===k;!0!==Q[k]||!0===E[k]&&!d(c,l)||(e(" "),e(f),e('="'),e(C(c)),e('"'))}),e(f?"/>":">"))},end:function(a){a=g.lowercase(a);c||!0!==D[a]||(e("</"),e(a),e(">"));a==c&&(c=!1)},chars:function(a){c||e(C(a))}}}var M=g.$$minErr("$sanitize"),B=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,A=/^<\/\s*([\w:-]+)[^>]*>/,H=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,L=/^</,
    K=/^<\//,I=/\x3c!--(.*?)--\x3e/g,z=/<!DOCTYPE([^>]*?)>/i,J=/<!\[CDATA\[(.*?)]]\x3e/g,O=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P=/([^\#-~| |!])/g,x=m("area,br,col,hr,img,wbr");q=m("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");r=m("rp,rt");var w=g.extend({},r,q),u=g.extend({},q,m("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),v=g.extend({},r,m("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
    y=m("script,style"),D=g.extend({},x,u,v,w),E=m("background,cite,href,longdesc,src,usemap"),Q=g.extend({},E,m("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),p=document.createElement("pre"),N=/^(\s*)([\s\S]*?)(\s*)$/;g.module("ngSanitize",[]).provider("$sanitize",
    function(){this.$get=["$$sanitizeUri",function(a){return function(d){var c=[];G(d,t(c,function(c,b){return!/^unsafe/.test(a(c,b))}));return c.join("")}}]});g.module("ngSanitize").filter("linky",["$sanitize",function(a){var d=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,c=/^mailto:/;return function(e,b){function l(a){a&&k.push(F(a))}function f(a,c){k.push("<a ");g.isDefined(b)&&(k.push('target="'),k.push(b),k.push('" '));k.push('href="');k.push(a);k.push('">');l(c);k.push("</a>")}
    if(!e)return e;for(var n,h=e,k=[],m,p;n=h.match(d);)m=n[0],n[2]==n[3]&&(m="mailto:"+m),p=n.index,l(h.substr(0,p)),f(m,n[0].replace(c,"")),h=h.substring(p+n[0].length);l(h);return a(k.join(""))}}])})(window,window.angular);
//# sourceMappingURL=angular-sanitize.min.js.map


"use strict";angular.module("ab-base64",[]).constant("base64",function(){var e={encode:function(e){return btoa(unescape(encodeURIComponent(e)))},decode:function(e){return decodeURIComponent(escape(atob(e)))}};return{decode:e.decode,encode:e.encode}}());

(function(){var support="placeholder"in document.createElement("input");var app=angular.module("html5.placeholder",[]);var attrByElem=function(elem,name){var attr=elem.getAttributeNode(name);return attr?attr.nodeValue:attr};app.factory("placeholder",function(){var ensure;if(!support){var tmpName="placeholderTmp"+ +new Date;var jqliteMerge=function(target,elems){angular.forEach(elems,function(elem){target.push(elem)});return target};var record={commit:function(elems){angular.forEach(elems,function(input){var $input=
angular.element(input),placeholder;placeholder=attrByElem(input,"placeholder");if($input.val()==placeholder){$input.data(tmpName,$input.val());$input.val("")}})},doRollback:function(elems){angular.forEach(elems,function(input){var $input=angular.element(input),placeholder;placeholder=$input.data(tmpName);if(placeholder){$input.val(placeholder);$input.data(tmpName,null)}})}};ensure=function(form,callback){var elems;if(form.length&&form[0].tagName.toLowerCase()=="form"){elems=form.find("input");elems=
jqliteMerge(form.find("textarea"),elems)}else elems=form;record.commit(elems);callback&&callback({back:function(){record.doRollback(elems)}})}}else ensure=function(form,callback){callback&&callback({back:function(){}})};return{ensure:ensure}});if(support)return;app.directive("placeholder",[function(){var time=+new Date,FOCUS_EVENT="focus",BLUR_EVENT="blur",focus,blur;focus=function(){var $this=angular.element(this);if($this.val()==attrByElem(this,"placeholder"))$this.val("")};blur=function(){var $this=
angular.element(this);if($this.val()=="")$this.val(attrByElem(this,"placeholder"))};return{link:function(scope,elem,attrs){scope.$watch("ready",function(){if(elem.attr("type")=="password")return{};elem.val(attrs.placeholder).bind(FOCUS_EVENT,focus).bind(BLUR_EVENT,blur);scope.$on("$destroy",function(){elem.unbind(FOCUS_EVENT,focus).unbind(BLUR_EVENT,blur)})})}}}])})();
/*! ngstorage 0.3.10 | Copyright (c) 2016 Gias Kay Lee | MIT License */!function(a,b){"use strict";"object"===typeof exports?(b(require("angular")),module.exports="ngStorage"):b(a.angular)}(this,function(a){"use strict";function b(a,b){var c;try{c=a[b]}catch(d){c=!1}if(c){var e="__"+Math.round(1e7*Math.random());try{a[b].setItem(e,e),a[b].removeItem(e,e)}catch(d){c=!1}}return c}function c(c){var d=b(window,c);return function(){var e="ngStorage-";this.setKeyPrefix=function(a){if("string"!==typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setKeyPrefix() expects a String.");e=a};var f=a.toJson,g=a.fromJson;this.setSerializer=function(a){if("function"!==typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setSerializer expects a function.");f=a},this.setDeserializer=function(a){if("function"!==typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setDeserializer expects a function.");g=a},this.supported=function(){return!!d},this.get=function(a){return d&&g(d.getItem(e+a))},this.set=function(a,b){return d&&d.setItem(e+a,f(b))},this.remove=function(a){d&&d.removeItem(e+a)},this.$get=["$rootScope","$window","$log","$timeout","$document",function(d,h,i,j,k){var p,q,l=e.length,m=b(h,c),n=m||(i.warn("This browser does not support Web Storage!"),{setItem:a.noop,getItem:a.noop,removeItem:a.noop}),o={$default:function(b){for(var c in b)a.isDefined(o[c])||(o[c]=a.copy(b[c]));return o.$sync(),o},$reset:function(a){for(var b in o)"$"===b[0]||delete o[b]&&n.removeItem(e+b);return o.$default(a)},$sync:function(){for(var c,a=0,b=n.length;a<b;a++)(c=n.key(a))&&e===c.slice(0,l)&&(o[c.slice(l)]=g(n.getItem(c)))},$apply:function(){var b;if(q=null,!a.equals(o,p)){b=a.copy(p),a.forEach(o,function(c,d){a.isDefined(c)&&"$"!==d[0]&&(n.setItem(e+d,f(c)),delete b[d])});for(var c in b)n.removeItem(e+c);p=a.copy(o)}},$supported:function(){return!!m}};return o.$sync(),p=a.copy(o),d.$watch(function(){q||(q=j(o.$apply,100,!1))}),h.addEventListener&&h.addEventListener("storage",function(b){if(b.key){var c=k[0];c.hasFocus&&c.hasFocus()||e!==b.key.slice(0,l)||(b.newValue?o[b.key.slice(l)]=g(b.newValue):delete o[b.key.slice(l)],p=a.copy(o),d.$apply())}}),h.addEventListener&&h.addEventListener("beforeunload",function(){o.$apply()}),o}]}}return a=a&&a.module?a:window.angular,a.module("ngStorage",[]).provider("$localStorage",c("localStorage")).provider("$sessionStorage",c("sessionStorage"))});


angular.module("logModule").run(function($log,$rootScope){var originalError=$log.error;function error(messageInput){originalError(messageInput);var message=messageInput;if(typeof messageInput==="string")message={message:messageInput,stack:(new Error).stack};$rootScope.$publish(globalMediatorChannels.LOG_ERROR,message)}error.logs=[];$log.error=error}).run(function($rootScope,$context,$messageFactory){var INIT_TIME=(new Date).getTime();function logError(evt,message){var stack=message.stack;var error=
message.message;var errorParams=null;try{if(stack)debug("DYDU Error : "+error+" "+stack);else debug("DYDU Error : "+error);errorParams={error:error,message:"Bot\x3d"+$context.getBotId()+" Context\x3d"+$context.getContextId(),stackTrace:stack}}catch(ee){debug(ee)}$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createErrorMessage(errorParams))}function debug(message){try{if(dyduUtils.isDefined(console))console.log((new Date).getTime()-INIT_TIME+" "+message)}catch(e){return}}
$rootScope.$subscribe(globalMediatorChannels.LOG_ERROR,logError)});
var interApp=function(){return{scopes:[],addAppRootScope:function(scope){this.scopes.push(scope)},$emitFromRoot:function(fromScope,args){for(var i=0;i<this.scopes.length;i++){var currentScope=this.scopes[i];this.emitOnScope(currentScope,args)}},emitOnScope:function(currentScope,args){var emitFunc=function(scope,tmpArgs){return function(){scope.$emit.apply(scope,[ALL_EVENTS,["",tmpArgs[0],!dyduUtils.isDefined(tmpArgs[1])?undefined:dyduUtils.clone(tmpArgs[1])]]);return scope.$emit.apply(scope,tmpArgs)}}(currentScope,
args);if(currentScope.$$phase==null)currentScope.$apply(emitFunc);else return emitFunc()}}}();
angular.module("mediatorModule").config(function($provide){$provide.decorator("$rootScope",["$delegate",function($delegate){interApp.addAppRootScope($delegate);if(dyduUtils.isNotDefined($delegate.$publish)){$delegate.$publish=function(name,args){var currentScope=this;interApp.$emitFromRoot(currentScope,arguments)};$delegate.$subscribe=function(name,callback){var currentScope=this;return $delegate.$on(name,function(){callback.apply(currentScope,[arguments[0],!dyduUtils.isDefined(arguments[1])?undefined:
dyduUtils.clone(arguments[1])])})}}return $delegate}])});
angular.module("utilsModule").controller("keySelectionController",["$scope","$window",function($scope,$window){$scope.currentElement=undefined;$scope.elements=[];$scope.moveUp=up;$scope.moveDown=down;$scope.$on(globalMediatorChannels.SELECTION_ELEMENT_UPDATE,function(evt,newElements){$scope.currentElement=undefined;$scope.elements=newElements});function up(selectionCallBack){$scope.currentElement=dyduUtils.isDefined($scope.currentElement)?$scope.currentElement-1<0?$scope.elements.length-1:$scope.currentElement-
1:$scope.elements.length-1;selectionCallBack($scope.elements[$scope.currentElement])}function down(selectionCallBack){$scope.currentElement=dyduUtils.isDefined($scope.currentElement)?($scope.currentElement+1)%$scope.elements.length:0;selectionCallBack($scope.elements[$scope.currentElement])}$scope.init=function(elements,selectionCallBack,useSuggestionCallBack,isDescendant){$scope.currentElement=undefined;$scope.elements=elements;if(!isDescendant){$scope.moveUp=down;$scope.moveDown=up}function keyUpHandler(evt){if(evt.keyCode===
13&&dyduUtils.isDefined($scope.currentElement))useSuggestionCallBack($scope.elements[$scope.currentElement]);else if(evt.keyCode===38)$scope.moveUp(selectionCallBack);else if(evt.keyCode===40)$scope.moveDown(selectionCallBack);if(dyduUtils.isDefined(evt.target)&&evt.target.tagName!=="INPUT"&&evt.target.tagName!=="TEXTAREA"){evt.stopPropagation();evt.preventDefault();return false}}function keyDownHandler(evt){if(dyduUtils.isDefined(evt.target)&&evt.target.tagName!=="INPUT"&&evt.target.tagName!=="TEXTAREA"){evt.stopPropagation();
evt.preventDefault();return false}}$window.addEventListener("keyup",keyUpHandler,false);$window.addEventListener("keydown",keyDownHandler,false);$scope.$on("$destroy",function(){$window.removeEventListener("keyup",keyUpHandler,false);$window.removeEventListener("keydown",keyDownHandler,false)})}}]);
angular.module("dyduApiModule").run(function($dyduApi,$configurations,$log){if(!dyduUtils.isDefined($configurations.get("apiPointName"))){$log.error("apiPointName undefined");return}function messageFunc(e){if(dyduUtils.isDefined(e.data)&&dyduUtils.isDefined(e.data.api)){var api=$dyduApi.getApi()[e.data.api];if(dyduUtils.isDefined(api))api.call(window,e.data.params);else $log.error("Call an unknown api from message api:"+e.data.api)}}if(!dyduUtils.isDefined(window[$configurations.get("apiPointName")])){window[$configurations.get("apiPointName")]=
$dyduApi.getApi();if(window.addEventListener)window.addEventListener("message",messageFunc,false);else if(window.attachEvent)window.attachEvent("onmessage",messageFunc)}}).factory("$dyduApi",function($log){var apiNumber=0;var apiRegistered={};var apiService={registerApi:registerApi,removeApi:removeApi,apiInfo:apiInfo,getApi:getApi};function registerApi(name,scope,func){if(dyduUtils.isDefined(apiRegistered[name]))$log.error("Api "+name+" already exist");else{apiNumber++;apiRegistered[name]=function(){var currentArgs=
arguments;if(scope.$$phase==null)scope.$apply(function(scope){func.apply(scope,currentArgs)});else func.apply(scope,currentArgs)}}}function removeApi(name){if(!dyduUtils.isDefined(apiRegistered[name]))$log.error("Impossible to find api "+name);else{delete apiRegistered[name];apiNumber--}}function getApi(){return apiRegistered}function apiInfo(){var info="Number\x3d"+apiNumber+" - ";for(apiKey in apiRegistered)info=info+apiKey+",";return info}return apiService});
angular.module("autoCompleteModule").controller("suggestionPopinController",["$scope","$timeout",function($scope,$timeout){$scope.$subscribe(globalMediatorChannels.SUGGESTION_CLICKED,suggestionClickedHandler);$scope.$subscribe(globalMediatorChannels.SUGGESTIONS_RECEIVED,suggestionsReceivedHandler);$scope.suggestions=[];$scope.selectedSuggestion=undefined;$scope.clickSuggestion=onClickSuggestion;var sourceInput;$scope.$watch("suggestions",function(newValue,oldValue){$scope.$broadcast(globalMediatorChannels.SELECTION_ELEMENT_UPDATE,
newValue)});$scope.selectSuggestion=function(suggestion){$scope.selectedSuggestion=suggestion;$timeout(function(){$scope.$apply()})};$scope.isSelected=function(suggestion){return $scope.selectedSuggestion===suggestion};function onClickSuggestion(suggestion){$scope.$publish(globalMediatorChannels.SUGGESTION_CLICKED,{text:suggestion,sourceInput:sourceInput})}function suggestionClickedHandler(){$scope.suggestions=[];$scope.selectedSuggestion=undefined;sourceInput=""}function suggestionsReceivedHandler(event,
answer){if(typeof answer.suggestions!=="undefined"){$scope.suggestions=answer.suggestions;$scope.selectedSuggestion=undefined}else if(typeof answer.reset!=="undefined"){$scope.suggestions=[];$scope.selectedSuggestion=undefined}sourceInput=answer.sourceInput}}]);
angular.module("welcomeCallModule").run(function($rootScope,$context,$configurations,$log,$http,$messageFactory,base64){$rootScope.$subscribe(globalMediatorChannels.REGISTER_VISITOR,registerVisitor);var VISITOR_COOKIE=encodeURIComponent("DYDU_lastvisitfor_"+$context.getBotId()+"_"+$context.getCurrentSpace()+"_"+$context.getCurrentLanguage());function registerVisitor(){try{var cookieValue=$context.getData(VISITOR_COOKIE,null);var registerVisit=true;if(cookieValue!=null){var now=new Date;if(Date.parse(cookieValue)+
24*60*60*1E3>now.getTime()){$log.debug("DYDU Visitor not registered because last visit\x3d"+cookieValue);registerVisit=false}}var msg=$messageFactory.createWelcomeCallMessage();msg.parameters=encodeParameters(msg.parameters,base64);var uri=$configurations.get("servletUrl")+"/chatHttp?data\x3d"+JSON.stringify(msg);if(registerVisit){$http.jsonp(uri);$context.setData(VISITOR_COOKIE,new Date,{expires:365,path:COOKIES_OPTION.path,domain:COOKIES_OPTION.domain})}}catch(e){$log.error("Error registering visitor",
e)}}});
angular.module("gdprModule").controller("gdprController",function($context,$scope,$gdprService){$scope.gdprService=$gdprService});
angular.module("gdprModule").factory("$gdprService",function($configurations,$context,$rootScope){var service={};var GDPR_COOKIE="dydu.gdpr";service.configurations={gdprEnabled:$configurations.get("gdprEnabled",false),showGdprCleanButton:$configurations.get("showGdprCleanButton",true),showGdprExportButton:$configurations.get("showGdprExportButton",true)};service.accept=function(){service.value=new Date;$context.setData(GDPR_COOKIE,service.value)};service.clean=function(address){if(typeof address!==
"undefined"){$rootScope.$publish(globalMediatorChannels.GDPR_REQUEST,{mail:address,object:"Delete"});thank("gdpr.clean.done")}};service["export"]=function(address){if(typeof address!=="undefined"){$rootScope.$publish(globalMediatorChannels.GDPR_REQUEST,{mail:address,object:"Get"});thank("gdpr.export.done")}};service.value=$context.getData(GDPR_COOKIE);function thank(textResource){var interactions=$context.getInteractions();interactions.push({askFeedback:false,contextId:"",date:"",from:$rootScope.resources.get("chatbox.interaction.bot.label"),
hasProfilePicture:"",operatorExternalId:"",operatorName:"",templateData:"",templateFile:"",text:$rootScope.resources.get(textResource),type:"response"});$rootScope.$publish(chatboxMediatorChannels.INTERACTIONS_UPDATE,interactions)}return service});
angular.module("gdprModule").run(function($rootScope,$messageFactory,$context){$rootScope.$subscribe(globalMediatorChannels.GDPR_REQUEST,gdprRequestRequestHandler);function gdprRequestRequestHandler(evt,params){if($context.alreadyCame())$rootScope.$emit(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createGdprRequest(params))}});
function ComplianceInfo(delays,priority){delays=delays||{delay:-1,idleDelay:-1};priority=priority||{"equalsCount":0,"rulesCount":-1,"rulesValueLength":0};this.delays={"delay":delays.delay,"idleDelay":delays.idleDelay};this.priority={"equalsCount":priority.equalsCount||0,"rulesCount":priority.rulesCount||-1,"rulesValueLength":priority.rulesValueLength||0}}
ComplianceInfo.prototype={getDelay:function(){return this.delays.delay},getIdleDelay:function(){return this.delays.idleDelay},getPriority:function(){return this.priority},setPriority:function(priority){this.priority.equalsCount=priority.equalsCount;this.priority.rulesCount=priority.rulesCount;this.priority.rulesValueLength+=priority.rulesValueLength},isDelayValid:function(){return this.delays.delay>=0||this.delays.idleDelay>=0},complyWithoutDelay:function(){return this.delays.delay===0||this.delays.idleDelay===
0},hasSamePriorityAs:function(other){return this.comparePriorities(other)===0},hasHigherPriorityThan:function(other){return this.comparePriorities(other)>0},comparePriorities:function(other){if(this.priority.equalsCount!==other.priority.equalsCount)return this.priority.equalsCount-other.priority.equalsCount;else if(this.priority.rulesCount!==other.priority.rulesCount)return this.priority.rulesCount-other.priority.rulesCount;return this.priority.rulesValueLength-other.priority.rulesValueLength},copy:function(other){this.delays.delay=
other.delays.delay;this.delays.idleDelay=other.delays.idleDelay;this.priority.equalsCount=other.priority.equalsCount;this.priority.rulesCount=other.priority.rulesCount;this.priority.rulesValueLength=other.priority.rulesValueLength},mergeDelaysForOrCondition:function(other){this.mergeDelayIfSmaller(other);this.mergeIdleDelayIfSmaller(other)},mergeDelaysForAndCondition:function(other){if(this.delays.delay!==-1)this.delays.delay=Math.max(this.delays.delay,other.delays.delay);if(other.delays.delay===
-1)this.delays.delay=-1;this.delays.idleDelay=Math.max(this.delays.idleDelay,other.delays.idleDelay)},mergeDelayIfSmaller:function(other){if(this.delays.delay===-1||other.delays.delay>=0&&other.delays.delay<this.delays.delay){this.delays.delay=other.delays.delay;return true}return false},mergeIdleDelayIfSmaller:function(other){if(this.delays.idleDelay===-1||other.delays.idleDelay>=0&&other.delays.idleDelay<this.delays.idleDelay){this.delays.idleDelay=other.delays.idleDelay;return true}return false},
updatePriority:function(isEqualsOperator,comparedValue){if(isEqualsOperator)this.priority.equalsCount++;else if(dyduUtils.isDefined(comparedValue))this.priority.rulesValueLength+=comparedValue.length;this.priority.rulesCount++}};
angular.module("pushModule").run(function($push,$context){$context.getGlobalVisitDuration=getGlobalVisitDuration;$context.getGlobalVisitCount=getGlobalVisitCount;$context.setGlobalVisitCount=setGlobalVisitCount;$context.getLastVisitTime=getLastVisitTime;$context.setLastVisitTime=setLastVisitTime;$context.getLastPageLoadedTime=getLastPageLoadedTime;$context.setLastPageLoadedTime=setLastPageLoadedTime;$context.getPagesViewedCount=getPagesViewedCount;$context.setPagesViewedCount=setPagesViewedCount;
$context.resetSessionCount=resetSessionCount;$context.getCountry=getCountry;$context.setCountry=setCountry;$context.getCity=getCity;$context.setCity=setCity;$context.computeDurationSinceLastVisit=computeDurationSinceLastVisit;$context.getDurationSinceLastVisit=getDurationSinceLastVisit;$context.setPushData=writeCookie;$context.getPushData=readCookieValue;$context.processKeywords=processKeywords;function getGlobalVisitDuration(now){return(now-getLastVisitTime(now))/1E3}function getGlobalVisitCount(){return parseInt(readCookieValue("visit",
"count",0,"global"))}function setGlobalVisitCount(count){writeCookie("visit","count",count,"global",60)}function getLastVisitTime(now){return parseInt(readCookieValue("lastvisit","time",now,"global"))}function setLastVisitTime(now){writeCookie("lastvisit","time",now,"global",60)}function getLastPageLoadedTime(){return parseInt(readCookieValue("lastpageloaded","time",-1,"session"))}function setLastPageLoadedTime(now){writeCookie("lastpageloaded","time",now,"session")}function setPagesViewedCount(value){writeCookie("pagesViewed",
"count",value,"session")}function getCountry(){return readCookieValue("localisation","country","undefined","session")}function setCountry(value){writeCookie("localisation","country",value,"session")}function getCity(){return readCookieValue("localisation","city","undefined","session")}function setCity(value){writeCookie("localisation","city",value,"session")}function getPagesViewedCount(){var count=parseInt(readCookieValue("pagesViewed","count",0,"session"))+1;setPagesViewedCount(count);return count}
function computeDurationSinceLastVisit(now){var timeSinceLastVisit=now-getLastVisitTime(now);writeCookie("lastvisit","durationsince",timeSinceLastVisit,"global",60)}function getDurationSinceLastVisit(){return parseInt(readCookieValue("lastvisit","durationsince",0,"global"))/1E3}function resetSessionCount(now){computeDurationSinceLastVisit(now);setLastVisitTime(now);setPagesViewedCount(0)}function readCookie(space){var c=$context.getData("DYDU_PUSH_"+space+$context.getBotId());if(typeof c==="undefined"||
c===null||c==="")c={};return c}function readCookieValue(ruleId,conditionId,defaultValue,space){space=space||"";var c=readCookie(space);var t=c["r_"+ruleId];if(typeof t==="undefined"||t===null)return defaultValue;else{t=t[conditionId];if(typeof t==="undefined"||t===null)return defaultValue;else return t}}function writeCookie(ruleId,conditionId,value,space,expires,expirationUnit){space=space||"";expires=expires||1;var c=readCookie(space);var t=c["r_"+ruleId]||{};t[conditionId]=value;c["r_"+ruleId]=
t;$context.setData("DYDU_PUSH_"+space+$context.getBotId(),c,{expires:expires,expirationUnit:expirationUnit,path:COOKIES_OPTION.path,domain:COOKIES_OPTION.domain})}function processKeywords(ref){if(ref.indexOf("?")===-1)return[];var qs=ref.substr(ref.indexOf("?")+1);var qsa=qs.split("\x26");for(var i=0;i<qsa.length;i++){var qsip=qsa[i].split("\x3d");if(qsip.length===1)continue;if(qsip[0]==="q"||qsip[0]==="p"){var wordstring=unescape(qsip[1].replace(/\+/g," "));return wordstring.split(" ")}}return[]}
});
angular.module("pushModule").run(function($push,$context){$push.addExternalInfoProcessor(globalInfoProcessor);$push.addExternalInfoProcessor(visitCountProcessor);$push.addExternalInfoProcessor(visitDurationProcessor);$push.addExternalInfoProcessor(numberOfPreviousChatProcessor);$push.addExternalInfoProcessor(pagesViewedCountCountProcessor);$push.addExternalInfoProcessor(durationSinceLastVisitCountProcessor);function globalInfoProcessor(externalInfos){externalInfos.windowLocation=window.location.href;
externalInfos.language=navigator.language;externalInfos.referrer=document.referrer;externalInfos.usedKeywords=$context.processKeywords(document.referrer);externalInfos.now=(new Date).getTime()}$context.visitCountProcessor=visitCountProcessor;function visitCountProcessor(externalInfos,now){now=now||externalInfos.now;var visitCount=$context.getGlobalVisitCount();var lastPageLoadedTime=$context.getLastPageLoadedTime();var isNewVisit=false;var elapsedTime=now-lastPageLoadedTime;if(elapsedTime>30*60*1E3)isNewVisit=
true;if(isNewVisit){visitCount++;$context.resetSessionCount(now);$context.setGlobalVisitCount(visitCount)}$context.setLastPageLoadedTime(now);externalInfos.visitCount=visitCount}function visitDurationProcessor(externalInfos,now){now=now||externalInfos.now;externalInfos.visitDuration=$context.getGlobalVisitDuration(now)}function numberOfPreviousChatProcessor(externalInfos){}function pagesViewedCountCountProcessor(externalInfos){externalInfos.pagesViewedCount=$context.getPagesViewedCount()}function durationSinceLastVisitCountProcessor(externalInfos){externalInfos.durationSinceLastVisit=
$context.getDurationSinceLastVisit()}});
angular.module("pushModule").run(function($push,$context,$configurations,$http){var INVALID_DELAY={"delay":-1,"idleDelay":-1};var VALID_DELAY={"delay":0,"idleDelay":-1};var OPERATOR={Equals:"Equals",StartsWith:"StartsWith",DoesNotStartWith:"DoesNotStartWith",IsContained:"IsContained",Contains:"Contains",GreaterThan:"GreaterThan",LesserThan:"LesserThan",NotEquals:"NotEquals"};$push.INVALID_DELAY=INVALID_DELAY;$push.isValidNumericOperator=isValidNumericOperator;$push.isValidStringOperator=isValidStringOperator;
function isStringValueCompliant(condition,valueToCompare){if(isValidStringOperator(condition.operator)){var pattern=computeRegex(condition.value,condition.operator);if(condition.operator!==OPERATOR.IsContained)return isStringCompliant(valueToCompare,pattern,condition.operator)?VALID_DELAY:INVALID_DELAY;else return condition.value.toLowerCase().indexOf(valueToCompare.toLowerCase())>=0?VALID_DELAY:INVALID_DELAY}return INVALID_DELAY}function isValidStringOperator(operator){return operator===OPERATOR.Equals||
operator===OPERATOR.NotEquals||operator===OPERATOR.StartsWith||operator===OPERATOR.DoesNotStartWith||operator===OPERATOR.IsContained||operator===OPERATOR.Contains}function isStringCompliant(url,pattern,operator){if(operator===OPERATOR.DoesNotStartWith)return!(new RegExp(pattern,"i")).test(url);else return(new RegExp(pattern,"i")).test(url)}function computeRegex(val,operator){val=val||"";val=val.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26");if(operator===OPERATOR.StartsWith||operator===OPERATOR.DoesNotStartWith)val=
"^"+val;else if(operator===OPERATOR.Equals)val="^"+val+"$";else if(operator===OPERATOR.NotEquals)val="^(?!"+val+"$)";return val}function isNumberValueCompliant(condition,valueToCompare){return isValidNumericOperator(condition.operator)&&isNumberCompliant(valueToCompare,condition.value,condition.operator)?VALID_DELAY:INVALID_DELAY}function isValidNumericOperator(operator){return operator===OPERATOR.Equals||operator===OPERATOR.NotEquals||operator===OPERATOR.GreaterThan||operator===OPERATOR.LesserThan}
function isNumberCompliant(number1,number2,operator){var n1=parseInt(number1);var n2=parseInt(number2);if(operator===OPERATOR.Equals)return n1===n2;else if(operator===OPERATOR.GreaterThan)return n1>n2;else if(operator===OPERATOR.LesserThan)return n1<n2;else if(operator===OPERATOR.NotEquals)return n1!==n2;return false}function getPageConditions(condition,ruleId,externInfos,compliantIndexesOnly){var indexes=[];var conditions=[];getChildrenPageConditions(condition,conditions);if(compliantIndexesOnly)for(var i=
0;i<conditions.length;i++){var compliance=$push.processConditionCompliance(conditions[i],ruleId,externInfos);if(compliance.isDelayValid())indexes.push(conditions[i].index)}else return conditions;return indexes}function getChildrenPageConditions(condition,conditions){if(condition.children)for(var i=0;i<condition.children.length;i++){var childCondition=condition.children[i];if(childCondition.type==="CurrentPage"||childCondition.type==="PastPage")conditions.push(childCondition)}}$push.addRuleDefinition({name:"Container",
processDelays:function(){return VALID_DELAY}});$push.addRuleDefinition({name:"CurrentPage",processDelays:function(condition,ruleId,externInfos){return isStringValueCompliant(condition,externInfos.windowLocation)}});$push.addRuleDefinition({name:"PastPage",processDelays:function(condition,ruleId,externInfos){return isStringValueCompliant(condition,externInfos.windowLocation)}});$push.addRuleDefinition({name:"PageVisitCount",processDelays:function(condition,ruleId,externInfos){if(isValidNumericOperator(condition.operator)){var compliantConditionIndexes=
getPageConditions(condition,ruleId,externInfos,true);var pageConditions=getPageConditions(condition,ruleId,externInfos,false);var isCompliant=false;for(var i=0;i<pageConditions.length;i++){var conditionId=condition.index+"-"+pageConditions[i].index;var pageVisitCount=parseInt($context.getPushData(ruleId,conditionId,0));if(pageConditions[i].type==="CurrentPage")pageVisitCount++;if(isNumberCompliant(pageVisitCount,condition.value,condition.operator))isCompliant=true}for(var j=0;j<compliantConditionIndexes.length;j++){var compliantConditionId=
condition.index+"-"+compliantConditionIndexes[j];var compliantPageVisitCount=parseInt($context.getPushData(ruleId,compliantConditionId,0))+1;$context.setPushData(ruleId,compliantConditionId,compliantPageVisitCount)}if(isCompliant)return VALID_DELAY}return INVALID_DELAY}});$push.addRuleDefinition({name:"PageVisitDuration",processDelays:function(condition){if(isValidNumericOperator(condition.operator)){var delay=parseInt(condition.value);if(!isNaN(delay))if(condition.operator===OPERATOR.LesserThan)return VALID_DELAY;
else return{"delay":Math.max(0,delay),"idleDelay":-1}}return INVALID_DELAY}});$push.addRuleDefinition({name:"IdleDuration",processDelays:function(condition){if(isValidNumericOperator(condition.operator)){var delay=parseInt(condition.value);if(!isNaN(delay))if(condition.operator===OPERATOR.LesserThan)return VALID_DELAY;else return{"delay":-1,"idleDelay":Math.max(0,delay)}}return INVALID_DELAY}});$push.addRuleDefinition({name:"GlobalVisitCount",processDelays:function(condition,ruleId,externInfos){return isNumberValueCompliant(condition,
externInfos.visitCount)}});$push.addRuleDefinition({name:"GlobalVisitDuration",processDelays:function(condition,ruleId,externInfos){var delay=parseInt(condition.value);if(VALID_DELAY===isNumberValueCompliant(condition,externInfos.visitDuration))return VALID_DELAY;else if(isValidNumericOperator(condition.operator)&&externInfos.visitDuration<delay)return{"delay":delay-externInfos.visitDuration,"idleDelay":-1};return INVALID_DELAY}});$push.addRuleDefinition({name:"PreviousPage",processDelays:function(condition,
ruleId,externInfos){return isStringValueCompliant(condition,externInfos.referrer)}});$push.addRuleDefinition({name:"PagesViewedCount",processDelays:function(condition,ruleId,externInfos){return isNumberValueCompliant(condition,externInfos.pagesViewedCount)}});function localisationProcessor(externalInfos){function cityAndCountrySetter(data){$context.setCity(data.city);$context.setCountry(data.country);externalInfos.city=$context.getCity();externalInfos.country=$context.getCountry()}if($context.getCity()===
"undefined")$http.jsonp($configurations.get("servletUrl")+"/localisation?format\x3dangular\x26callback\x3dJSON_CALLBACK").success(cityAndCountrySetter).error(function(){$http.jsonp($configurations.get("backupServletUrl")+"/localisation?format\x3dangular\x26callback\x3dJSON_CALLBACK").success(cityAndCountrySetter)});else{externalInfos.city=$context.getCity();externalInfos.country=$context.getCountry()}}$push.addRuleDefinition({name:"City",processDelays:function(condition,ruleId,externInfos){if(dyduUtils.isNotDefined(externInfos.city))localisationProcessor(externInfos);
return isStringValueCompliant(condition,externInfos.city)}});$push.addRuleDefinition({name:"Country",processDelays:function(condition,ruleId,externInfos){if(dyduUtils.isNotDefined(externInfos.country))localisationProcessor(externInfos);return isStringValueCompliant(condition,externInfos.country)}});$push.addRuleDefinition({name:"Language",processDelays:function(condition,ruleId,externInfos){return isStringValueCompliant(condition,externInfos.language)}});$push.addRuleDefinition({name:"NumberOfPreviousChat",
processDelays:function(condition,ruleId,externInfos){return isNumberValueCompliant(condition,externInfos.numberOfPreviousChat)}});$push.addRuleDefinition({name:"UsedKeyWords",processDelays:function(condition,ruleId,externInfos){for(var i=0;i<externInfos.usedKeywords.length;i++)if(VALID_DELAY===isStringValueCompliant(condition,externInfos.usedKeywords[i]))return VALID_DELAY;return INVALID_DELAY}});$push.addRuleDefinition({name:"DurationSinceLastVisit",processDelays:function(condition,ruleId,externInfos){return isNumberValueCompliant(condition,
externInfos.durationSinceLastVisit)}})});
angular.module("pushModule").factory("$push",["$rootScope","$context","$timeout",function($rootScope,$context,$timeout){var INTERACTION_EVENTS=["mousemove","click","keyup"];var currentTimer={};var externalInfoProcessors=[];var externalInfos={};var eventListeners=[];var pushService={};var rules=[];var rulesDefinition=[];pushService.addExternalInfoProcessor=addExternalInfoProcessor;pushService.addRule=addRule;pushService.addRuleDefinition=addRuleDefinition;pushService.getExternalInfos=getExternalInfos;
pushService.processRules=processRules;pushService.processConditionCompliance=processConditionCompliance;pushService.interaction=interaction;pushService.urlCompliant=urlCompliant;pushService.canPush=true;pushService.cleanInactivityListeners=cleanInactivityListeners;function addExternalInfoProcessor(infoProcessor){if(dyduUtils.isDefined(infoProcessor))externalInfoProcessors.push(infoProcessor)}function addRuleDefinition(ruleDefinition){if(dyduUtils.isDefined(ruleDefinition))rulesDefinition.push(ruleDefinition)}
function addRule(rule){if(dyduUtils.isDefined(rule))rules.push(rule)}function getExternalInfos(now){while(externalInfoProcessors.length>0){var infoProcessor=externalInfoProcessors.pop();infoProcessor(externalInfos,now)}return externalInfos}function processGoalPage(rule,externInfos){var id=rule.bgpId;var urlToCheck=rule.conditions[0].param_1;if(dyduUtils.isDefined($context.getContextId())&&$context.getContextId()!==""&&urlCompliant(urlToCheck,externInfos.windowLocation))$rootScope.$publish(globalMediatorChannels.REWORD,
{text:"_goalpage_:"+id,options:{hideFromUser:true}})}function processRules(externInfos){var bestDelayId;var bestIdleDelayId;var bestCompliance=new ComplianceInfo;for(var cpt=0;cpt<rules.length;cpt++){var rule=rules[cpt];var id=rule.kId;if(id===undefined)processGoalPage(rule,externInfos);else{var conditionsContainer={"children":rule.conditions,"type":"Container"};var ruleCompliance=computeRuleCompliance(conditionsContainer,id,externInfos);if(ruleCompliance.hasHigherPriorityThan(bestCompliance)){if(ruleCompliance.isDelayValid()){bestDelayId=
id;bestIdleDelayId=id;bestCompliance.copy(ruleCompliance)}}else if(ruleCompliance.hasSamePriorityAs(bestCompliance)){if(bestCompliance.mergeDelayIfSmaller(ruleCompliance))bestDelayId=id;if(bestCompliance.mergeIdleDelayIfSmaller(ruleCompliance))bestIdleDelayId=id}}}handlePush(bestCompliance.getDelay(),bestDelayId,bestCompliance.getIdleDelay(),bestIdleDelayId)}function bindHandler(__method,object,param){var listener=function(){return __method.call(object,param)};eventListeners.push(listener);return listener}
function cleanInactivityListeners(){for(var j=0;j<eventListeners.length;j++)for(var i=0;i<INTERACTION_EVENTS.length;i++)if(document.detachEvent)document.detachEvent("on"+INTERACTION_EVENTS[i],eventListeners[j]);else document.removeEventListener(INTERACTION_EVENTS[i],eventListeners[j]);eventListeners.length=0;$timeout.cancel(currentTimer.counter);currentTimer.counter=null}function handlePush(delay,delayRuleId,idleDelay,idleDelayRuleId){if(delay!==-1||idleDelay!==-1)if(delay===0)pushKnowledge(delayRuleId);
else if(idleDelay===0)pushKnowledge(idleDelayRuleId);else{if(delay!==-1)$timeout(bindHandler(pushKnowledge,pushService,delayRuleId),delay*1E3);if(idleDelay!==-1&&dyduUtils.isNotDefined(currentTimer.counter)){for(var i=0;i<INTERACTION_EVENTS.length;i++)if(document.attachEvent)document.attachEvent("on"+INTERACTION_EVENTS[i],bindHandler(interaction,pushService,idleDelayRuleId));else document.addEventListener(INTERACTION_EVENTS[i],bindHandler(interaction,pushService,idleDelayRuleId));currentTimer.counter=
$timeout(bindHandler(pushKnowledge,pushService,idleDelayRuleId),idleDelay*1E3);currentTimer.duration=idleDelay*1E3}}}function interaction(ruleId,$publish){if(dyduUtils.isDefined(currentTimer.counter)){$timeout.cancel(currentTimer.counter);currentTimer.counter=$timeout(bindHandler(pushKnowledge,pushService,ruleId),currentTimer.duration)}}function computeRuleCompliance(condition,ruleId,externInfos){var bestChildCompliance=computeChildrenCompliance(condition,ruleId,externInfos);return computeConditionCompliance(condition,
ruleId,externInfos,bestChildCompliance)}function computeChildrenCompliance(condition,ruleId,externInfos){var bestCompliance=new ComplianceInfo;if(condition.children)for(var c=0;c<condition.children.length;c++){condition.children[c].parent=condition;var childCompliance=computeRuleCompliance(condition.children[c],ruleId,externInfos);if(childCompliance.hasHigherPriorityThan(bestCompliance)){if(childCompliance.isDelayValid())bestCompliance.copy(childCompliance)}else if(childCompliance.hasSamePriorityAs(bestCompliance)){bestCompliance.mergeDelaysForOrCondition(childCompliance);
if(bestCompliance.complyWithoutDelay())break}}else bestCompliance=new ComplianceInfo({delay:0,idleDelay:-1});return bestCompliance}function computeConditionCompliance(condition,ruleId,externInfos,childCompliance){var conditionCompliance=new ComplianceInfo;if(condition.type==="PastPage"&&!(condition.parent.type==="Container"&&dyduUtils.isNotDefined(condition.children)))conditionCompliance.mergeDelaysForOrCondition(childCompliance);else if(childCompliance.isDelayValid()){conditionCompliance.copy(processConditionCompliance(condition,
ruleId,externInfos));if(conditionCompliance.isDelayValid()){conditionCompliance.mergeDelaysForAndCondition(childCompliance);conditionCompliance.setPriority(childCompliance.getPriority())}}if(conditionCompliance.isDelayValid()){var comparedValue=null;if(pushService.isValidStringOperator(condition.operator))comparedValue=condition.value;conditionCompliance.updatePriority(condition.operator==="Equals"||condition.operator==="NotEquals",comparedValue)}return conditionCompliance}function processConditionCompliance(condition,
ruleId,externInfos){var result=new ComplianceInfo;for(var i=0;i<rulesDefinition.length;i++){var ruleDefinition=rulesDefinition[i];if(condition.type===ruleDefinition.name){result=new ComplianceInfo(ruleDefinition.processDelays(condition,ruleId,externInfos));break}}return result}function pushKnowledge(ruleId){if(pushService.canPush){$rootScope.$publish(globalMediatorChannels.REWORD,{text:"_pushcondition_:"+ruleId,options:{hideFromUser:true}});pushService.canPush=false}}function urlCompliant(pattern,
url){try{if(pattern.substring(pattern.length-1)==="%")return url.substring(0,pattern.length-1)===pattern.substring(0,pattern.length-1);return pattern===url}catch(e){return false}}return pushService}]);
angular.module("pushModule").run(function($push,$http,$log,$rootScope,$context){angular.element(document).ready(function(){function getParentUrl(){if(dyduUtils.isDefined($context.getBotId()))return dyduUtils.getJsBaseUrl().substr(0,dyduUtils.getJsBaseUrl().lastIndexOf($context.getBotId())+$context.getBotId().length+1);else return dyduUtils.getJsBaseUrl()}function success(rules){try{if("object"===typeof rules){for(var i=0;i<rules.length;i++)$push.addRule(rules[i]);$push.processRules($push.getExternalInfos((new Date).getTime()))}}catch(e){$log.error(e)}}
if(dyduUtils.isDefined(dyduUtils.getJsBaseUrl($log))){$rootScope.$publish(globalMediatorChannels.CHECK_SERVER_AVAILABILITY);$http.jsonp(getParentUrl()+"pushrules_angular.js?callback\x3dJSON_CALLBACK").success(success).error(function(){$log.info("load push rules from "+dyduUtils.getJsBaseUrl()+"pushrules_angular.js");$http.jsonp(dyduUtils.getJsBaseUrl()+"pushrules_angular.js?callback\x3dJSON_CALLBACK").success(success).error(function(data,status){$log.error("Error "+status+" with reason "+data+". Could not retrieve pushrules at "+
dyduUtils.getJsBaseUrl()+"pushrules_angular.js")})})}})});
angular.module("configurationModule").factory("$configurations",function($log){function getConfiguration(configurationName,defaultValue){if(dyduUtils.isDefined(overriddenConfigurations[configurationName]))return overriddenConfigurations[configurationName];if(typeof configurations[configurationName]!=="undefined")return configurations[configurationName];else if(typeof defaultValue!=="undefined"){$log.debug("use default value "+defaultValue+" for "+configurationName);return defaultValue}return undefined}
return{get:getConfiguration}});
angular.module("cookieModule").config(["$localStorageProvider",function($localStorageProvider){$localStorageProvider.setKeyPrefix("dyduStorage-")}]).factory("$cookieModule",["base64","ipCookie","$localStorage",function(base64,ipCookie,$localStorage){var DEFAULT_COOKIE_CACHE_TIME_IN_SECONDS=20;var cookieCache={};var cookieExpirationDate={};if(configurations.cookieDomain!=="")COOKIES_OPTION.domain=configurations.cookieDomain;var storageFunctionToUse=ipCookie;if(configurations.useLocalStorage){storageFunctionToUse=
function(key,value,options){var expiresFor;if(value!==undefined){if(typeof options.expires==="number"){expiresFor=options.expires;options.expires=new Date;if(expiresFor===-1)options.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT");else if(options.expirationUnit!==undefined)if(options.expirationUnit==="hours")options.expires.setHours(options.expires.getHours()+expiresFor);else if(options.expirationUnit==="minutes")options.expires.setMinutes(options.expires.getMinutes()+expiresFor);else if(options.expirationUnit===
"seconds")options.expires.setSeconds(options.expires.getSeconds()+expiresFor);else if(options.expirationUnit==="milliseconds")options.expires.setMilliseconds(options.expires.getMilliseconds()+expiresFor);else options.expires.setDate(options.expires.getDate()+expiresFor);else options.expires.setDate(options.expires.getDate()+expiresFor)}$localStorage[key]={value:value,expires:options.expires}}else{var data=$localStorage[key];if(dyduUtils.isDefined(data)&&new Date<new Date(data.expires))return data.value;
else{delete $localStorage[key];return undefined}}};storageFunctionToUse.remove=function(key,options){delete $localStorage[key]}}var cookieModule=function(key,value,options){var optionsClone=dyduUtils.clone(options);if(value!==undefined){var valueString=JSON.stringify(value);storageFunctionToUse(key,base64.encode(valueString),optionsClone);cookieCache[key]=value;if(dyduUtils.isDefined(optionsClone)&&dyduUtils.isDefined(optionsClone.expires))cookieExpirationDate[key]=optionsClone.expires;else{cookieExpirationDate[key]=
new Date;cookieExpirationDate[key].setSeconds(cookieExpirationDate[key].getSeconds()+DEFAULT_COOKIE_CACHE_TIME_IN_SECONDS)}}else{var val=cookieCache[key];if(cookieCache.hasOwnProperty(key)&&new Date<cookieExpirationDate[key])return val;cookieCache[key]=null;cookieExpirationDate[key]=null;val=storageFunctionToUse(key,value,optionsClone);if(val!==undefined)try{val=JSON.parse(base64.decode(val))}catch(e){}cookieCache[key]=val;cookieExpirationDate[key]=new Date;cookieExpirationDate[key].setSeconds(cookieExpirationDate[key].getSeconds()+
DEFAULT_COOKIE_CACHE_TIME_IN_SECONDS);return val}};cookieModule.remove=remove;cookieModule.clearCache=clearCache;function clearCache(){cookieCache={};cookieExpirationDate={}}function remove(key,options){delete cookieCache[key];delete cookieExpirationDate[key];storageFunctionToUse.remove(key,options)}return cookieModule}]);
(function(){var context;var configs,cookies,log,cookiesDisabled;var COMMON_COOKIES={LANGUAGE:"dydu.common.language",SPACE:"dydu.common.space",COMPETENCY:"dydu.common.competency",CONTEXT_ID:"dydu.common.contextId",LAST_CONTEXT_ID:"dydu.common.lastContextId",LAST_QUESTION:"dydu.common.lastquestion",CLIENT_ID:"DYDU_clientId"};var botId,currentContextIds,currentLanguage,currentSpace,qualificationMode,servletToUse,serverTime,competency,lastQuestion,userId;function createOrGetContext(){if(typeof context===
"undefined"){var cookiesData={};context={setData:function(key,value,options){if(cookiesDisabled){cookiesData[key]=value;return}return cookies(key,value,options)},getData:function(key,defaultValue){var cookieValue=cookiesDisabled?cookiesData[key]:cookies(key);return dyduUtils.isDefined(cookieValue)?cookieValue:defaultValue},removeData:function(key){cookies.remove(key,{domain:COOKIES_OPTION.domain,path:COOKIES_OPTION.path})},getBotId:function(){return botId},registerContext:registerContext,clearContext:clearContext,
getContextVariables:getContextVariables,getMode:getMode,getServerTime:getServerTime,getContextId:getContextId,getApiEntryPoint:getApiEntryPoint,getLastContextId:getLastContextId,getLastQuestion:getLastQuestion,getCompetency:getCompetency,getCurrentLanguage:getCurrentLanguage,getCurrentSpace:getCurrentSpace,getClientId:getClientId,getServletToUse:getServletToUse,getUserId:getUserId,setUserId:setUserId,alreadyCame:alreadyCame,isQualificationMode:isQualificationMode,hasContextId:hasContextId};botId=
configs.get("botId");currentContextIds=cookies(COMMON_COOKIES.CONTEXT_ID)||{"":""};currentLanguage=configs.get("language");currentSpace=configs.get("consultationSpace");qualificationMode=configs.get("qualificationMode");servletToUse=configs.get("servletUrl");lastQuestion=context.getData(COMMON_COOKIES.LAST_QUESTION,null);serverTime={value:0,spec:{}}}function getMode(){return"Synchron"}function getServletToUse(){return servletToUse}function getServerTime(specName){if(dyduUtils.isDefined(specName))return dyduUtils.isDefined(serverTime[specName])?
serverTime[specName]:0;return dyduUtils.isNotDefined(serverTime)?0:serverTime.value}function hasContextId(botId){var contextId=getContextId(botId);return dyduUtils.isDefined(contextId)&&contextId!==""}function isQualificationMode(){if(dyduUtils.isDefined(configs.get("qualificationMode")))return configs.get("qualificationMode");return qualificationMode||false}function getCurrentLanguage(){if(dyduUtils.isNotDefined(currentLanguage)){if(dyduUtils.isDefined(configs.get("possibleLanguages"))&&configs.get("possibleLanguages").length)currentLanguage=
configs.get("possibleLanguages")[0];if(dyduUtils.isNotDefined(currentLanguage)){log.error("No language. Setting 'fr' as default language");currentLanguage="fr"}}return context.getData(COMMON_COOKIES.LANGUAGE,currentLanguage)}function getCompetency(){return context.getData(COMMON_COOKIES.COMPETENCY,competency)}function getApiEntryPoint(){return configs.get("apiPointName")}function getCurrentSpace(){if(dyduUtils.isNotDefined(currentSpace))currentSpace=configs.get("defaultConsultationSpaceName");if(dyduUtils.isNotDefined(currentSpace))currentSpace=
"Default";return context.getData(COMMON_COOKIES.SPACE,currentSpace)}function getContextId(botId){botId=botId||context.getBotId();return context.getData(COMMON_COOKIES.CONTEXT_ID,currentContextIds)[botId]}function getLastContextId(){return context.getData(COMMON_COOKIES.LAST_CONTEXT_ID,"")}function getLastQuestion(){return lastQuestion}function getUserId(){return userId}function setUserId(name){userId=name}var contextVariables=[];function clearContext(){contextVariables=[]}function registerContext(variableName,
callback){contextVariables.push({variableName:variableName,callback:callback});var variables=getContextVariables();function replacer(match){return variables[match.substr(2).slice(0,-1)]||""}if(dyduUtils.isDefined(configs.get("userId"))&&configs.get("userId").indexOf("${")!==-1){var parsed=configs.get("userId").replace(/\${.*?}/gi,replacer);context.setUserId(parsed)}}function getContextVariables(){var variables;if(contextVariables.length>0){variables={};for(var i=0;i<contextVariables.length;i++)try{var result;
if(typeof contextVariables[i].callback==="function")result=contextVariables[i].callback();else result=contextVariables[i].callback;var value=""+result;if(value!=="_ignore_")variables[contextVariables[i].variableName]=value}catch(errorThrown){log.error("DYDU Impossible to set contextVariable : "+contextVariables[i].variableName,errorThrown)}}return variables}function getClientId(setCookie){var clientId=context.getData(COMMON_COOKIES.CLIENT_ID,"");if(setCookie){if(clientId===""||clientId.toString().replace(/^\s+/,
"").replace(/\s+$/,"")==="")clientId=makeId(15);context.setData(COMMON_COOKIES.CLIENT_ID,clientId,{expires:365*24,expirationUnit:"hours",path:COOKIES_OPTION.path,domain:COOKIES_OPTION.domain})}return clientId}function makeId(length){var text="";var possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<length;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text}function alreadyCame(){var clientId=this.getClientId(false);return clientId!==
null&&clientId!==""}return context}angular.module("contextModule").factory("$context",["$configurations","$cookieModule",function($configurations,$cookieModule){configs=$configurations;cookies=$cookieModule;cookiesDisabled=$configurations.get("cookiesDisabled");dydu.enableCookies=function(enableCookies){cookiesDisabled=!enableCookies};return createOrGetContext()}]);angular.module("contextModule").run(function($rootScope,$context,$log){log=$log;$rootScope.$subscribe(globalMediatorChannels.RESET_CONTEXT_DATA,
resetContext);$rootScope.$subscribe(globalMediatorChannels.UPDATE_CONTEXT_ID,setContextId);$rootScope.$subscribe(globalMediatorChannels.UPDATE_LANGUAGE,setCurrentLanguage);$rootScope.$subscribe(globalMediatorChannels.UPDATE_LAST_QUESTION,setLastQuestion);$rootScope.$subscribe(globalMediatorChannels.UPDATE_SPACE,setCurrentSpace);$rootScope.$subscribe(globalMediatorChannels.UPDATE_SERVER_TIME,setServerTime);$rootScope.$subscribe(globalMediatorChannels.UPDATE_COMPETENCY,setCompetency);$rootScope.$subscribe(globalMediatorChannels.UPDATE_SERVLET_URL,
setServletToUse);$rootScope.$subscribe(globalMediatorChannels.GET_CONTEXT_RESPONSE,getContextResponseHandler);$rootScope.$subscribe(globalMediatorChannels.SERVLET_RECEIVE,updateFromAnswer);currentContextIds=cookies(COMMON_COOKIES.CONTEXT_ID)||{"":""};function resetContext(event){currentLanguage=configs.get("language");currentSpace=configs.get("consultationSpace");setContextId(event,{contextId:"",botId:context.getBotId()});$context.removeData(COMMON_COOKIES.LANGUAGE);$context.removeData(COMMON_COOKIES.SPACE)}
function setCurrentLanguage(event,newLanguage){if(typeof configs.get("possibleLanguages")!=="undefined"){var i=0;while(i<configs.get("possibleLanguages").length&&configs.get("possibleLanguages")[i]!==newLanguage)i++;if(i<configs.get("possibleLanguages").length){currentLanguage=newLanguage;$context.setData(COMMON_COOKIES.LANGUAGE,currentLanguage,COOKIES_OPTION)}else log.error("Unknown language")}}function setContextId(event,contextInfo){var botId=contextInfo.botId||context.getBotId();var contextId=
contextInfo.contextId;var previousContextId=$context.getContextId(botId);if(contextId!==previousContextId&&previousContextId!==null)$context.setData(COMMON_COOKIES.LAST_CONTEXT_ID,previousContextId,COOKIES_OPTION);var oldContext=currentContextIds[botId];currentContextIds[botId]=contextId;$context.setData(COMMON_COOKIES.CONTEXT_ID,currentContextIds,COOKIES_OPTION);if(oldContext!==contextId)$rootScope.$publish(globalMediatorChannels.CONTEXT_ID_CHANGED,{bot:botId,old:oldContext,next:contextId})}function setCurrentSpace(event,
newSpace){currentSpace=newSpace;$context.setData(COMMON_COOKIES.SPACE,currentSpace,COOKIES_OPTION)}function setLastQuestion(event,newLastQuestion){lastQuestion=newLastQuestion;$context.setData(COMMON_COOKIES.LAST_QUESTION,lastQuestion,COOKIES_OPTION)}function setCompetency(event,newCompetency){competency=newCompetency;$context.setData(COMMON_COOKIES.COMPETENCY,competency,COOKIES_OPTION)}function setServletToUse(event,servlet){servletToUse=servlet}function getContextResponseHandler(event,response){setContextId(event,
{botId:response.botId,contextId:response.contextId})}function updateFromAnswer(event,response){if(dyduUtils.isDefined(response)&&dyduUtils.isDefined(response.competency))setCompetency(event,response.competency)}function setServerTime(event,time){if(!dyduUtils.isDefined(serverTime)){serverTime.value=0;serverTime.spec={}}for(var spec in time)if(time.hasOwnProperty(spec)&&(dyduUtils.isNotDefined(serverTime[spec])||time[spec]===0||time[spec]>serverTime.spec[spec]))serverTime.spec[spec]=time[spec];if(time===
0||time>serverTime.value)serverTime.value=time}})})();
angular.module("generalModule").run(function($rootScope,$context,$log){dydu.registerEventReceiver=registerEventReceiver;dydu.registerContext=registerContext;dydu.clearContext=clearContext;dydu.setDialogVariable=setDialogVariable;dydu.addInternautEvent=addInternautEvent;function registerContext(variableName,value){$context.registerContext(variableName,value)}function clearContext(){$context.clearContext()}function registerEventReceiver(eventName,eventReceiverFn){var oldVersion=false;if(arguments.length===
1){eventReceiverFn=eventName;eventName=ALL_EVENTS;oldVersion=true}var callback;if(typeof eventReceiverFn==="string")callback=window[eventReceiverFn];else callback=eventReceiverFn;if(typeof callback!=="function"){$log.error("Try to register a callback on "+eventName+"but "+eventReceiverFn+" is not a function");return}var adaptedCallback=function(){if(oldVersion)return function(evt,args){callback(args[0],args[1],args[2])};else return function(evt,values){callback(values)}}();$rootScope.$subscribe(eventName,
adaptedCallback)}function setDialogVariable(variableName,value){var realValue=typeof value==="function"?value():value;$rootScope.$publish(globalMediatorChannels.SET_OR_DELETE_VARIABLE,{name:variableName,value:realValue})}function addInternautEvent(eventName,eventValue){var realValue=typeof eventValue==="function"?eventValue():eventValue;$rootScope.$publish(globalMediatorChannels.ADD_INTERNAUT_EVENT,{eventName:eventName,eventValue:realValue})}});
angular.module("generalModule").run(function($rootScope,$context,$log){$rootScope.$subscribe(globalMediatorChannels.INITIALIZATION_SUCCESSFUL,initializationSuccessfulHandler);function initializationSuccessfulHandler(){if(typeof dydu.afterLoad==="function")dydu.afterLoad();if(typeof window.dyduAfterLoad==="function")window.dyduAfterLoad()}});
angular.module("messageFactoryModule").factory("$messageFactory",["$context","$configurations",function($context,$configurations){var factory={addContextParameters:function(message,type){if($context.getContextId()!=="")message.contextId=$context.getContextId();if(dyduUtils.isDefined($context.getBotId()))message.botId=$context.getBotId();if(dyduUtils.isDefined($context.getCompetency()))message.competency=$context.getCompetency();if($context.isQualificationMode())message.qualificationMode=$context.isQualificationMode();
if(dyduUtils.isDefined($context.getCurrentLanguage()))message.language=$context.getCurrentLanguage();if(typeof $context.getCurrentSpace()!=="undefined"){message.space="CONNAISSANCES_GENERIQUES_ASSURANCE";if(angular.isDefined($context.getContextVariables("ENTITE_NAME")))if($context.getContextVariables("ENTITE_NAME").ENTITE_NAME==="FREAASPRD")message.space="EURO_ASSURANCE";else if($context.getContextVariables("ENTITE_NAME").ENTITE_NAME==="FRA2ASPRD")message.space="ASSU_2000";else if($context.getContextVariables("ENTITE_NAME").ENTITE_NAME===
"FRMXASPRD")message.space="MAXANCE";else if($context.getContextVariables("ENTITE_NAME").ENTITE_NAME==="FRAOASPRD")message.space="ASSUREO";else;}if(dyduUtils.isDefined($context.getSolutionUsed))message.solutionUsed=$context.getSolutionUsed();if(dyduUtils.isDefined($context.getUserId())&&$context.getUserId()!=="")message.userId=$context.getUserId();var setCookie=type!=="welcomecall";if(dyduUtils.isDefined($context.getClientId(setCookie)))message.clientId=$context.getClientId(setCookie);message.useServerCookieForContext=
$configurations.get("useServerCookieForContext")||false;var securityTokenVariableName=$configurations.get("securityTokenVariableName");var securityTokenDateVariableName=$configurations.get("securityTokenDateVariableName");if(""!==securityTokenVariableName&&dyduUtils.isDefined(window[securityTokenVariableName]))message.securityToken=window[securityTokenVariableName];if(""!==securityTokenDateVariableName&&dyduUtils.isDefined(window[securityTokenDateVariableName]))message.securityTokenDate=window[securityTokenDateVariableName]},
createFeedBackMessage:function(isPositive){var request={type:"feedback",parameters:{feedback:isPositive?"positive":"negative"}};factory.addContextParameters(request.parameters,request.type);return request},createFeedBackChoiceMessage:function(choiceKey){var request={type:"feedbackInsatisfactionChoice",parameters:{choiceKey:""+choiceKey}};factory.addContextParameters(request.parameters,request.type);return request},createFeedBackCommentMessage:function(commentValue){var request={type:"feedbackComment",
parameters:{comment:commentValue}};factory.addContextParameters(request.parameters,request.type);return request},createGetContextMessage:function(){var request={type:"getContext",parameters:{userUrl:window.location.href,alreadyCame:$context.alreadyCame(),os:dyduUtils.getOsInfo(),browser:dyduUtils.getBrowserInfo(),disableLanguageDetection:!($configurations.get("languageDetection")||false),contextType:"Web",mode:"Synchron"}};var variables=$context.getContextVariables();if(dyduUtils.isDefined(variables))request.parameters.variables=
variables;factory.addContextParameters(request.parameters,request.type);delete request.parameters.contextId;return request},createErrorMessage:function(params){var request={type:"error",parameters:{error:params.error,message:params.message,stackTrace:params.stackTrace,browser:dyduUtils.getBrowserInfo(),os:dyduUtils.getOsInfo(),userUrl:window.location.href,version:"Chatbox V4",jsCreation:JS_CREATION}};factory.addContextParameters(request.parameters,request.type);return request},createSetOrDeleteVariableMessage:function(params){var request=
{type:"setOrDeleteVariable",parameters:{name:params.name,value:params.value}};factory.addContextParameters(request.parameters,request.type);return request},createAddInternautEventMessage:function(params){var request={type:"addInternautEvent",parameters:{eventName:params.eventName,eventValue:params.eventValue}};factory.addContextParameters(request.parameters,request.type);return request},createWelcomeCallMessage:function(){var request={type:"welcomecall",parameters:{}};factory.addContextParameters(request.parameters,
request.type);return request},createFieldboxProactiveMessage:function(inputValue,maxSuggestionNumber){var request={type:"fieldboxproactive",parameters:{alreadyCame:$context.alreadyCame(),maxAnswerNumber:maxSuggestionNumber,userInput:inputValue,browser:dyduUtils.getBrowserInfo(),os:dyduUtils.getOsInfo(),userUrl:window.location.href}};var variables=$context.getContextVariables();if(dyduUtils.isDefined(variables))request.parameters.variables=variables;factory.addContextParameters(request.parameters,
request.type);return request},createTopKnowledgeRequest:function(parameters){var request={type:"topknowledge",parameters:{withContent:parameters.withContent,tag:parameters.tag,includeTagChildren:parameters.includeTagChildren,maxKnowledge:parameters.maxKnowledge,period:parameters.period,contextVariables:$context.getTopKnowledgeContextVariables()}};factory.addContextParameters(request.parameters,request.type);return request},createKnowledgeSpacesListRequest:function(parameters){var request={type:"spacesList",
parameters:{knowledgeId:parameters.knowledgeId}};factory.addContextParameters(request.parameters,request.type);return request},createGdprRequest:function(parameters){var request={type:"GDPR",parameters:{object:parameters.object,mail:parameters.mail}};factory.addContextParameters(request.parameters,request.type);return request}};return factory}]);
angular.module("contextMessageModule").run(function($rootScope,$context,$messageFactory){function requestNewContextId(){if(!$context.hasContextId())$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createGetContextMessage())}$rootScope.$subscribe(globalMediatorChannels.REQUEST_NEW_CONTEXT_ID,requestNewContextId)});
angular.module("contextMessageModule").run(function($rootScope,$context,$messageFactory){$rootScope.$subscribe(globalMediatorChannels.SET_OR_DELETE_VARIABLE,setOrDeleteVariableHandler);$rootScope.$subscribe(globalMediatorChannels.CONTEXT_ID_CHANGED,setWaitingVariables);var contextVariableRequested=false;var variablesWaitingToBeSet=[];function setOrDeleteVariableHandler(evt,params){if($context.hasContextId())$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createSetOrDeleteVariableMessage(params));
else{variablesWaitingToBeSet.push(params);if(!contextVariableRequested)$rootScope.$publish(globalMediatorChannels.REQUEST_NEW_CONTEXT_ID)}}function setWaitingVariables(){var variableToSet=variablesWaitingToBeSet.pop();while(dyduUtils.isDefined(variableToSet)){$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createSetOrDeleteVariableMessage(variableToSet));variableToSet=variablesWaitingToBeSet.pop()}}});
angular.module("contextMessageModule").run(function($rootScope,$context,$messageFactory){$rootScope.$subscribe(globalMediatorChannels.ADD_INTERNAUT_EVENT,addInternautEventHandler);$rootScope.$subscribe(globalMediatorChannels.CONTEXT_ID_CHANGED,contextIdChangedEventHandler);function addInternautEventHandler(evt,params){$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createAddInternautEventMessage(params))}function contextIdChangedEventHandler(evt,params){if(params.next!=="")$rootScope.$publish(globalMediatorChannels.ADD_INTERNAUT_EVENT,
{eventName:"dialog_start",eventValue:params.next})}});
angular.module("pingModule").factory("$ping",["$http","$timeout",function($http,$timeout){var pingService={ping:ping};var TIMEOUT_DURATION=1E3;function ping(url,successHandler,errHandler){var timer=$timeout(errHandler,TIMEOUT_DURATION);var start=(new Date).getTime();url+=(url.indexOf("?")===-1?"?":"\x26")+"cachebreaker\x3d"+start;$http.get(url).success(function(data){var okValues=["Ok","Warning"];var serverStatus=data.status;if(okValues.indexOf(serverStatus)!=-1){successHandler(data);$timeout.cancel(timer)}else errHandler(data)}).error(function(data){errHandler(data)})}
return pingService}]);
angular.module("serverAvailabilityModule").run(function($rootScope,$ping,$context,$configurations,$timeout){$rootScope.$subscribe(globalMediatorChannels.CHECK_SERVER_AVAILABILITY,checkServerAvailability);var mustUseBackupUrl=false;var tries=1;var MAX_TRIES=2;function checkServerAvailability(){if(mustUseBackupUrl)return;try{if(dyduUtils.isDefined(window.console))console.debug("DYDU checkServerAccessibility with tries\x3d"+tries);var url=$configurations.get("servletUrl")+"/api/serverstatus";$ping.ping(url,
publishUrlToUse,retryPingOrPublish)}catch(e){return}}function publishUrlToUse(){$rootScope.$publish(globalMediatorChannels.UPDATE_SERVLET_URL,getServletUrlToUse())}function retryPingOrPublish(){if(tries===MAX_TRIES){if(canSwitchToBackup())mustUseBackupUrl=true;publishUrlToUse()}else{tries++;$timeout(checkServerAvailability,2E3)}}function canSwitchToBackup(){return $configurations.get("backupServletUrl")!==$configurations.get("servletUrl")&&$context.getMode()==="Synchron"}function getServletUrlToUse(){if(mustUseBackupUrl)return $configurations.get("backupServletUrl");
return $configurations.get("servletUrl")}});
var WEB_SOCKET_FAILED_COOKIE="dydu.websocket.failed";
angular.module("servletModule").run(function($servlet,$rootScope){function servletEmitHandler(evt,msg){$servlet.emit(evt,msg)}$rootScope.$subscribe(globalMediatorChannels.SERVLET_EMIT,servletEmitHandler);$rootScope.$subscribe(globalMediatorChannels.UPDATE_SERVLET_URL,$servlet.setServletUrl)}).factory("$servlet",["$rootScope","$http","base64","$configurations","$log","$timeout","$cookieModule",function($rootScope,$http,base64,$configurations,$log,$timeout,$cookieModule){var mainSocket;var servletService;
var messagesToSend=[];var servletUrlToUse=$configurations.get("servletUrl");function connectToServer(isError){var tries=1;function createWebSocket(){mainSocket=new WebSocket(servletUrlToUse.replace("https","wss")+"/chatWs","dyduchat");mainSocket.onopen=function(){var msgToSend=messagesToSend.pop();while(dyduUtils.isDefined(msgToSend)){mainSocket.send(JSON.stringify(createMessage(msgToSend)));msgToSend=messagesToSend.pop()}};mainSocket.onmessage=function(message){var response=JSON.parse(message.data);
var params=decodeParameters(response.values,base64);$rootScope.$publish(globalMediatorChannels.SERVLET_RECEIVE,dyduUtils.clone(params));$rootScope.$publish(SERVLET_RESPONSE_TYPE_PREFIX+response.type,dyduUtils.clone(params))};mainSocket.onclose=function(event){if(!event.wasClean&&!isError){$log.error("WebSocket closed with error code "+event.code+" with tries\x3d"+tries+" and reason :'"+event.reason+"'");tries++;if(tries===2){$rootScope.$publish(globalMediatorChannels.CHECK_SERVER_AVAILABILITY);createWebSocket()}else if(tries<=
4)$timeout(createWebSocket,2E3);else revertToJsonp()}}}createWebSocket()}function revertToJsonp(){var msgToSend=messagesToSend.pop();while(dyduUtils.isDefined(msgToSend)){emitJsonp(null,msgToSend);msgToSend=messagesToSend.pop()}servletService.emit=emitJsonp;var optionsClone=dyduUtils.clone(COOKIES_OPTION);delete optionsClone["expires"];delete optionsClone["expirationUnit"];$cookieModule(WEB_SOCKET_FAILED_COOKIE,"true",optionsClone)}function createMessage(msg,encode){var message=dyduUtils.clone(msg);
message.parameters.timestamp=(new Date).getTime();if(encode)message.parameters=encodeParameters(message.parameters,base64);return message}function setServletUrl(evt,servletUrl){servletUrlToUse=servletUrl}function emitWs(event,msg){var msgToSend=createMessage(msg,true);var isError=msgToSend.type==="error";if(dyduUtils.isNotDefined(mainSocket)){connectToServer(isError);messagesToSend.push(msg)}else if(WebSocket.CONNECTING===mainSocket.readyState)messagesToSend.push(msg);else if(WebSocket.OPEN===mainSocket.readyState)mainSocket.send(JSON.stringify(msgToSend));
else{if(dyduUtils.isDefined(window.console))console.log("Socket is closed or closing.");mainSocket=undefined}}function emitJsonp(event,msg,tries){tries=tries||1;msg=createMessage(msg,tries===1);msg.callback="JSON_CALLBACK";var isError=msg.type==="error";function sendRequest(){var uri=servletUrlToUse+"/chatHttp?data\x3d"+encodeURI(JSON.stringify(msg));$http.jsonp(uri).success(function(data){var params=decodeParameters(data.values,base64);$rootScope.$publish(globalMediatorChannels.SERVLET_RECEIVE,params);
$rootScope.$publish(SERVLET_RESPONSE_TYPE_PREFIX+data.type,params)}).error(function(data,status){if(!isError&&tries<10){$log.error("[Error "+status+"] Reason "+data);$log.error("[Error "+status+"] URL "+uri);if(status>=500&&status<600)setServletURL($configurations.get("backupServletUrl"));emitJsonp(event,msg,++tries)}})}sendRequest()}function createEmitFunction(){if(useWebsocket())return emitWs;return emitJsonp}function useWebsocket(){return $configurations.get("useWebSocketIfPossible")&&dyduUtils.isDefined(window.WebSocket)&&
"true"!==$cookieModule(WEB_SOCKET_FAILED_COOKIE)}servletService={emit:createEmitFunction(),setServletUrl:setServletUrl};return servletService}]);function isArray(obj){return Object.prototype.toString.call(obj)==="[object Array]"}
function transformObject(obj,transformer){if(dyduUtils.isNotDefined(obj))return;var tmpObj;if(isArray(obj)){tmpObj=[];for(var i=0;i<obj.length;i++)if(typeof obj[i]==="object")tmpObj.push(transformObject(obj[i],transformer));else if(typeof obj[i]==="string")tmpObj.push(transformer(obj[i]));else tmpObj.push(obj[i])}else{tmpObj={};for(key in obj)if(typeof obj[key]==="object")tmpObj[key]=transformObject(obj[key],transformer);else if(typeof obj[key]==="string")tmpObj[key]=transformer(obj[key]);else tmpObj[key]=
obj[key]}return tmpObj}function encodeParameters(params,base64){return transformObject(params,base64.encode)}function decodeParameters(params,base64){return transformObject(params,base64.decode)};
angular.module("servletModule").config(["$provide",function($provide){$provide.decorator("$browser",["$delegate",function($delegate){$delegate.onUrlChange=function(){};$delegate.url=function(){return""};return $delegate}])}]);
angular.module("resourceModule").config(function($provide){$provide.decorator("$rootScope",["$injector","$delegate","$log",function($injector,$delegate,$log){$delegate.resources={resources:resourcesConfiguration,get:function(key){var value;var $context=$injector.get("$context");try{value=this.resources[key][$context.getCurrentLanguage()]}catch(e){value=undefined}if(dyduUtils.isNotDefined(value)){$log.error("Resource not found "+key);value="";if(dyduUtils.isNotDefined(this.resources[key]))this.resources[key]=
{};this.resources[key][$context.getCurrentLanguage()]=value}return value}};return $delegate}])});
var chatboxMediatorChannels={CALLBACK_ENDED:"evt_chatbox_callback_ended",CALLBACK_STARTING:"evt_chatbox_callback_start_request",CALLBACK_STATE_UPDATE:"evt_chatbox_callback_state_update",COBROWSING_ACCEPTED:"evt_chatbox_cobrowsing_accepted",COBROWSING_DECLINED:"evt_chatbox_cobrowsing_declined",COBROWSING_ENDED:"evt_chatbox_cobrowsing_ended",COBROWSING_STARTED:"evt_chatbox_cobrowsing_started",COBROWSING_STATE_UPDATE:"evt_chatbox_cobrowsing_state_update",COBROWSING_STOP_REQUEST:"evt_chatbox_cobrowsing_stop_request",
CONFIRM_DIALOG_CANCEL:"evt_chatbox_confirm_dialog_cancel",CONFIRM_DIALOG_CONFIRM:"evt_chatbox_confirm_dialog_confirm",CONFIRM_DIALOG_UPDATE:"evt_chatbox_confirm_dialog_update",HISTORY_RELOAD:"evt_chatbox_reload_history",INTERACTIONS_UPDATE:"evt_chatbox_update_interactions",INTERACTIONS_RESET:"evt_chatbox_reset_interactions",INTERACTIONS_HIDE_WELCOME_SENTENCE_UPDATE:"evt_chatbox_hide_welcome_sentence_update",LIVE_CHAT_START_REQUEST:"evt_chatbox_livechat_start_request",LIVE_CHAT_END_REQUEST:"evt_chatbox_livechat_end_request",
LIVE_CHAT_LEAVE_QUEUE_REQUEST:"evt_chatbox_livechat_leave_queue_request",LIVE_CHAT_STARTED:"evt_chatbox_livechat_started",LIVE_CHAT_ENDED:"evt_chatbox_livechat_ended",LIVE_CHAT_POLL_REQUEST:"evt_chatbox_livechat_poll_request",LIVE_CHAT_UPDATE_QUEUE_INFO:"evt_chatbox_livechat_update_queue_status",LIVE_CHAT_UPDATE_OPERATOR_CONNECTED:"evt_chatbox_livechat_update_operator_connected",LIVE_CHAT_UPDATE_MONITORED_DIALOG:"evt_chatbox_monitored_dialog_update",LOAD_CHATBOX:"evt_chatbox_load_chatbox",NEW_RESPONSE_RECEIVED:"evt_chatbox_new_response_received",
POLLING_START:"evt_chatbox_polling_start",POLLING_STOP:"evt_chatbox_polling_stop",POPIN_CLOSE_REQUEST:"evt_chatbox_close_popin_request",POPIN_UPDATE:"evt_chatbox_update_popin",POPIN_RESET:"evt_chatbox_reset_popin",POPIN_MINIMIZED:"evt_chatbox_minimize_popin",POPIN_DISPLAYED:"evt_chatbox_display_popin",POPIN_DRAGGED:"evt_chatbox_popin_dragged",POPIN_DRAGGED_END:"evt_chatbox_popin_dragged_end",PREVIOUS_DIALOG_LOADING_REQUEST:"evt_chatbox_previous_dialogs_loading_request",PREVIOUS_DIALOGS_GET_REQUEST:"evt_chatbox_previous_dialogs_get_request",
PREVIOUS_DIALOGS_INTERACTIONS_UPDATE:"evt_chatbox_previous_dialogs_interactions_update",PREVIOUS_DIALOGS_RESET:"evt_chatbox_previous_dialogs_reset",PREVIOUS_DIALOGS_UPDATE:"evt_chatbox_previous_dialogs_update",PRINT_DIALOG_REQUEST:"evt_chatbox_print_dialog_request",LOCK_TEXTFIELD:"evt_chatbox_lock_textfield",UNLOCK_TEXTFIELD:"evt_chatbox_unlock_textfield",SEND_DIALOG_BY_MAIL_REQUEST:"evt_chatbox_send_dialog_by_mail_request",SIDEBAR_UPDATE:"evt_chatbox_update_sidebar",SIDEBAR_RESET:"evt_chatbox_reset_sidebar",
STEP_ACTION_REQUEST_NEXT:"evt_chatbox_step_action_request_next",STEP_ACTION_REQUEST_PREVIOUS:"evt_chatbox_step_action_request_previous",TEASER_UPDATE:"evt_chatbox_update_teaser",TEASER_RESET:"evt_chatbox_reset_teaser",TEASER_CLICKED:"evt_chatbox_clicked_teaser",TEASER_ACTION:"evt_chatbox_teaser_action",TEXTFIELD_FOCUSED:"evt_chatbox_textfield_focused",VIDEOCHAT_ACCEPTED:"evt_chatbox_videochat_accepted",VIDEOCHAT_DECLINED:"evt_chatbox_videochat_declined",VIDEOCHAT_ENDED:"evt_chatbox_videochat_ended",
VIDEOCHAT_SUPPORTED:"evt_chatbox_videochat_supported",VIDEOCHAT_STARTED:"evt_chatbox_videochat_started",VIDEOCHAT_STATE_UPDATE:"evt_chatbox_videochat_state_update",VIDEOCHAT_STOP_REQUEST:"evt_chatbox_videochat_stop_request",USER_TYPING:"evt_chatbox_user_typing",RACKBOT_HISTORY_RELOAD:"evt_chatbox_rack_reload_history",RACKBOT_INTERACTION:"evt_chatbox_rack_interaction",RACKBOT_TALKRESPONSE:"evt_chatbox_rack_talk_response",RACKBOT_SELECT_RESPONSE:"evt_chatbox_rack_select_response",SAVE_INTERACTION_RESPONSE:SERVLET_RESPONSE_TYPE_PREFIX+
"saveInteractionResponse",TALK_RESPONSE:SERVLET_RESPONSE_TYPE_PREFIX+"talkResponse",SAML_REDIRECTION_RESPONSE:SERVLET_RESPONSE_TYPE_PREFIX+"SAML_redirection",HISTORY_RESPONSE:SERVLET_RESPONSE_TYPE_PREFIX+"historyResponse",NOTIFICATION:SERVLET_RESPONSE_TYPE_PREFIX+"notification",QUEUE_RESPONSE:SERVLET_RESPONSE_TYPE_PREFIX+"queueResponse",PREVIOUS_DIALOGS_GET_RESPONSE:SERVLET_RESPONSE_TYPE_PREFIX+"getPreviousDialogsResponse",GET_LAST_RESPONSE_RESPONSE:SERVLET_RESPONSE_TYPE_PREFIX+"getLastResponseResponse",
LIVECHAT_START_WITH_FIRST_OPERATOR:"evt_livechat_start_with_one_operator"};var COBROWSING_STATE={HIDDEN:"hidden",ASKING:"asking",LOADING:"loading",ERROR:"error",CONFIRM_END:"confirm_end"};var TALK_RESPONSE_EVENT=chatboxMediatorChannels.TALK_RESPONSE;var JSONP_CALLBACK_PREFIX="dydu.chatbox.callbacks.";window.dydu.chatbox={callbacks:angular.callbacks,EVENTS:angular.extend({},chatboxMediatorChannels)};var dydu=window.dydu.chatbox;angular.module("angular-inview",[]);
angular.module("monospaced.elastic",[]);angular.module("ngAnimate",[]);angular.module("ngMouseDrag",[]);angular.module("SAML2Module",["messageFactoryModule"]);angular.module("callbackModule",["dialogModule"]);angular.module("chatboxAnimationModule",["ngAnimate"]);angular.module("dialogModule",["contextMessageModule","toolsModule","angular-inview","monospaced.elastic","ngMouseDrag","html5.placeholder","notification","angularResizable","autoCompleteModule","gdprModule"]);
angular.module("livechatModule",["dialogModule"]);angular.module("teaserModule",["contextModule","toolsModule"]);angular.module("toolsModule",["contextModule"]);angular.module("chatboxApplication",["generalModule","servletModule","feedbackModule","teaserModule","livechatModule","triggerModule","topKnowledgeModule","surveyModule","pushModule","ngSanitize","messageFactoryModule","chatboxAnimationModule","logModule","welcomeCallModule","dyduApiModule","SAML2Module","callbackModule"]);
angular.module("messageFactoryModule").config(function($provide){$provide.decorator("$messageFactory",["$delegate","$context",function($delegate,$context){var baseCreateGetContextMessage=$delegate.createGetContextMessage;$delegate.createGetContextMessage=createGetContextMessage;$delegate.createTalkMessage=createTalkMessage;$delegate.createHistoryMessage=createHistoryMessage;$delegate.createPollMessage=createPollMessage;$delegate.createUserWritingMessage=createUserWritingMessage;$delegate.createGetPreviousDialogsMessage=
createGetPreviousDialogsMessage;$delegate.createGetLastResponseSentMessage=createGetLastResponseSentMessage;$delegate.createCallbackMessage=createCallbackMessage;$delegate.createSaveInteractionMessage=createSaveInteractionMessage;function createGetContextMessage(){var request=baseCreateGetContextMessage();var isPureLiveChat=dyduUtils.isDefined($context.isPureLivechat)?$context.isPureLivechat():false;request.parameters.pureLivechat=isPureLiveChat;return request}function createTalkMessage(rewordText,
options){var request=$delegate.createGetContextMessage();request.type="talk";request.parameters.userInput=rewordText;request.parameters.mode=$context.getMode();if(dyduUtils.isDefined($context.getTemplateFormats)&&dyduUtils.isDefined($context.getTemplateFormats()))request.parameters.templateFormats=$context.getTemplateFormats();if(dyduUtils.isDefined(options))request.parameters.extraParameters=options;$delegate.addContextParameters(request.parameters,request.type);return request}function createHistoryMessage(requestedDialog){var request=
{type:"history",parameters:{dialog:requestedDialog}};$delegate.addContextParameters(request.parameters,request.type);return request}function createPollMessage(){var request={type:"poll",parameters:{mode:"Polling",lastPoll:$context.getServerTime()}};$delegate.addContextParameters(request.parameters,request.type);return request}function createUserWritingMessage(typing,content){var request={type:"typing",parameters:{typing:typing,content:content}};$delegate.addContextParameters(request.parameters,request.type);
return request}function createGetPreviousDialogsMessage(){var request={type:"getPreviousDialogs",parameters:{}};$delegate.addContextParameters(request.parameters,request.type);return request}function createGetLastResponseSentMessage(){var request={type:"getLastResponse",parameters:{}};$delegate.addContextParameters(request.parameters,request.type);return request}function createSaveInteractionMessage(requestToSave,responseToSave){var request={type:"saveInteraction",parameters:{request:requestToSave,
response:responseToSave}};$delegate.addContextParameters(request.parameters,request.type);return request}function createCallbackMessage(userNumber){var request={type:"ChatCallBack",parameters:{userNumber:userNumber}};$delegate.addContextParameters(request.parameters,request.type);return request}return $delegate}])});
function processRewordOptions(options,rootScope){if(dyduUtils.isDefined(options)){if(dyduUtils.isDefined(options.csname)){rootScope.$publish(globalMediatorChannels.UPDATE_SPACE,options.csname);delete options["csname"];delete options["csid"]}var stringOptions={};for(key in options)if(options.hasOwnProperty(key))stringOptions[key]=""+options[key]}return stringOptions}
angular.module("dialogModule").run(function($rootScope,$context,$messageFactory){$rootScope.$subscribe(globalMediatorChannels.REWORD,rewordHandler);$rootScope.$subscribe(globalMediatorChannels.TOP_KNOWLEDGE_CLICKED,topKnowledgeClickedHandler);function rewordHandler(event,reword){if(dyduUtils.isSpecialKeyWord(reword.text))return;if(dyduUtils.isDefined($context.isRackMode)&&$context.isRackMode())return;$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createTalkMessage(reword.text,
processRewordOptions(reword.options,$rootScope)))}function topKnowledgeClickedHandler(event,knowledgeArticle){$rootScope.$publish(globalMediatorChannels.REWORD,{text:knowledgeArticle.reword,options:{hideFromUser:true}})}window.reword=reword;function reword(text,options){$rootScope.$publish(globalMediatorChannels.REWORD,{text:text,options:options})}});
angular.module("dialogModule").run(function($rootScope){$rootScope.$subscribe(chatboxMediatorChannels.TALK_RESPONSE,talkResponseHandler);$rootScope.$subscribe(chatboxMediatorChannels.SAVE_INTERACTION_RESPONSE,talkResponseHandler);function talkResponseHandler(event,response){$rootScope.$publish(globalMediatorChannels.UPDATE_CONTEXT_ID,{bot:response.botId,contextId:response.contextId})}});
angular.module("dialogModule").run(function($rootScope,$context){$rootScope.$subscribe(TALK_RESPONSE_EVENT,talkResponseHandler);function talkResponseHandler(event,values){$rootScope.$publish(globalMediatorChannels.UPDATE_LANGUAGE,values.language||$context.getCurrentLanguage())}});
angular.module("dialogModule").run(function($rootScope){$rootScope.$subscribe(TALK_RESPONSE_EVENT,talkResponseHandler);$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_POLL_REQUEST,pollRequestHandler);var haveToStopPoll=false;var haveAlreadyPoll=false;function talkResponseHandler(event,response){if(dyduUtils.isDefined(response.typeResponse)&&response.typeResponse==="NAWaitingWS"&&!haveAlreadyPoll){haveToStopPoll=true;$rootScope.$publish(chatboxMediatorChannels.POLLING_START)}else if(dyduUtils.isDefined(response.typeResponse)&&
response.typeResponse==="NAAsyncWSAnswer"&&haveToStopPoll){$rootScope.$publish(chatboxMediatorChannels.POLLING_STOP);haveToStopPoll=false;haveAlreadyPoll=false}}function pollRequestHandler(){haveAlreadyPoll=true}});
angular.module("dialogModule").run(function($rootScope,$timeout){$rootScope.$subscribe(TALK_RESPONSE_EVENT,talkResponseHandler);var currentTimer=null;function startTimerResponse(response,sec){currentTimer=$timeout(function(){currentTimer=null;$rootScope.$publish(TALK_RESPONSE_EVENT,response)},sec*1E3)}function cancelTimer(){if(null!=currentTimer){$timeout.cancel(currentTimer);currentTimer=null}}function talkResponseHandler(event,response){cancelTimer();var timerResponse=response.timerResponse;if(dyduUtils.isDefined(timerResponse)){if(dyduUtils.isDefined(timerResponse.knowledgeRedirect))timerResponse.text=
null;startTimerResponse(timerResponse,timerResponse.timerDuration||30)}if(dyduUtils.isDefined(response.knowledgeRedirect))$rootScope.$publish(globalMediatorChannels.REWORD,{text:response.knowledgeRedirect,options:{type:"redirection_knowledge"}})}});
angular.module("chatboxApplication").run(function($rootScope,$context,$log){dydu.togglePopin=togglePopin;dydu.setDialogVariableCalendar=setDialogVariableCalendar;dydu.toggleCalendarSelected=toggleCalendarSelected;dydu.getSelectBoxHeure=getSelectBoxHeure;dydu.rendezVous=rendezVous;dydu.rendezVousStandard=rendezVousStandard;dydu.rendezVousAgence=rendezVousAgence;dydu.rendezVousForMonth=rendezVousForMonth;dydu.setInputTypeAsk=setInputTypeAsk;function togglePopin(show){if(dyduUtils.isDefined($context.getPopinConfiguration)){var popinConfiguration=
$context.getPopinConfiguration();popinConfiguration.show=show;$rootScope.$publish(chatboxMediatorChannels.POPIN_UPDATE,popinConfiguration)}}function setInputTypeAsk(p_type){document.getElementById("dydu-textarea").style.display="none";document.getElementById("dydu-inputNumber").style.display="none";if("textarea"==p_type)document.getElementById("dydu-textarea").style.display="";else{document.getElementById("dydu-inputNumber").type=p_type;document.getElementById("dydu-inputNumber").style.display=""}}
function setDialogVariableCalendar(p_variable,p_valeur,p_reword){dydu.setDialogVariable(p_variable,p_valeur);$rootScope.$publish(globalMediatorChannels.REWORD,{text:p_reword});document.getElementsByClassName("ng-valid ng-dirty")[0].style.display="";document.getElementById("dydu-textbox").style.maxHeight="50px";document.getElementById("dydu-history").style.height=document.getElementById("dydu-chatbox").clientHeight-document.getElementById("dydu-header-popin").clientHeight-document.getElementById("dydu-textbox").clientHeight+
"px";document.getElementsByClassName("divCalendarParent")[0].style.display="none";document.getElementsByClassName("divCalendarParent")[0].innerHTML=""}function toggleCalendarSelected(p_td,p_mois,p_annee,p_dialogVariableJour,p_dialogVariableHeure,p_nextConnaissance,p_jourOuverture){var elementOld=window.selectedTd;if(!p_td&&elementOld)elementOld.className="day selectable selected";else if(elementOld)elementOld.className="day selectable";if(p_td){dydu.setDialogVariable(p_dialogVariableJour,p_td.innerText+
"/"+p_mois+"/"+p_annee);p_td.className="day selectable selected";window.selectedTd=p_td;document.getElementById("divHeure").style.display="";document.getElementsByClassName("divCalendar")[0].style.border="none";document.getElementById("divHeure").innerHTML=dydu.getSelectBoxHeure(p_td.innerText,p_mois,p_annee,p_dialogVariableHeure,p_nextConnaissance,p_jourOuverture)}}function rendezVous(p_dialogVariableJour,p_dialogVariableHeure,p_nextConnaissance){rendezVousStandard(p_dialogVariableJour,p_dialogVariableHeure,
p_nextConnaissance)}function rendezVousStandard(p_dialogVariableJour,p_dialogVariableHeure,p_nextConnaissance){calendrier(new Date,p_dialogVariableJour,p_dialogVariableHeure,p_nextConnaissance,"[['9:30-19:30'], ['9:30-19:30'], ['9:30-19:30'], ['9:30-19:30'], ['9:30-19:30'], ['9:30-19:30'], ['9:30-19:30']]")}function rendezVousAgence(p_dialogVariableJour,p_dialogVariableHeure,p_nextConnaissance){calendrier(new Date,p_dialogVariableJour,p_dialogVariableHeure,p_nextConnaissance,"[[], ['14:30-19:00'], ['9:30-12:30','14:00-19:00'], ['8:30-12:30','14:30-19:30'], ['8:30-12:30','14:30-19:30'], ['8:30-12:30','14:30-19:30'], ['9:30-12:30']]")}
function rendezVousForMonth(p_mois,p_annee,p_dialogVariableJour,p_dialogVariableHeure,p_nextConnaissance,p_jourOuverture){document.getElementById("calendarParent").innerHTML="";calendrier(new Date(p_annee,p_mois,1),p_dialogVariableJour,p_dialogVariableHeure,p_nextConnaissance,p_jourOuverture)}function calendrier(p_dateStart,p_dialogVariableJour,p_dialogVariableHeure,p_nextConnaissance,p_jourOuverture){var monthNames=["Janvier","F\u00e9vrier","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre",
"Octobre","Novembre","D\u00e9cembre"];var jours=["Lu","Ma","Me","Je","Ve","Sa","Di"];var monthDays=[31,28,31,30,31,30,31,31,30,31,30,31];var today=new Date;var backMonth=true;if(p_dateStart>today)today=p_dateStart;else backMonth=false;var thisDay=today.getDate();var year=today.getYear();year<=200?year+=1900:null;if(year%4==0&&year%100!=0||year%400==0)monthDays[1]=29;var nDays=monthDays[today.getMonth()];var firstDay=new Date(today);firstDay.setDate(0);firstDay.getDate()==2?firstDay.setDate(0):null;
var nextMonth=new Date(today);nextMonth.setMonth(nextMonth.getMonth()+1);var beforeMonth=new Date(today);beforeMonth.setMonth(beforeMonth.getMonth()-1);var tb='\x3cdiv id\x3d"divHeure" style\x3d"width:100%;display:none;"\x3e\x3c/div\x3e\x3cdiv class\x3d"divCalendar"\x3e\x3ctable class\x3d"tabCalendar"\x3e\x3ctr\x3e\x3cth';if(backMonth)tb+=' class\x3d"th move" onClick\x3d"dydu.chatbox.rendezVousForMonth('+beforeMonth.getMonth()+", "+beforeMonth.getFullYear()+", '"+p_dialogVariableJour+"', '"+p_dialogVariableHeure+
"', '"+p_nextConnaissance+"', '"+p_jourOuverture.replace(/'/g,"\\'")+"');\"\x3e\x3c";else tb+="\x3e\x3c/th\x3e";tb+='\x3cth class\x3d"th" colspan\x3d"5"\x3e'+monthNames[today.getMonth()]+" "+year+"\x3c/th\x3e"+'\x3cth class\x3d"th move" onClick\x3d"dydu.chatbox.rendezVousForMonth('+nextMonth.getMonth()+", "+nextMonth.getFullYear()+", '"+p_dialogVariableJour+"', '"+p_dialogVariableHeure+"', '"+p_nextConnaissance+"', '"+p_jourOuverture.replace(/'/g,"\\'")+"');\"\x3e\x3e\x3c/th\x3e"+"\x3c/tr\x3e";var tbr=
"\x3ctr\x3e";for(var i=0;i<jours.length;i++)tbr+='\x3ctd style\x3d"text-align: center;"\x3e'+jours[i]+"\x3c/td\x3e";tbr+="\x3c/tr\x3e";tb+=tbr;var tbr="\x3ctr\x3e";var startDay=firstDay.getDay();var column=0;for(var i=0;i<startDay;i++){tbr+="\x3ctd\x3e\x3c/td\x3e";column++}for(var i=1;i<=nDays;i++){var dayOfWeek=new Date(today.getFullYear(),today.getMonth(),i);if(p_jourOuverture&&eval(p_jourOuverture)[dayOfWeek.getDay()].length==0)tbr+='\x3ctd class\x3d"day"\x3e'+i+"\x3c/td\x3e";else{tbr+='\x3ctd id\x3d"day_'+
today.getTime()+"_"+i+'"';i>=thisDay?tbr+=' onClick\x3d"dydu.chatbox.toggleCalendarSelected(this, '+(today.getMonth()+1)+", "+today.getFullYear()+", '"+p_dialogVariableJour+"', '"+p_dialogVariableHeure+"' , '"+p_nextConnaissance+"', '"+p_jourOuverture.replace(/'/g,"\\'")+"');\"":"";i>=thisDay?tbr+=' class\x3d"day selectable"\x3e':tbr+=' class\x3d"day"\x3e';tbr+=i+"\x3c/td\x3e"}column++;if(column==7){tbr+="\x3c/tr\x3e\x3ctr\x3e";column=0}}tbr+="\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e";tb+=
tbr;document.getElementsByClassName("divCalendarParent")[0].style.display="";document.getElementById("calendarParent").innerHTML=tb;document.getElementsByClassName("ng-valid ng-dirty")[0].style.display="none";document.getElementById("dydu-textbox").style.maxHeight="390px";document.getElementById("dydu-history").style.height=document.getElementById("dydu-chatbox").clientHeight-document.getElementById("dydu-header-popin").clientHeight-document.getElementById("dydu-textbox").clientHeight+"px"}function getSelectBoxHeure(p_dateJour,
p_dateMois,p_dateAnnee,p_dialogVariable,p_nextConnaissance,p_jourOuverture){var dateStart=new Date(p_dateAnnee,p_dateMois-1,p_dateJour);var selectBoxHtml='\x3cselect class\x3d"selectCalendar" onchange\x3d"dydu.chatbox.setDialogVariableCalendar(\''+p_dialogVariable+"', this.value, '"+p_nextConnaissance+"');\"\x3e"+'\x3coption value\x3d"" selected\x3d"selected"\x3eA quelle heure ?\x3c/option\x3e';var horaire=eval(p_jourOuverture)[dateStart.getDay()];if(p_jourOuverture&&horaire.length>0)for(var i=0;i<
horaire.length;i++){var start=horaire[i].split("-")[0];var startHeure=Number(start.split(":")[0]);var startMinute=Number(start.split(":")[1]);dateStart.setHours(startHeure);dateStart.setMinutes(startMinute);var dateFin=new Date(dateStart);var end=horaire[i].split("-")[1];var endHeure=Number(end.split(":")[0]);var endMinute=Number(end.split(":")[1]);dateFin.setHours(endHeure);dateFin.setMinutes(endMinute);var dateNow=new Date;while(dateStart<=dateNow)dateStart.setMinutes(dateStart.getMinutes()+30);
while(dateStart<dateFin){selectBoxHtml+='\x3coption value\x3d"'+dateStart.getHours()+":"+dateStart.getMinutes()+'"\x3eentre '+(""+dateStart.getHours()).padStart(2,"0")+":"+(""+dateStart.getMinutes()).padStart(2,"0")+" et ";dateStart.setMinutes(dateStart.getMinutes()+30);selectBoxHtml+=(""+dateStart.getHours()).padStart(2,"0")+"h"+(""+dateStart.getMinutes()).padStart(2,"0")+"\x3c/option\x3e"}}selectBoxHtml+="\x3c/select\x3e";return selectBoxHtml}});
angular.module("chatboxApplication").controller("chatboxController",["$scope","$context","$configurations","$timeout",function($scope,$context,$configurations,$timeout){$scope.$subscribe(chatboxMediatorChannels.POPIN_UPDATE,popinUpdateHandler);$scope.$subscribe(chatboxMediatorChannels.TEASER_UPDATE,teaserUpdateHandler);$scope.$subscribe(chatboxMediatorChannels.SIDEBAR_UPDATE,sidebarUpdateHandler);$scope.$subscribe(chatboxMediatorChannels.LOAD_CHATBOX,loadChatboxHandler);$scope.$subscribe(chatboxMediatorChannels.VIDEOCHAT_ACCEPTED,
videochatAcceptedHandler);$scope.$subscribe(chatboxMediatorChannels.VIDEOCHAT_STOP_REQUEST,videochatStopRequestHandler);$scope.$subscribe(chatboxMediatorChannels.VIDEOCHAT_STATE_UPDATE,videochatStateUpdateHandler);var LOADING_STATES_COOKIE="dydu.loading.states";var loadingStates=$context.getData(LOADING_STATES_COOKIE,{teaser:$configurations.get("showTeaserOnLoad"),dialog:$configurations.get("showPopinOnLoad"),sidebar:$configurations.get("showPopinOnLoad"),sidebarContainerStyle:{}});var videoChatAccepted=
false;$scope.loadTeaser=loadingStates.teaser;$scope.loadDialog=loadingStates.dialog;$scope.loadSidebar=loadingStates.sidebar;$scope.sidebarContainerStyle=loadingStates.sidebarContainerStyle;$scope.isVideochat=isVideochat;try{$scope.showPopin=$context.getPopinConfiguration().show;$scope.showSidebar=$context.getSidebarConfiguration().show;$scope.loadDialog=$scope.loadDialog||$scope.showPopin;$scope.loadSidebar=$scope.loadSidebar||$scope.showSidebar}catch(e){$scope.showPopin=false;$scope.showSidebar=
false}try{$scope.showTeaser=$context.getTeaserConfiguration().show;$scope.loadTeaser=$scope.loadTeaser||$scope.showTeaser}catch(e){$scope.showTeaser=false}$scope.loadChatbox=$scope.loadTeaser||$scope.loadDialog||$scope.sidebar;function popinUpdateHandler(evt,popinConfiguration){$scope.showPopin=popinConfiguration.show;$scope.loadDialog=$scope.loadDialog||popinConfiguration.show;$scope.loadChatbox=$scope.loadChatbox||$scope.loadDialog;updateCookies();$timeout(function(){var element=document.getElementById("dydu-textarea");
if(element)element.focus()},650)}function teaserUpdateHandler(evt,teaserConfiguration){$scope.showTeaser=teaserConfiguration.show;$scope.loadTeaser=$scope.loadTeaser||teaserConfiguration.show;$scope.loadChatbox=$scope.loadChatbox||$scope.loadTeaser;updateCookies()}function sidebarUpdateHandler(evt,sidebarConfiguration){$scope.showSidebar=sidebarConfiguration.show;$scope.loadSidebar=$scope.loadSidebar||sidebarConfiguration.show;$scope.loadChatbox=$scope.loadChatbox||$scope.loadSidebar;$scope.sidebarContainerStyle=
sidebarConfiguration.containerStyle;updateCookies()}function loadChatboxHandler(){$scope.loadChatbox=true;$scope.loadDialog=true;updateCookies()}function updateCookies(){$context.setData(LOADING_STATES_COOKIE,{teaser:$scope.loadTeaser,dialog:$scope.loadDialog,sidebar:$scope.loadSidebar,sidebarContainerStyle:$scope.sidebarContainerStyle},COOKIES_OPTION)}function isVideochat(){return videoChatAccepted||dyduUtils.isDefined($context.isVideochatEnabled)&&$context.isVideochatEnabled()}function videochatAcceptedHandler(){videoChatAccepted=
true}function videochatStopRequestHandler(){videoChatAccepted=false}function videochatStateUpdateHandler(event,state){if(state===VIDEOCHAT_STATE.ERROR)videochatAccepted=false}}]);
(function(){var addWindowInViewItem,bindWindowEvents,checkInView,debounce,getBoundingClientRect,getViewportHeight,removeWindowInViewItem,trackInViewContainer,triggerInViewCallback,unbindWindowEvents,untrackInViewContainer,windowCheckInView,windowEventsHandler,_containersControllers,_windowEventsHandlerBinded,_windowInViewItems,__slice=[].slice;angular.module("angular-inview",[]).directive("inView",["$parse",function($parse){return{restrict:"A",require:"?^inViewContainer",link:function(scope,element,
attrs,containerController){var inViewFunc,item,options,performCheck,_ref,_ref1;if(!attrs.inView)return;inViewFunc=$parse(attrs.inView);item={element:element,wasInView:false,offset:0,customDebouncedCheck:null,callback:function($event,$inview,$inviewpart){if($event==null)$event={};return scope.$evalAsync(function(_this){return function(){$event.inViewTarget=element[0];return inViewFunc(scope,{"$event":$event,"$inview":$inview,"$inviewpart":$inviewpart})}}(this))}};if(attrs.inViewOptions!=null&&(options=
scope.$eval(attrs.inViewOptions))){item.offset=options.offset||[options.offsetTop||0,options.offsetBottom||0];if(options.debounce)item.customDebouncedCheck=debounce(function(event){return checkInView([item],element[0],event)},options.debounce)}performCheck=(_ref=(_ref1=item.customDebouncedCheck)!=null?_ref1:containerController!=null?containerController.checkInView:void 0)!=null?_ref:windowCheckInView;if(containerController!=null)containerController.addItem(item);else addWindowInViewItem(item);setTimeout(performCheck);
return scope.$on("$destroy",function(){if(containerController!=null)containerController.removeItem(item);return removeWindowInViewItem(item)})}}}]).directive("inViewContainer",function(){return{restrict:"AC",controller:["$element",function($element){this.items=[];this.addItem=function(item){return this.items.push(item)};this.removeItem=function(item){var i;return this.items=function(){var _i,_len,_ref,_results;_ref=this.items;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){i=_ref[_i];if(i!==item)_results.push(i)}return _results}.call(this)};
this.checkInView=function(_this){return function(event){var i,_i,_len,_ref;_ref=_this.items;for(_i=0,_len=_ref.length;_i<_len;_i++){i=_ref[_i];if(i.customDebouncedCheck!=null)i.customDebouncedCheck()}return checkInView(function(){var _j,_len1,_ref1,_results;_ref1=this.items;_results=[];for(_j=0,_len1=_ref1.length;_j<_len1;_j++){i=_ref1[_j];if(i.customDebouncedCheck==null)_results.push(i)}return _results}.call(_this),$element[0],event)}}(this);return this}],link:function(scope,element,attrs,controller){element.bind("scroll",
controller.checkInView);trackInViewContainer(controller);return scope.$on("$destroy",function(){element.unbind("scroll",controller.checkInView);return untrackInViewContainer(controller)})}}});_windowInViewItems=[];addWindowInViewItem=function(item){_windowInViewItems.push(item);return bindWindowEvents()};removeWindowInViewItem=function(item){var i;_windowInViewItems=function(){var _i,_len,_results;_results=[];for(_i=0,_len=_windowInViewItems.length;_i<_len;_i++){i=_windowInViewItems[_i];if(i!==item)_results.push(i)}return _results}();
return unbindWindowEvents()};_containersControllers=[];trackInViewContainer=function(controller){_containersControllers.push(controller);return bindWindowEvents()};untrackInViewContainer=function(container){var c;_containersControllers=function(){var _i,_len,_results;_results=[];for(_i=0,_len=_containersControllers.length;_i<_len;_i++){c=_containersControllers[_i];if(c!==container)_results.push(c)}return _results}();return unbindWindowEvents()};_windowEventsHandlerBinded=false;windowEventsHandler=
function(event){var c,_i,_len;for(_i=0,_len=_containersControllers.length;_i<_len;_i++){c=_containersControllers[_i];c.checkInView(event)}if(_windowInViewItems.length)return windowCheckInView(event)};bindWindowEvents=function(){if(_windowEventsHandlerBinded)return;_windowEventsHandlerBinded=true;return angular.element(window).bind("checkInView click ready scroll resize",windowEventsHandler)};unbindWindowEvents=function(){if(!_windowEventsHandlerBinded)return;if(_windowInViewItems.length||_containersControllers.length)return;
_windowEventsHandlerBinded=false;return angular.element(window).unbind("checkInView click ready scroll resize",windowEventsHandler)};triggerInViewCallback=function(event,item,inview,isTopVisible,isBottomVisible){var elOffsetTop,inviewpart;if(inview){elOffsetTop=getBoundingClientRect(item.element[0]).top+window.pageYOffset;inviewpart=isTopVisible&&isBottomVisible&&"neither"||isTopVisible&&"top"||isBottomVisible&&"bottom"||"both";if(!(item.wasInView&&item.wasInView===inviewpart&&elOffsetTop===item.lastOffsetTop)){item.lastOffsetTop=
elOffsetTop;item.wasInView=inviewpart;return item.callback(event,true,inviewpart)}}else if(item.wasInView){item.wasInView=false;return item.callback(event,false)}};checkInView=function(items,container,event){var bounds,boundsBottom,boundsTop,element,item,viewport,_i,_j,_len,_len1,_ref,_ref1,_ref2,_ref3,_results;viewport={top:0,bottom:getViewportHeight()};if(container&&container!==window){bounds=getBoundingClientRect(container);if(bounds.top>viewport.bottom||bounds.bottom<viewport.top){for(_i=0,_len=
items.length;_i<_len;_i++){item=items[_i];triggerInViewCallback(event,item,false)}return}if(bounds.top>viewport.top)viewport.top=bounds.top;if(bounds.bottom<viewport.bottom)viewport.bottom=bounds.bottom}_results=[];for(_j=0,_len1=items.length;_j<_len1;_j++){item=items[_j];element=item.element[0];bounds=getBoundingClientRect(element);boundsTop=bounds.top+parseInt((_ref=(_ref1=item.offset)!=null?_ref1[0]:void 0)!=null?_ref:item.offset);boundsBottom=bounds.bottom+parseInt((_ref2=(_ref3=item.offset)!=
null?_ref3[1]:void 0)!=null?_ref2:item.offset);if(boundsTop<viewport.bottom&&boundsBottom>=viewport.top)_results.push(triggerInViewCallback(event,item,true,boundsBottom>viewport.bottom,boundsTop<viewport.top));else _results.push(triggerInViewCallback(event,item,false))}return _results};getViewportHeight=function(){var height,mode,_ref;height=window.innerHeight;if(height)return height;mode=document.compatMode;if(mode||!(typeof $!=="undefined"&&$!==null?(_ref=$.support)!=null?_ref.boxModel:void 0:void 0))height=
mode==="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight;return height};getBoundingClientRect=function(element){var el,parent,top;if(element.getBoundingClientRect!=null)return element.getBoundingClientRect();top=0;el=element;while(el){top+=el.offsetTop;el=el.offsetParent}parent=element.parentElement;while(parent){if(parent.scrollTop!=null)top-=parent.scrollTop;parent=parent.parentElement}return{top:top,bottom:top+element.offsetHeight}};debounce=function(f,t){var timer;
timer=null;return function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];if(timer!=null)clearTimeout(timer);return timer=setTimeout(function(){return f.apply(null,args)},t!=null?t:100)}};windowCheckInView=function(event){var i,_i,_len;for(_i=0,_len=_windowInViewItems.length;_i<_len;_i++){i=_windowInViewItems[_i];if(i.customDebouncedCheck!=null)i.customDebouncedCheck()}return checkInView(function(){var _j,_len1,_results;_results=[];for(_j=0,_len1=_windowInViewItems.length;_j<_len1;_j++){i=
_windowInViewItems[_j];if(i.customDebouncedCheck==null)_results.push(i)}return _results}(),null,event)}}).call(this);
angular.module("monospaced.elastic",[]).constant("msdElasticConfig",{append:""}).directive("msdElastic",["$timeout","$window","msdElasticConfig",function($timeout,$window,config){return{require:"ngModel",restrict:"A, C",link:function(scope,element,attrs,ngModel){var ta=element[0],$ta=element;if(ta.nodeName!=="TEXTAREA"||!$window.getComputedStyle)return;$ta.css({"overflow":"hidden","overflow-y":"hidden","word-wrap":"break-word"});var text=ta.value;ta.value="";ta.value=text;var append=attrs.msdElastic?
attrs.msdElastic.replace(/\\n/g,"\n"):config.append,$win=angular.element($window),mirrorInitStyle="position: absolute; top: -999px; right: auto; bottom: auto;"+"left: 0; overflow: hidden; -webkit-box-sizing: content-box;"+"-moz-box-sizing: content-box; box-sizing: content-box;"+"min-height: 0 !important; height: 0 !important; padding: 0;"+"word-wrap: break-word; border: 0;",$mirror=angular.element('\x3ctextarea tabindex\x3d"-1" '+'style\x3d"'+mirrorInitStyle+'"/\x3e').data("elastic",true),mirror=
$mirror[0],taStyle=getComputedStyle(ta),resize=taStyle.getPropertyValue("resize"),borderBox=taStyle.getPropertyValue("box-sizing")==="border-box"||taStyle.getPropertyValue("-moz-box-sizing")==="border-box"||taStyle.getPropertyValue("-webkit-box-sizing")==="border-box",boxOuter=!borderBox?{width:0,height:0}:{width:parseInt(taStyle.getPropertyValue("border-right-width"),10)+parseInt(taStyle.getPropertyValue("padding-right"),10)+parseInt(taStyle.getPropertyValue("padding-left"),10)+parseInt(taStyle.getPropertyValue("border-left-width"),
10),height:parseInt(taStyle.getPropertyValue("border-top-width"),10)+parseInt(taStyle.getPropertyValue("padding-top"),10)+parseInt(taStyle.getPropertyValue("padding-bottom"),10)+parseInt(taStyle.getPropertyValue("border-bottom-width"),10)},minHeightValue=parseInt(taStyle.getPropertyValue("min-height"),10),heightValue=parseInt(taStyle.getPropertyValue("height"),10),minHeight=Math.max(minHeightValue,heightValue)-boxOuter.height,maxHeight=parseInt(taStyle.getPropertyValue("max-height"),10),mirrored,
active,copyStyle=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"];if($ta.data("elastic"))return;maxHeight=maxHeight&&maxHeight>0?maxHeight:9E4;if(mirror.parentNode!==document.body)angular.element(document.body).append(mirror);$ta.css({"resize":resize==="none"||resize==="vertical"?"none":"horizontal"}).data("elastic",true);function initMirror(){var mirrorStyle=mirrorInitStyle;mirrored=ta;taStyle=getComputedStyle(ta);
angular.forEach(copyStyle,function(val){mirrorStyle+=val+":"+taStyle.getPropertyValue(val)+";"});mirror.setAttribute("style",mirrorStyle)}function adjust(){var taHeight,taComputedStyleWidth,mirrorHeight,width,overflow;if(mirrored!==ta)initMirror();if(!active){active=true;mirror.value=ta.value+append;mirror.style.overflowY=ta.style.overflowY;taHeight=ta.style.height===""?"auto":parseInt(ta.style.height,10);taComputedStyleWidth=getComputedStyle(ta).getPropertyValue("width");if(taComputedStyleWidth.substr(taComputedStyleWidth.length-
2,2)==="px"){width=parseInt(taComputedStyleWidth,10)-boxOuter.width;mirror.style.width=width+"px"}mirrorHeight=mirror.scrollHeight;if(mirrorHeight>maxHeight){mirrorHeight=maxHeight;overflow="scroll"}else if(mirrorHeight<minHeight)mirrorHeight=minHeight;mirrorHeight+=boxOuter.height;ta.style.overflowY=overflow||"hidden";if(taHeight!==mirrorHeight){ta.style.height=mirrorHeight+"px";scope.$emit("elastic:resize",$ta)}$timeout(function(){active=false},1)}}function forceAdjust(){active=false;adjust()}if("onpropertychange"in
ta&&"oninput"in ta)ta["oninput"]=ta.onkeyup=adjust;else ta["oninput"]=adjust;$win.bind("resize",forceAdjust);scope.$watch(function(){return ngModel.$modelValue},function(newValue){forceAdjust()});scope.$on("elastic:adjust",function(){initMirror();forceAdjust()});$timeout(adjust);scope.$on("$destroy",function(){$mirror.remove();$win.unbind("resize",forceAdjust)})}}}]);
(function(){var ngMousedrag=angular.module("ngMouseDrag",[]);ngMousedrag.directive("ngMousedrag",["$document",function ngMousedrag($document){return{restrict:"A",link:function(scope,element,attrs){var endTypes="touchend mouseup",moveTypes="touchmove mousemove",startTypes="touchstart mousedown",startX,startY;element.bind(startTypes,function startDrag(e){e.preventDefault();startX=e.pageX;startY=e.pageY;$document.bind(moveTypes,function(e){e.dragX=e.pageX-startX;e.dragY=e.pageY-startY;e.startX=startX;
e.startY=startY;scope.$event=e;scope.$eval(attrs.ngMousedrag)});$document.bind(endTypes,function(){$document.unbind(moveTypes)})})}}}])})();
/*
 MIT
*/
angular.module("angularResizable",["configurationModule"]).directive("resizable",function($context,$rootScope,$configurations){if($configurations.get("userCanResizeSidebar")){var toCall;function throttle(fun){if(toCall===undefined){toCall=fun;setTimeout(function(){toCall();toCall=undefined},100)}else toCall=fun}return{restrict:"AE",scope:{rDirections:"\x3d",rCenteredX:"\x3d",rCenteredY:"\x3d",rWidth:"\x3d",rHeight:"\x3d",rFlex:"\x3d",rGrabber:"@",rDisabled:"@"},link:function(scope,element,attr){if(!window.getComputedStyle)window.getComputedStyle=
function(e){return e.currentStyle};if(typeof Array.prototype.forEach!="function")Array.prototype.forEach=function(callback){for(var i=0;i<this.length;i++)callback.apply(this,[this[i],i,this])};function bindEvent(element,eventName,handler){if(element.addEventListener)element.addEventListener(eventName,handler,false);else if(element.attachEvent)element.attachEvent("on"+eventName,handler)}function unbindEvent(element,eventName,handler){if(element.removeEventListener)element.removeEventListener(eventName,
handler,false);else if(element.detachEvent)element.detachEvent("on"+eventName,handler);else element["on"+eventName]=null}var flexBasis="flexBasis"in document.documentElement.style?"flexBasis":"webkitFlexBasis"in document.documentElement.style?"webkitFlexBasis":"msFlexPreferredSize"in document.documentElement.style?"msFlexPreferredSize":"flexBasis";scope.$watch("rWidth",function(value){if(dyduUtils.isDefined(scope.rWidth))element[0].style.width=scope.rWidth+"px"});scope.$watch("rHeight",function(value){if(dyduUtils.isDefined(scope.rWidth))element[0].style.height=
scope.rHeight+"px"});element.addClass("resizable");var style=window.getComputedStyle(element[0],null),w,h,dir=scope.rDirections,vx=scope.rCenteredX?2:1,vy=scope.rCenteredY?2:1,inner=scope.rGrabber?scope.rGrabber:"\x3cspan\x3e\x3c/span\x3e",start={x:null,y:null},dragDir,axis={x:null,y:null},info={};var updateInfo=function(e){info.width=false;info.height=false;if(axis.x==="x")info.width=parseInt(element[0].style[scope.rFlex?flexBasis:"width"]);if(axis.y==="y")info.height=parseInt(element[0].style[scope.rFlex?
flexBasis:"height"]);info.id=element[0].id;info.evt=e};function updateSidebarConfiguration(){var sidebarConfiguration=$context.getSidebarConfiguration();var width=parseInt(element[0].style[scope.rFlex?flexBasis:"width"]);var height=parseInt(element[0].style[scope.rFlex?flexBasis:"height"]);sidebarConfiguration.contentStyle={};sidebarConfiguration.frameStyle={height:"90%",width:"100%"};sidebarConfiguration.containerStyle={height:height+"px",width:width+"px"};sidebarConfiguration.width=width;sidebarConfiguration.height=
height;sidebarConfiguration.ignoreConfiguredDimensions=true;$rootScope.$publish(chatboxMediatorChannels.SIDEBAR_UPDATE,sidebarConfiguration)}var dragging=function(e){var prop,offset={x:null,y:null};offset.x=axis.x==="x"?start.x-e.clientX:null;offset.y=axis.y==="y"?start.y-e.clientY:null;switch(dragDir){case "top":prop=scope.rFlex?flexBasis:"height";try{element[0].style[prop]=h+offset.y*vy+"px"}catch(e){}break;case "bottom":prop=scope.rFlex?flexBasis:"height";try{element[0].style[prop]=h-offset.y*
vy+"px"}catch(e){}break;case "right":prop=scope.rFlex?flexBasis:"width";try{element[0].style[prop]=w-offset.x*vx+"px"}catch(e){}break;case "left":prop=scope.rFlex?flexBasis:"width";try{element[0].style[prop]=w+offset.x*vx+"px"}catch(e){}break;case "top-left":prop=scope.rFlex?flexBasis:"height";try{element[0].style[prop]=h+offset.y*vy+"px"}catch(e){}prop=scope.rFlex?flexBasis:"width";try{element[0].style[prop]=w+offset.x*vx+"px"}catch(e){}break}updateInfo(e);throttle(function(){scope.$emit("angular-resizable.resizing",
info)})};var dragEnd=function(e){updateInfo();updateSidebarConfiguration();scope.$emit("angular-resizable.resizeEnd",info);scope.$apply();unbindEvent(document,"mouseup",dragEnd);unbindEvent(document,"mousemove",dragging);element.removeClass("no-transition")};var dragStart=function(e,direction){dragDir=direction;axis.x=dragDir==="left"||dragDir==="right"||dragDir==="top-left"?"x":null;axis.y=dragDir==="top"||dragDir==="bottom"||dragDir==="top-left"?"y":null;start.x=axis.x==="x"?e.clientX:null;start.y=
axis.y==="y"?e.clientY:null;w=parseInt(style.width);h=parseInt(style.height);element.addClass("no-transition");bindEvent(document,"mouseup",dragEnd);bindEvent(document,"mousemove",dragging);if(e.stopPropagation)e.stopPropagation();if(e.preventDefault)e.preventDefault();e.cancelBubble=true;e.returnValue=false;updateInfo(e);scope.$emit("angular-resizable.resizeStart",info);scope.$apply()};dir.forEach(function(direction){var grabber=document.createElement("div");var classAttr=document.createAttribute("class");
classAttr.value="rg-"+direction;grabber.setAttributeNode(classAttr);grabber.innerHTML=inner;element[0].appendChild(grabber);grabber.ondragstart=function(){return false};bindEvent(grabber,"mousedown",function(e){var disabled=scope.rDisabled==="true";if(!disabled)dragStart(e,direction)})})}}}else return{link:function(){}}});
angular.module("notification",[]).provider("$notification",$notificationProvider);
function $notificationProvider(){var provider=this;this.$get=["$window","$rootScope","$q",$notificationFactory];function $notificationFactory($window,$rootScope,$q){function NgNotification(title,options){if(!$window.Notification)return false;options=options||{};var self=this;this._events=[];function createNotification(){options=angular.extend({focusWindowOnClick:true},provider.options||{},options);try{self.baseNotification=new $window.Notification(title,options)}catch(error){return}if(options.delay)setTimeout(angular.bind(self,
self.close),options.delay);if(options.focusWindowOnClick)self.$on("click",function(){$window.focus()});self._events.forEach(function(args){self.$on.apply(self,args)});self._events=[]}if($window.Notification.permission==="granted")return createNotification();else if($window.Notification.permission!=="denied")NgNotification.requestPermission().then(createNotification)}NgNotification.prototype.$on=function $on(name,listener){var self=this;if(!this.baseNotification)return this._events.push([name,listener]);
this.baseNotification.addEventListener(name,applyListener);function applyListener(){var args=arguments;$rootScope.$apply(function(){listener.apply(self,args)})}return function $off(){this.baseNotification.removeListener(event,applyListener)}};NgNotification.prototype.close=function close(){if(this.baseNotification)this.baseNotification.close()};NgNotification.requestPermission=function(){var deferred=$q.defer();if(!$window.Notification)return deferred.reject();$window.Notification.requestPermission(function(permission){$window.Notification.permission=
$window.Notification.permission||permission;deferred.resolve($window.Notification.permission)});return deferred.promise};function $notification(title,options){return new NgNotification(title,options)}$notification.requestPermission=NgNotification.requestPermission;return $notification}this.setOptions=function setOptions(options){this.options=options}};
angular.module("dialogModule").run(function($context,$rootScope,$configurations){var POPIN_COOKIE="dydu.popin";var defaultPopinConfiguration={bottom:0,right:10,show:$configurations.get("showPopinOnLoad")};$context.getPopinConfiguration=getPopinConfiguration;function getPopinConfiguration(){return dyduUtils.clone($context.getData(POPIN_COOKIE,defaultPopinConfiguration))}function setPopinConfiguration(event,sidebar){$context.setData(POPIN_COOKIE,sidebar,COOKIES_OPTION)}function removePopinConfiguration(){$context.removeData(POPIN_COOKIE)}
function teaserClickedHandler(){var popinConfiguration=getPopinConfiguration();popinConfiguration.show=true;$rootScope.$publish(chatboxMediatorChannels.POPIN_UPDATE,popinConfiguration)}$rootScope.$subscribe(chatboxMediatorChannels.POPIN_UPDATE,setPopinConfiguration);$rootScope.$subscribe(chatboxMediatorChannels.POPIN_RESET,removePopinConfiguration);$rootScope.$subscribe(chatboxMediatorChannels.TEASER_CLICKED,teaserClickedHandler)});
angular.module("dialogModule").run(function($rootScope,$context,$timeout,$configurations,$window){var popin;var popinComputedStyle;var popinConfiguration=$context.getPopinConfiguration();var dragging=false;var popinInitialized=false;if($configurations.get("userCanMovePopin")){$rootScope.$subscribe(chatboxMediatorChannels.POPIN_DRAGGED,popinDraggedHandler);$rootScope.$subscribe(chatboxMediatorChannels.POPIN_DRAGGED_END,popinDraggedEndHandler);$rootScope.$subscribe(chatboxMediatorChannels.POPIN_UPDATE,
updatePopinHandler);if(dyduUtils.isDefined($window.addEventListener))$window.addEventListener("mouseup",windowMouseUpHandler);if(popinConfiguration.show)initPopin()}function windowMouseUpHandler(){if(dragging){$rootScope.$publish(chatboxMediatorChannels.POPIN_DRAGGED_END);dragging=false}}function popinDraggedHandler(evt,dragEvent){dragging=true;var position={bottom:popinConfiguration.bottom-dragEvent.dragY,right:popinConfiguration.right-dragEvent.dragX};popin.style.bottom=position.bottom+"px";popin.style.right=
position.right+"px"}function popinDraggedEndHandler(){if(dyduUtils.isDefined(popinComputedStyle)){popinConfiguration.bottom=parseInt(popinComputedStyle.bottom.replace("px",""));popinConfiguration.right=parseInt(popinComputedStyle.right.replace("px",""))}ensurePopinIsInWindow();popin.style.bottom=popinConfiguration.bottom+"px";popin.style.right=popinConfiguration.right+"px";$rootScope.$publish(chatboxMediatorChannels.POPIN_UPDATE,popinConfiguration)}function initPopin(){if(!popinInitialized){popin=
document.getElementById("dydu-popin");if(dyduUtils.isDefined(popin)){popinComputedStyle=popin.currentStyle||window.getComputedStyle(popin);popin.style.bottom=popinConfiguration.bottom+"px";popin.style.right=popinConfiguration.right+"px";popinInitialized=true}else $timeout(initPopin,100)}}function ensurePopinIsInWindow(){var chatboxHeight=30+parseInt(popinComputedStyle.height.replace("px",""));var chatboxWidth=dyduUtils.getPopinWidth();var maxBottom=dyduUtils.getWindowHeight()-chatboxHeight;var maxRight=
dyduUtils.getWindowWidth()-chatboxWidth;if(popinConfiguration.bottom>maxBottom)popinConfiguration.bottom=maxBottom;if(popinConfiguration.right>maxRight)popinConfiguration.right=maxRight;if(popinConfiguration.bottom<0)popinConfiguration.bottom=0;if(popinConfiguration.right<10)popinConfiguration.right=10}function updatePopinHandler(evt,updatedPopinConfiguration){popinConfiguration=updatedPopinConfiguration;if(popinConfiguration.show)initPopin()}});
angular.module("dialogModule").run(function($rootScope,$context,$messageFactory,$configurations){$rootScope.$subscribe(chatboxMediatorChannels.HISTORY_RELOAD,reloadHistoryHandler);$rootScope.$subscribe(chatboxMediatorChannels.HISTORY_RESPONSE,historyResponseHandler);var lastInteractionWithSidebar={};var hasContextAtLoading=typeof $context.getContextId()!=="undefined";function reloadHistoryHandler(){if(dyduUtils.isDefined($context.getContextId())&&$context.getContextId()!=="")$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,
$messageFactory.createHistoryMessage($context.getContextId()))}function historyResponseHandler(event,history){var interactions=extractInteractions(history);if(isPreviousDialogHistory(history))$rootScope.$publish(chatboxMediatorChannels.PREVIOUS_DIALOGS_INTERACTIONS_UPDATE,interactions);else{if($configurations.get("useServerCookieForContext"))restoreChatboxBasicState(interactions.length,history.livechatEnabled);if(!history.livechatEnabled&&!isRakeMode())$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_ENDED);
$rootScope.$publish(chatboxMediatorChannels.INTERACTIONS_UPDATE,interactions);if($context.getSidebarConfiguration().show)$context.setSidebarContentFor(lastInteractionWithSidebar)}$rootScope.$publish(globalMediatorChannels.UPDATE_SERVER_TIME,history.serverTime)}function isRakeMode(){return dyduUtils.isDefined($context.isRakeMode)&&$context.isRackMode()}function restoreChatboxBasicState(interactionsLength,livechat){if(livechat){dydu.togglePopin(true);$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_STARTED)}else if(!hasContextAtLoading&&
interactionsLength>0)dydu.togglePopin(true)}function extractInteractions(history){lastInteractionWithSidebar={};var interactions=[];var contextId=history.contextId;if(dyduUtils.isDefined(history.interactions))for(var i=0;i<history.interactions.length;i++){var historyLine=history.interactions[i];if(dyduUtils.isDefined(historyLine.user)){var sideBarTitle=null;if(angular.isDefined(historyLine.sidebar)&&historyLine.sidebar.title)sideBarTitle=historyLine.sidebar.title;interactions.push({text:historyLine.user,
from:$context.getUserLabel(),type:"request",contextId:contextId,date:dyduUtils.parseDate(historyLine.date),sideBarTitle:sideBarTitle})}if(dyduUtils.isDefined(historyLine.templateName))interactions.push({text:historyLine.text,templateFile:historyLine.templateName+".html",templateData:JSON.parse(historyLine.templateData),from:extractFrom(historyLine),type:dyduUtils.isDefined(historyLine.text)?"response":"template",contextId:contextId,operatorName:historyLine.operatorName,operatorLastName:historyLine.operatorLastName,
operatorMail:historyLine.operatorMail,operatorExternalId:historyLine.operatorExternalId,hasProfilePicture:dyduUtils.isDefined(historyLine.operatorExternalId),date:dyduUtils.parseDate(historyLine.date),sideBarTitle:sideBarTitle});else if(dyduUtils.isDefined(historyLine.text)||dyduUtils.isDefined(historyLine.sidebar)){var split=(historyLine.text||"").split('\x3chr class\x3d"split"\x3e');for(var index=0;index<split.length;index++)interactions.push({text:split[index],from:extractFrom(historyLine),type:"response",
contextId:contextId,operatorName:historyLine.operatorName,operatorExternalId:historyLine.operatorExternalId,hasProfilePicture:dyduUtils.isDefined(historyLine.operatorExternalId),date:dyduUtils.parseDate(historyLine.date),sideBarTitle:sideBarTitle})}if(dyduUtils.isDefined(historyLine.sidebar)){lastInteractionWithSidebar=interactions[interactions.length-1];$context.addSidebarContent(interactions[interactions.length-1],historyLine.sidebar)}}return interactions}function isOperatorNameDefined(){return dyduUtils.isDefined($context.isLivechatMode)&&
$context.isLivechatMode()&&dyduUtils.isDefined($context.getOperatorName())}function extractFrom(historyLine){if(historyLine.type==="DMClickRedirectionLink")if(!$configurations.get("useLabelForRedirection"))return"";else if($configurations.get("useBotLabelForRedirection"))return $context.getBotLabel();else if(isOperatorNameDefined())return $context.getOperatorLabel($context.getOperatorName(),$context.getOperatorLastName());return $context.getOperatorLabel(historyLine.operatorName,historyLine.operatorLastName)||
$context.getBotLabel()}function isPreviousDialogHistory(history){return history.contextId!==history.dialog}});
angular.module("dialogModule").run(function($rootScope,$context,$messageFactory,$configurations,$interval){$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_POLL_REQUEST,pollRequestHandler);$rootScope.$subscribe(chatboxMediatorChannels.POLLING_START,pollingStartHandler);$rootScope.$subscribe(chatboxMediatorChannels.POLLING_STOP,pollingStopHandler);var pollInterval;function mustInitPolling(){return dyduUtils.isNotDefined(window.WebSocket)||!$configurations.get("useWebSocketIfPossible")||"true"===
$context.getData(WEB_SOCKET_FAILED_COOKIE,"false")}var getPollMessage=function(){if(dyduUtils.isDefined($context.isRackMode)&&$context.isRackMode())return function(){var pollRequest=$messageFactory.createPollMessage();pollRequest.parameters.contextId=$context.getContextId($context.getRackModeDefaultBot().uuid);pollRequest.parameters.botId=$context.getRackModeDefaultBot().uuid;return pollRequest};else return $messageFactory.createPollMessage}();function pollRequestHandler(){if($context.getServerTime()>=
0)$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,getPollMessage())}function pollingStartHandler(){if(mustInitPolling()&&dyduUtils.isNotDefined(pollInterval))pollInterval=$interval(poll,1E3)}function pollingStopHandler(){if(!$context.isMonitoredDialog()&&dyduUtils.isDefined(pollInterval)){$interval.cancel(pollInterval);pollInterval=null}}function poll(){$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_POLL_REQUEST)}});
angular.module("dialogModule").run(function($context,$rootScope){var HIDE_WELCOME_SENTENCE_COOKIE="dydu.chatbox.hideWelcomeSentence";$context.getInteractions=getInteractions;$context.getUserLabel=getUserLabel;$context.getBotLabel=getBotLabel;$context.getOperatorLabel=getOperatorLabel;$context.getSolutionUsed=getSolutionUsed;$context.hideWelcomeSentence=hideWelcomeSentence;var interactions=[];var hideWelcomeSentenceVal=$context.getData(HIDE_WELCOME_SENTENCE_COOKIE,false);function getInteractions(){return interactions}
function setInteractions(event,newInteractions){interactions=newInteractions}function resetInteractions(){getInteractions().length=0}function getUserLabel(){return $rootScope.resources.get("chatbox.interaction.user.label")}function getBotLabel(){return $rootScope.resources.get("chatbox.interaction.bot.label")}function getOperatorLabel(operatorName,operatorLastName){if(dyduUtils.isDefined(operatorName)||dyduUtils.isDefined(operatorLastName)){var operatorLabel=$rootScope.resources.get("chatbox.interaction.operator.label");
return operatorLabel.replace("{operatorFirstName}",operatorName).replace("{operatorLastName}",operatorLastName)}}function getSolutionUsed(){return"ASSISTANT"}function hideWelcomeSentence(){return hideWelcomeSentenceVal}function hideWelcomeSentenceUpdateHandler(evt,hide){hideWelcomeSentenceVal=hide;$context.setData(HIDE_WELCOME_SENTENCE_COOKIE,hide,COOKIES_OPTION)}$rootScope.$subscribe(chatboxMediatorChannels.INTERACTIONS_UPDATE,setInteractions);$rootScope.$subscribe(chatboxMediatorChannels.INTERACTIONS_RESET,
resetInteractions);$rootScope.$subscribe(chatboxMediatorChannels.INTERACTIONS_HIDE_WELCOME_SENTENCE_UPDATE,hideWelcomeSentenceUpdateHandler);$rootScope.$publish(chatboxMediatorChannels.HISTORY_RELOAD)});
angular.module("dialogModule").run(function($context,$rootScope){var SIDEBAR_COOKIE="dydu.sidebar";var popinDisplayed=$context.getPopinConfiguration().show;var defaultSidebarConfiguration={title:"",content:"",url:"",contentStyle:{},frameStyle:{},containerStyle:{},show:false,bottom:0,right:popinDisplayed?dyduUtils.getPopinWidth()+10:10,ignoreConfiguredDimensions:false};$context.getSidebarConfiguration=getSidebarConfiguration;$context.getDefaultSidebarConfiguration=getDefaultSidebarConfiguration;function getSidebarConfiguration(){return $context.getData(SIDEBAR_COOKIE,
getDefaultSidebarConfiguration())}function getDefaultSidebarConfiguration(){return dyduUtils.clone(defaultSidebarConfiguration)}function setSidebarConfiguration(event,sidebar){$context.setData(SIDEBAR_COOKIE,sidebar,COOKIES_OPTION)}function removeSidebarConfiguration(){$context.removeData(SIDEBAR_COOKIE)}$rootScope.$subscribe(chatboxMediatorChannels.SIDEBAR_UPDATE,setSidebarConfiguration);$rootScope.$subscribe(chatboxMediatorChannels.SIDEBAR_RESET,removeSidebarConfiguration)});
angular.module("dialogModule").controller("dialogController",["$scope","$context","$timeout","$configurations","$sce","$filter","$gdprService",function($scope,$context,$timeout,$configurations,$sce,$filter,$gdprService){var MAX_LENGTH=150;var popinConfiguration=$context.getPopinConfiguration();var serverAvailibilityChecked=false;var contextIdRequested=false;var queueInfo={show:false,isAnyOperatorAvailable:true,isPriorityDialog:false};if($context.getQueueInfo)queueInfo=$context.getQueueInfo();var waitingMessagesCount=
0;var loadingPreviousDialog=false;var scrollListenerInitialized=false;var currentDialog={interactions:$context.getInteractions()};var lastInteractionBeforeSurvey=null;var useInternalFeedback=$configurations.get("useInternalFeedback",false);var feedbackSent=false;var sourceInput="";$scope.$subscribe(chatboxMediatorChannels.NOTIFICATION,notificationHandler);$scope.$subscribe(chatboxMediatorChannels.INTERACTIONS_UPDATE,updateInteractionsHandler);$scope.$subscribe(chatboxMediatorChannels.POPIN_UPDATE,
updatePopinHandler);$scope.$subscribe(chatboxMediatorChannels.LOCK_TEXTFIELD,lockTextFieldHandler);$scope.$subscribe(chatboxMediatorChannels.UNLOCK_TEXTFIELD,unlockTextFieldHandler);$scope.$subscribe(chatboxMediatorChannels.SIDEBAR_UPDATE,sidebarUpdateHandler);$scope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_UPDATE_QUEUE_INFO,updateQueueInfoHandler);$scope.$subscribe(globalMediatorChannels.REWORD,dialogRewordHandler);$scope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CONFIRM,confirmDialogConfirmHandler);
$scope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CANCEL,confirmDialogCancelHandler);$scope.$subscribe(globalMediatorChannels.SUGGESTION_CLICKED,suggestionClickedHandler);$scope.$subscribe(chatboxMediatorChannels.PREVIOUS_DIALOGS_UPDATE,previousDialogsUpdateHandler);$scope.$subscribe(chatboxMediatorChannels.PREVIOUS_DIALOGS_INTERACTIONS_UPDATE,previousDialogsInteractionsUpdateHandler);$scope.$subscribe(globalMediatorChannels.SURVEY_UPDATE,surveyUpdateHandler);$scope.$subscribe(globalMediatorChannels.FEEDBACK_UPDATE_STATE,
feedbackUpdateStateHandler);$scope.$subscribe(chatboxMediatorChannels.PREVIOUS_DIALOGS_RESET,previousDialogsResetHandler);$scope.$subscribe(globalMediatorChannels.TOP_KNOWLEDGE_ANY_RESPONSE,topKnowledgeAnyResponseHandler);$scope.$subscribe(globalMediatorChannels.TOP_KNOWLEDGE_CLICKED,topKnowledgeClickedHandler);$scope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_ENDED,livechatEndedHandler);$scope.dialogs=[];$scope.dialogs.push(currentDialog);$scope.question="";$scope.ask=ask;$scope.keyup=onKeyUp;
$scope.keypress=onKeyPress;$scope.writing=false;$scope.warnLength=false;$scope.errorLength=false;$scope.operatorWriting=false;$scope.showNotification=false;if($context.getDisconnectedText&&dyduUtils.isDefined($context.getDisconnectedText())){$scope.showNotification=true;$scope.notification=$context.getDisconnectedText()}$scope.livechatend=livechatend;$scope.livechatleavequeue=livechatleavequeue;$scope.showPopin=popinConfiguration.show;$scope.showLivechatEndButton=showLivechatEndButton;$scope.showPrintButton=
showPrintButton;$scope.showSendByMailButton=showSendByMailButton;$scope.showMoveButton=$configurations.get("userCanMovePopin")&&(!msie||msie>8);$scope.showCloseButton=showCloseButton;$scope.showMinimizeButton=$configurations.get("userCanMinimizePopin");$scope.trustAsHtml=trustAsHtml;$scope.onDragPopin=onDragPopin;$scope.hidePopin=hidePopin;$scope.closePopin=closePopin;$scope.mustShowDisplaySidebarButton=mustShowDisplaySidebarButton;$scope.openSidebar=openSidebar;$scope.lockTextfield=false;$scope.showSidebar=
$context.getSidebarConfiguration().show;$scope.sidebarTitle=$context.getSidebarConfiguration().title;$scope.hideWelcomeSentence=$context.hideWelcomeSentence;$scope.isLiveChatMode=isLiveChatMode;$scope.onFocus=onFocus;$scope.hasNewMessages=hasNewMessages;$scope.getNewMessagesLabel=getNewMessagesLabel;$scope.scrollToBottom=scrollToBottom;$scope.checkInView=checkInView;$scope.getProfilePictureStyle=getProfilePictureStyleFunction();$scope.getPopinTitle=getPopinTitle;$scope.getSecondTitle=getSecondTitle;
$scope.showMailForm=showMailForm;$scope.sendByMail=sendByMail;$scope.showMailFormGDPRClean=showMailFormGDPRClean;$scope.showMailFormGDPRExport=showMailFormGDPRExport;$scope.askMail=false;$scope.mailAddress="";$scope.printDialog=printDialog;$scope.sidebarContainerStyle=$context.getSidebarConfiguration().containerStyle;$scope.hasPreviousDialogs=false;$scope.getDialogDate=getDialogDate;$scope.insertSurvey=insertSurvey;$scope.useInternalSurvey=$configurations.get("useInternalSurvey",false);$scope.isDisabledSurvey=
isDisabledSurvey;$scope.renderHtml=dyduUtils.renderHtml;$scope.mustHideFromLabel=mustHideFromLabel;$scope.mustHideInteraction=mustHideInteraction;$scope.showTopKnowledgeHeader=false;$scope.mustAskFeedback=mustAskFeedback;$scope.isAnyOperatorAvailable=true;$scope.feedbackSent=false;$scope.gdprService=$gdprService;updatePopinHandler(null,popinConfiguration);updateQueueInfoHandler(null,queueInfo);$scope.$publish(chatboxMediatorChannels.PREVIOUS_DIALOGS_GET_REQUEST);$scope.isSideBarSurveyActive=function(){return!$scope.useInternalSurvey||
dyduUtils.isDefined($context.getSurveyAtStart())&&!$context.isAlreadyComplete($context.getContextId())};$scope.ngShowhide=false;$scope.ngShowhideFun=function(flag){if(flag)$scope.ngShowhide=false;else $scope.ngShowhide=true};function scrollToBottom(){var historyDiv=document.getElementById("dydu-history");if(dyduUtils.isDefined(historyDiv))historyDiv.scrollTop=historyDiv.scrollHeight;waitingMessagesCount=0}function checkInView(responseInView,index){if(responseInView&&isUnviewedResponse(index))waitingMessagesCount=
currentDialog.interactions.length-index-1}function isUnviewedResponse(index){return index+waitingMessagesCount>=currentDialog.interactions.length}function dialogRewordHandler(evt,reword){scrollAfterRender(scrollToBottom)}function updateQueueInfoHandler(evt,queueInfoInput){$scope.showWaitingQueue=queueInfoInput.show;$scope.queuePosition=queueInfoInput.queuePosition;if(dyduUtils.isDefined(queueInfoInput.isAnyOperatorAvailable))$scope.isAnyOperatorAvailable=queueInfoInput.isAnyOperatorAvailable;if($configurations.get("displayEstimatedWaitingTime"))$scope.queueTime=
dyduUtils.formatTime(queueInfoInput.estimatedWaitingDuration,$scope);if(mustAlertUserWithPopup(queueInfoInput))alertUserWithPopup()}function tc_events_handler(item,id,event){if(typeof tc_events_8==="function")tc_events_8(item,id,event)}function mustAlertUserWithPopup(queueInfo){return!queueInfo.show&&queueInfo.reason==="connected"&&!popinConfiguration.show}function openPopin(){var popinConf=$context.getPopinConfiguration();popinConf.show=true;$scope.$publish(chatboxMediatorChannels.POPIN_UPDATE,popinConf);
$scope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_QUEUE_INFO,{show:false});closeTeaser()}function closeTeaser(){var teaserConf=$context.getTeaserConfiguration();teaserConf.show=false;$scope.$publish(chatboxMediatorChannels.TEASER_UPDATE,teaserConf)}function declineLivechat(){$scope.$publish(chatboxMediatorChannels.LIVE_CHAT_END_REQUEST);$scope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_QUEUE_INFO,{show:false});closeTeaser()}function alertUserWithPopup(){$scope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,
{clazz:"livechat-queue-done",title:$scope.resources.get("chatbox.queue.confirm.title"),text:$scope.resources.get("chatbox.queue.confirm.text"),yes:$scope.resources.get("chatbox.queue.confirm.yes"),no:$scope.resources.get("chatbox.queue.confirm.no")})}function onDragPopin(event){var dragInfo;if(dyduUtils.isDefined(event)){dragInfo={dragX:event.dragX,dragY:event.dragY};$scope.$publish(chatboxMediatorChannels.POPIN_DRAGGED,dragInfo)}}function updatePopinHandler(evt,updatedPopinConfiguration){popinConfiguration=
updatedPopinConfiguration;$scope.showPopin=popinConfiguration.show}function lockTextFieldHandler(){$scope.lockTextfield=true}function unlockTextFieldHandler(){$scope.lockTextfield=false}function hidePopin(){popinConfiguration.show=false;$scope.$publish(chatboxMediatorChannels.POPIN_UPDATE,popinConfiguration)}function trustAsHtml(interaction){if(interaction.type==="response")return $sce.trustAsHtml(interaction.text);return interaction.text}function updateInteractionsHandler(evt,interactions){if(mustScrollToLastResponse())scrollAfterRender(scrollToLastResponse);
else waitingMessagesCount++;currentDialog.interactions=interactions;if(interactions.length>0&&interactions[interactions.length-1].type==="response")$scope.operatorWriting=false}var timeoutPromise=null;var currentNotificationCode=null;function notificationHandler(event,notification){if(ignoreNotification(notification))return;if(notification.code==="AlmostTimedOut")notification.text=$scope.resources.get("chatbox.notification.timeout.reminder.text");var isTextDefined=dyduUtils.isDefined(notification.text)&&
notification.text!=="";if(notification.code==="OperatorWritingStatus")$scope.operatorWriting=isTextDefined;else if(isTextDefined){if(dyduUtils.isDefined(timeoutPromise))$timeout.cancel(timeoutPromise);$scope.showNotification=true;$scope.notification=notification.text;currentNotificationCode=notification.code;if(notification.code!=="OperatorDisconnected"&&notification.code!=="AlmostTimedOut")timeoutPromise=$timeout(hideNotification,2E3)}}function ignoreNotification(notification){return notification.code===
"OnCoBrowsingStart"||notification.code==="DialogTransferredManually"||notification.code==="DialogTransferredAutomatically"||notification.code==="OnVideoChatStart"||notification.code==="OnVideoChatError"}function hideNotification(){$scope.showNotification=false;timeoutPromise=null;currentNotificationCode=null}function ask(){if(typeof $scope.question=="number")$scope.question=$scope.question+"";if($scope.question!==""){var rewordMessage={text:$scope.question};if(sourceInput!=="")rewordMessage.options=
{sourceInput:sourceInput};$scope.$publish(globalMediatorChannels.REWORD,rewordMessage);currentDialog.interactions=$context.getInteractions();if(currentDialog.interactions.length===1)tc_events_handler(this,null,"chatbot_interact");$scope.question="";sourceInput="";if(currentNotificationCode==="AlmostTimedOut")hideNotification();$scope.$publish(globalMediatorChannels.SUGGESTIONS_RECEIVED,{reset:1});$scope.showTopKnowledgeHeader=false;checkQuestionLength()}}function onKeyUp(e){if(isEnterKeyWithoutShift(e))ask();
checkServerAvailability();initContextId();checkQuestionLength();triggerAutoCompleteIfNeeded(e)}function onKeyPress(e){checkQuestionLength()}function triggerAutoCompleteIfNeeded(event){if(mustTriggerAutoComplete(event))$scope.$publish(globalMediatorChannels.GET_SUGGESTIONS,$scope.question);if($scope.question.length===0)$scope.$publish(globalMediatorChannels.SUGGESTIONS_RECEIVED,{reset:1})}function mustTriggerAutoComplete(event){var livechatEnabled=dyduUtils.isDefined($context.isLivechatMode)&&$context.isLivechatMode();
return!livechatEnabled&&$scope.question.length>1&&($scope.question.length%3===0||event.keyCode===32)}function checkServerAvailability(){if(!serverAvailibilityChecked){serverAvailibilityChecked=true;$scope.$publish(globalMediatorChannels.CHECK_SERVER_AVAILABILITY)}}function checkQuestionLength(){$scope.messageLength=""+$scope.question.length+"/"+MAX_LENGTH;$scope.writing=$scope.question.length>0;$scope.warnLength=$scope.question.length>MAX_LENGTH-20;$scope.errorLength=$scope.question.length>MAX_LENGTH;
if($scope.errorLength){$scope.warnLength=false;$scope.question=$scope.question.substring(0,MAX_LENGTH)}if($scope.question==="")$scope.$publish(chatboxMediatorChannels.USER_TYPING,{typing:false,content:$scope.question});else $scope.$publish(chatboxMediatorChannels.USER_TYPING,{typing:true,content:$scope.question})}function initContextId(){if(!$context.hasContextId()&&!contextIdRequested){contextIdRequested=true;$scope.$publish(globalMediatorChannels.REQUEST_NEW_CONTEXT_ID,{})}}function isEnterKeyWithoutShift(e){return!e.shiftKey&&
e.keyCode===13}function closePopin(){$scope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,{clazz:"close-popin",title:$scope.resources.get("chatbox.popin.confirm.close.title"),text:$scope.resources.get("chatbox.popin.confirm.close.text"),yes:$scope.resources.get("chatbox.popin.confirm.close.yes"),no:$scope.resources.get("chatbox.popin.confirm.close.no")})}function closePopinConfirmed(){$scope.$publish(chatboxMediatorChannels.POPIN_CLOSE_REQUEST)}function livechatend(){$scope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,
{clazz:"close-livechat",title:$scope.resources.get("chatbox.livechat.confirm.end.title"),text:$scope.resources.get("chatbox.livechat.confirm.end.text"),yes:$scope.resources.get("chatbox.livechat.confirm.end.yes"),no:$scope.resources.get("chatbox.livechat.confirm.end.no")})}function livechatendConfirmed(){$scope.$publish(chatboxMediatorChannels.LIVE_CHAT_END_REQUEST)}function livechatleavequeue(){if(dyduUtils.isDefined($context.isLivechatMode)&&$context.isLivechatMode())$scope.$publish(chatboxMediatorChannels.LIVE_CHAT_LEAVE_QUEUE_REQUEST);
else $scope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_QUEUE_INFO,{show:false})}function showLivechatEndButton(){var isLivechatMode=dyduUtils.isDefined($context.isLivechatMode)&&$context.isLivechatMode();var noOperatorNoManager=!$context.isOperatorConnected()&&!$context.isMonitoredDialog();var userCanEndLivechatOrNoOperatorNoManager=$configurations.get("userCanEndLivechat")||noOperatorNoManager;return isLivechatMode&&userCanEndLivechatOrNoOperatorNoManager&&!$scope.showWaitingQueue}function showCloseButton(){var isLivechatMode=
dyduUtils.isDefined($context.isLivechatMode)&&$context.isLivechatMode();return $configurations.get("userCanClosePopin")&&!isLivechatMode}function sidebarUpdateHandler(evt,sidebarConfiguration){$scope.showSidebar=sidebarConfiguration.show;$scope.sidebarTitle=sidebarConfiguration.title;$scope.sidebarContainerStyle=sidebarConfiguration.containerStyle}function onFocus(){$scope.$publish(chatboxMediatorChannels.TEXTFIELD_FOCUSED)}var confirmDialogConfirmFunctions={};confirmDialogConfirmFunctions["livechat-queue-done"]=
openPopin;confirmDialogConfirmFunctions["close-popin"]=closePopinConfirmed;confirmDialogConfirmFunctions["close-livechat"]=livechatendConfirmed;function confirmDialogConfirmHandler(evt,message){if(dyduUtils.isDefined(confirmDialogConfirmFunctions[message.clazz]))confirmDialogConfirmFunctions[message.clazz]()}var confirmDialogCancelFunctions={};confirmDialogCancelFunctions["livechat-queue-done"]=declineLivechat;function confirmDialogCancelHandler(evt,message){if(dyduUtils.isDefined(confirmDialogCancelFunctions[message.clazz]))confirmDialogCancelFunctions[message.clazz]()}
function mustScrollToLastResponse(){var historyDiv=document.getElementById("dydu-history");return dyduUtils.isScrolledToBottom(historyDiv)}function _easeInOutCubic(t){return t<0.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}var windowScrolls=[];var scrollInit=false;function scrollToLastResponse(isQuestion){windowScrolls.forEach(function(windowScroll){clearTimeout(windowScroll)});windowScrolls=[];if(!scrollInit){scrollInit=true;$timeout(function(){var dydu_history=document.getElementById("dydu-history");var lastQuestion=
document.querySelectorAll(".dydu-current-dialog .dydu-user-textfield");var lastResponse=document.querySelectorAll(".dydu-current-dialog .dydu-operator-textfield.dydu-interaction:not(.dydu-ask-feedback)");var scrollElm;if(isQuestion!==undefined&&isQuestion&&lastQuestion.length>0)scrollElm=lastQuestion[lastQuestion.length-1];else scrollElm=lastResponse[lastResponse.length-1];scrollInit=false;if(dyduUtils.isDefined(scrollElm)){var step=30;var top=50;var begin=0;var start=dydu_history.scrollTop;var distance=
scrollElm.offsetTop-start-top;var dps=distance/step;for(var i=0;i<step;i++){var scrollFunction=function(){begin+=dps;dydu_history.scrollTop=start+distance*_easeInOutCubic(begin/distance)};windowScrolls.push(window.setTimeout(scrollFunction,step*i,true))}}})}}function hasNewMessages(){return waitingMessagesCount>0}function getNewMessagesLabel(){if(waitingMessagesCount>1)return waitingMessagesCount+" "+$scope.resources.get("chatbox.popin.multiple.new.messages");else if(waitingMessagesCount===1)return waitingMessagesCount+
" "+$scope.resources.get("chatbox.popin.one.new.message")}function mustShowDisplaySidebarButton(interaction){return $context.hasSidebarContent(interaction)&&!$context.isSidebarDisplayedFor(interaction)}function openSidebar(interaction){$context.setSidebarContentFor(interaction)}function getProfilePictureStyleFunction(){if(dyduUtils.isDefined($context.getProfilePictureStyle))return $context.getProfilePictureStyle;return function(){return{}}}function isLiveChatMode(){return dyduUtils.isDefined($context.isLivechatMode)&&
$context.isLivechatMode()&&dyduUtils.isDefined($context.getOperatorExternalId())}function getPopinTitle(){if(isLiveChatMode())return $scope.resources.get("chatbox.popin.livechat.title").replace("{operatorFirstName}",$context.getOperatorName());return $scope.resources.get("chatbox.popin.title")}function getSecondTitle(){if($scope.showWaitingQueue)return $scope.resources.get("chatbox.queue.title");return $scope.resources.get("chatbox.popin.suggest.help")}function showSendByMailButton(){return $configurations.get("userCanSendDialogByMail")&&
""!==$context.getContextId()}function showMailForm(key){key=key||"default";$scope.askMail=$scope.askMail===key?false:key;if($scope.askMail)scrollAfterRender(scrollToBottom);return $scope.askMail}function showMailFormGDPRClean(){if(showMailForm("clean")){$scope.askMailCallback=$scope.gdprService.clean;$scope.askMailPromptResource="gdpr.clean.prompt"}}function showMailFormGDPRExport(){if(showMailForm("export")){$scope.askMailCallback=$scope.gdprService["export"];$scope.askMailPromptResource="gdpr.export.prompt"}}
function sendByMail(){$scope.$publish(chatboxMediatorChannels.SEND_DIALOG_BY_MAIL_REQUEST,{mailAddress:$scope.mailAddress})}function showPrintButton(){return $configurations.get("userCanPrintDialog")&&""!==$context.getContextId()}function printDialog(){$scope.$publish(chatboxMediatorChannels.PRINT_DIALOG_REQUEST)}function suggestionClickedHandler(evt,suggestion){$scope.question=suggestion.text;sourceInput=suggestion.sourceInput;ask()}function previousDialogsUpdateHandler(evt,previousDialogs){if(dyduUtils.isDefined(previousDialogs)){var hasPreviousDialogs=
previousDialogs.length>0;$timeout(function(){if(hasPreviousDialogs)if(isScrollBar())initScrollListener();else loadPreviousDialog()},250);$scope.hasPreviousDialogs=hasPreviousDialogs}}function isScrollBar(){var historyDiv=document.getElementById("dydu-history");return historyDiv.scrollHeight>historyDiv.clientHeight}function loadPreviousDialog(){loadingPreviousDialog=true;$scope.$publish(chatboxMediatorChannels.PREVIOUS_DIALOG_LOADING_REQUEST)}function initScrollListener(){if(!scrollListenerInitialized){var historyDiv=
document.getElementById("dydu-history");angular.element(historyDiv).on("scroll",onHistoryScrollCallback);scrollListenerInitialized=true}}function onHistoryScrollCallback(){if($scope.hasPreviousDialogs&&!loadingPreviousDialog){var historyDiv=document.getElementById("dydu-history");if(dyduUtils.isDefined(historyDiv)&&historyDiv.scrollTop===0)loadPreviousDialog()}}function previousDialogsInteractionsUpdateHandler(evt,interactions){loadingPreviousDialog=false;var historyDiv=document.getElementById("dydu-history");
var oldScrollHeight=historyDiv.scrollHeight;function scrollToOldPosition(){historyDiv.scrollTop=historyDiv.scrollHeight-oldScrollHeight}$scope.dialogs.unshift({interactions:interactions});$timeout(scrollToOldPosition)}function getDialogDate(dialog){if(dyduUtils.isNotDefined(dialog.date))if(dialog.interactions.length>0)dialog.date=dialog.interactions[0].date;else dialog.date=(new Date).getTime();return $filter("date")(dialog.date,$scope.resources.get("chatbox.popin.date.label"))}function surveyUpdateHandler(evt,
surveyConfiguration){if(surveyConfiguration.show&&$scope.useInternalSurvey&&$context.getSurveyAtStart()!==surveyConfiguration.id){lastInteractionBeforeSurvey={type:"survey",date:(new Date).getTime()};currentDialog.interactions.push(lastInteractionBeforeSurvey);$scope.$publish(chatboxMediatorChannels.INTERACTIONS_UPDATE,currentDialog.interactions);scrollAfterRender(scrollToSurvey,50)}else lastInteractionBeforeSurvey=null}function insertSurvey(interaction){return interaction.type==="survey"&&lastInteractionBeforeSurvey!==
null&&lastInteractionBeforeSurvey.date===interaction.date}function isDisabledSurvey(interaction){return interaction.type==="survey"&&(lastInteractionBeforeSurvey===null||lastInteractionBeforeSurvey.date!==interaction.date)}function scrollToSurvey(){if($scope.useInternalSurvey){var surveyResponse=document.querySelector(".dydu-current-dialog .dydu-survey.dydu-interaction");if(dyduUtils.isDefined(surveyResponse))surveyResponse.scrollIntoView()}}function isInternalSurveyDisplayed(){return null!==lastInteractionBeforeSurvey}
function scrollAfterRender(callback,delay){var delayNotNull=delay||0;if(isInternalSurveyDisplayed())var unregisterFunc=$scope.$subscribe(globalMediatorChannels.SURVEY_LOADED,function(){$timeout(callback,delayNotNull);unregisterFunc()});$timeout(callback)}function mustHideFromLabel(interaction){return interaction.type!=="template"&&(interaction.text===""||interaction.from==="")}function mustHideInteraction(interaction){return interaction.type!=="template"&&interaction.text===""&&!mustShowDisplaySidebarButton(interaction)&&
(!useInternalFeedback||$scope.feedbackSent)}function feedbackUpdateStateHandler(evt,values){$scope.feedbackSent=values.state===FEEDBACK_STATES.done}function previousDialogsResetHandler(){$scope.dialogs=[];$scope.dialogs.push(currentDialog)}function topKnowledgeAnyResponseHandler(){$scope.showTopKnowledgeHeader=$scope.dialogs.length<2}function topKnowledgeClickedHandler(){$scope.showTopKnowledgeHeader=false}function mustAskFeedback(interaction){return interaction.askFeedback&&(!dyduUtils.isDefined($context.hasNextStep)||
!$context.hasNextStep())&&!$scope.feedbackSent}function livechatEndedHandler(){if(currentNotificationCode==="AlmostTimedOut")hideNotification()}}]).directive("autofocus",function($timeout){return{link:function(scope,element,attrs){element[0].focus()}}});
angular.module("dialogModule").controller("sidebarController",["$scope","$context","$sce","$timeout","$configurations","$log",function($scope,$context,$sce,$timeout,$configurations,$log){$scope.$subscribe(chatboxMediatorChannels.SIDEBAR_UPDATE,sidebarUpdateHandler);$scope.$subscribe(globalMediatorChannels.REWORD,sidebarCloseHandler);$scope.sidebar=$context.getSidebarConfiguration();$scope.close=close;$scope.trustAsHtml=trustAsHtml;$scope.trustAsResourceUrl=trustAsResourceUrl;$scope.hasContent=hasContent;
$scope.hasFrame=hasFrame;sidebarUpdateHandler(null,$scope.sidebar);function hasContent(){return dyduUtils.isDefined($scope.sidebar.content)&&$scope.sidebar.content!==""}function hasFrame(){return dyduUtils.isDefined($scope.sidebar.url)&&$scope.sidebar.url!==""}function close(){$scope.sidebar.show=false;$scope.$publish(chatboxMediatorChannels.SIDEBAR_UPDATE,$scope.sidebar)}function trustAsHtml(text){return $sce.trustAsHtml(text)}function trustAsResourceUrl(url){return $sce.trustAsResourceUrl(url)}
function sidebarUpdateHandler(evt,sidebarConfiguration){$scope.sidebar=sidebarConfiguration;$timeout(function(){var element=document.createElement("div");element.innerHTML=sidebarConfiguration.content;var scripts=element.getElementsByTagName("script");for(var idx=0;idx<scripts.length;idx++)try{eval(scripts[idx].innerHTML)}catch(e){$log.error(e)}},500);updateSidebarContent()}function sidebarCloseHandler(evt,reword){if(reword.options&&reword.options.closesidebarafterrewordclick)close()}function updateSidebarContent(){if(!$scope.sidebar.show){$scope.sidebar.content=
"";$scope.sidebar.url=""}}}]);
angular.module("dialogModule").run(function($context,$rootScope,$configurations){$rootScope.$subscribe(TALK_RESPONSE_EVENT,talkResponseHandler);$rootScope.$subscribe(chatboxMediatorChannels.SIDEBAR_RESET,sidebarResetHandler);var sidebarConfiguration=$context.getSidebarConfiguration();var sidebarContentByInteraction={};var currentSidebarDateUsed=null;$context.addSidebarContent=addSidebarContent;$context.setSidebarContentFor=setSidebarContentFor;$context.isSidebarDisplayedFor=isSidebarDisplayedFor;
$context.hasSidebarContent=hasSidebarContent;function addSidebarContent(interaction,sidebarContent){sidebarContentByInteraction[interaction.date]=sidebarContent}function setSidebarContentFor(interaction){if(hasSidebarContent(interaction)){sidebarConfiguration=$context.getSidebarConfiguration();updateSidebar(sidebarContentByInteraction[interaction.date]);currentSidebarDateUsed=interaction.date;$rootScope.$publish(chatboxMediatorChannels.SIDEBAR_UPDATE,sidebarConfiguration)}}function isSidebarDisplayedFor(interaction){var currentSidebarConfiguration=
$context.getSidebarConfiguration();if(!currentSidebarConfiguration.show)return false;else return currentSidebarDateUsed===interaction.date}function hasSidebarContent(interaction){return interaction.type!=="request"&&dyduUtils.isDefined(sidebarContentByInteraction[interaction.date])}function mustHideSidebar(msg){var directMatchResponse=msg.typeResponse==="DMClickRedirectionLink"||msg.typeResponse==="DMRewordClicked";if(!$configurations.get("closeSidebarAutomatically")||msg.human||directMatchResponse)return false;
return true}function talkResponseHandler(event,msg){sidebarConfiguration=$context.getSidebarConfiguration();if(dyduUtils.isNotDefined(msg.sidebar)&&mustHideSidebar(msg)){sidebarConfiguration.show=false;$rootScope.$publish(chatboxMediatorChannels.SIDEBAR_UPDATE,sidebarConfiguration)}}function updateSidebar(sidebar){if(!sidebarConfiguration.ignoreConfiguredDimensions){var width=parseInt(sidebar.width)||350;var height=parseInt(sidebar.height)||450;sidebarConfiguration.contentStyle={};sidebarConfiguration.frameStyle=
{height:"90%",width:"100%"};sidebarConfiguration.containerStyle={height:height+"px",width:width+"px"};sidebarConfiguration.width=width;sidebarConfiguration.height=height}sidebarConfiguration.title=sidebar.title;sidebarConfiguration.content=sidebar.content;sidebarConfiguration.url=sidebar.url;sidebarConfiguration.show=true}function sidebarResetHandler(){sidebarConfiguration=$context.getSidebarConfiguration()}});
angular.module("dialogModule").run(guiOnRun);
function guiOnRun($rootScope,$context,$log){$rootScope.$subscribe(TALK_RESPONSE_EVENT,talkResponseHandler);$rootScope.$subscribe(chatboxMediatorChannels.NOTIFICATION,notificationHandler);$rootScope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CONFIRM,confirmDialogConfirmHandler);$rootScope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CANCEL,confirmDialogCancelHandler);var lockTextFieldEventToSend;var DYDUTeaser={show:showTeaser,showWithReword:showWithReword};dydu.customPlaceHolder=customPlaceHolder;
function customPlaceHolder(placeHolderLabel){var ph=document.querySelector(".dydu-textarea");ph.placeholder=placeHolderLabel}function showWithReword(type,timeout,reword){var teaserConfiguration={type:TEASER_TYPE.CLASSIC,timeout:timeout,reword:reword,show:true};$rootScope.$publish(chatboxMediatorChannels.TEASER_UPDATE,teaserConfiguration)}function notifySurvey(surveyUUID,modal){var config={survey:surveyUUID};if(modal){lockTextFieldEventToSend=chatboxMediatorChannels.LOCK_TEXTFIELD;config.modal=true}$rootScope.$publish(chatboxMediatorChannels.NOTIFICATION,
config)}function showTeaser(type,timeout,useLivechat,containerId,override){var popinConfiguration=$context.getPopinConfiguration();if(!popinConfiguration.show){var teaserConfiguration={type:TEASER_TYPE.CLASSIC,timeout:timeout,reword:useLivechat?"#livechatconnection#":null,show:true};$rootScope.$publish(chatboxMediatorChannels.TEASER_UPDATE,teaserConfiguration)}}function _dydu_lockTextField(){lockTextFieldEventToSend=chatboxMediatorChannels.LOCK_TEXTFIELD}function dyduShowSidebarOnly(){var popinConfiguration=
$context.getPopinConfiguration();if(dyduUtils.isMobileDevice()){popinConfiguration.show=true;$rootScope.$publish(chatboxMediatorChannels.POPIN_UPDATE,popinConfiguration);_dydu_lockTextField()}else{popinConfiguration.show=false;$rootScope.$publish(chatboxMediatorChannels.POPIN_UPDATE,popinConfiguration)}try{var teaserConfiguration=$context.getTeaserConfiguration();teaserConfiguration.show=false;$rootScope.$publish(chatboxMediatorChannels.TEASER_UPDATE,teaserConfiguration)}catch(e){}}function avatarPlayAnim(){}
function dyduClearPreviousInteractions(){$rootScope.$publish(chatboxMediatorChannels.INTERACTIONS_HIDE_WELCOME_SENTENCE_UPDATE,true);$rootScope.$publish(chatboxMediatorChannels.INTERACTIONS_RESET)}function dyduProposeHelp(){$rootScope.$publish(chatboxMediatorChannels.NOTIFICATION,{code:"OnDialogSuggestHelp"})}function notificationHandler(evt,notification){if(notification.code==="OnDialogSuggestHelp")$rootScope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,{clazz:"dialog-suggest-help",title:$rootScope.resources.get("chatbox.dialog.suggest.help.title"),
text:$rootScope.resources.get("chatbox.dialog.suggest.help.text"),yes:$rootScope.resources.get("chatbox.dialog.suggest.help.yes"),no:$rootScope.resources.get("chatbox.dialog.suggest.help.no")});function dyduCustomPlaceHolder(placeHolderLabel){var ph=document.querySelector(".dydu-textarea");if(null!=ph)ph.placeholder=placeHolderLabel}}function confirmDialogConfirmHandler(evt,message){if(message.clazz==="dialog-suggest-help")$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#accepthelp#",options:{hideFromUser:true}})}
function confirmDialogCancelHandler(evt,message){if(message.clazz==="dialog-suggest-help")$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#declinehelp#",options:{hideFromUser:true}})}function talkResponseHandler(event,talkResponse){var guiAction=talkResponse.guiAction||"default";lockTextFieldEventToSend=chatboxMediatorChannels.UNLOCK_TEXTFIELD;if(dyduUtils.isDefined(guiAction)&&guiAction.match("^javascript:")){guiAction=guiAction.substr(11);try{eval(guiAction)}catch(e){$log.error(e)}}if(guiAction.substring(22,
-1)!=="dydu.customPlaceHolder"||guiAction==="default"){var ph=document.querySelector("#dydu-textarea");ph.placeholder=$rootScope.resources.get("chatbox.dialog.enter.your.question")}$rootScope.$publish(lockTextFieldEventToSend)}};
angular.module("dialogModule").run(function($context,$rootScope,$configurations){$rootScope.$subscribe(globalMediatorChannels.REWORD,rewordHandler);$rootScope.$subscribe(TALK_RESPONSE_EVENT,talkResponseHandler);function rewordHandler(event,reword){if(!mustIgnoreReword(reword.text,reword.options)){var interactions=$context.getInteractions();interactions.push({text:reword.text,from:$context.getUserLabel(),type:"request",contextId:$context.getContextId(),date:(new Date).getTime()});$rootScope.$publish(chatboxMediatorChannels.INTERACTIONS_UPDATE,
interactions)}}function startsWith(str,prefix){return str.indexOf(prefix)===0}function mustIgnoreReword(input,options){return dyduUtils.isDefined(options)&&options.hideFromUser||ignoreInput(input)||ignoreType(options)}function ignoreInput(input){return startsWith(input,"_goalpage_:")||startsWith(input,"_pushcondition_:")||startsWith(input,"redirection:")||startsWith(input,"redirection_newpage:")||startsWith(input,"#")||input===""}function ignoreType(options){return options&&options.type&&(options.type===
"redirection_knowledge"||options.type==="redirection"||options.type==="reword_auto"||options.type==="reword_feedback"||options.type==="redirection_newpage")}function ignoreResponseType(responseType){return responseType==="NAHiddenClientPush"||responseType==="NALiveChatCoBrowsingUnexepectedRequest"||responseType==="NAGoalPage"}function isNotEmptyResponse(response){return isResponseWithText(response)||dyduUtils.isDefined(response.sidebar)||isReponseWithTemplate(response)}function isReponseWithTemplate(response){return dyduUtils.isDefined(response.templateName)}
function isResponseWithText(response){return response.text&&response.text!==""}function isTemplateAlone(response){return isReponseWithTemplate(response)&&!isResponseWithText(response)}function extractFrom(response){if(response.typeResponse==="DMClickRedirectionLink")if(!$configurations.get("useLabelForRedirection"))return"";else if($configurations.get("useBotLabelForRedirection"))return $context.getBotLabel();else if($context.isLivechatMode()&&dyduUtils.isDefined($context.getOperatorName()))return $context.getOperatorLabel($context.getOperatorName(),
$context.getOperatorLastName());return $context.getOperatorLabel(response.operatorName,response.operatorLastName)||$context.getBotLabel()}function isLastInteractionWithoutContext(interactions){return interactions.length>0&&interactions[interactions.length-1].contextId===""}function talkResponseHandler(event,response){if(isValidResponse(response)){var interactions=$context.getInteractions();if(isLastInteractionWithoutContext(interactions))interactions=[interactions[interactions.length-1]];if(isNotEmptyResponse(response)&&
!ignoreResponseType(response.typeResponse)){var interactionResponse;var type=isTemplateAlone(response)?"template":"response";if(isReponseWithTemplate(response)){var sideBartitle=null;if(angular.isDefined(response.sidebar)&&response.sidebar.title)sideBartitle=response.sidebar.title;interactionResponse={text:response.text,from:extractFrom(response),contextId:response.contextId,askFeedback:response.askFeedback,operatorName:response.operatorName,operatorExternalId:response.operatorExternalId,hasProfilePicture:response.hasProfilePicture,
date:dyduUtils.isDefined(response.serverTime)?response.serverTime:(new Date).getTime(),type:type,templateFile:response.templateName+".html",templateData:JSON.parse(response.templateData),sideBarTitle:sideBartitle};interactions.push(interactionResponse)}else{var split=response.text.split('\x3chr class\x3d"split"\x3e');for(var index=0;index<split.length;index++){var sideBartitle=null;if(angular.isDefined(response.sidebar)&&response.sidebar.title)sideBartitle=response.sidebar.title;interactionResponse=
{text:split[index],from:extractFrom(response),type:"response",contextId:response.contextId,askFeedback:index===split.length-1?response.askFeedback:false,operatorName:response.operatorName,operatorExternalId:response.operatorExternalId,hasProfilePicture:response.hasProfilePicture,date:dyduUtils.isDefined(response.serverTime)?response.serverTime:(new Date).getTime(),sideBarTitle:sideBartitle};interactions.push(interactionResponse)}}interactions[0].contextId=response.contextId;if(mustDisplayPopin(response)){var popinConf=
$context.getPopinConfiguration();popinConf.show=true;$rootScope.$publish(chatboxMediatorChannels.POPIN_UPDATE,popinConf)}$rootScope.$publish(chatboxMediatorChannels.NEW_RESPONSE_RECEIVED,interactionResponse)}if(response.sidebar){$context.addSidebarContent(interactionResponse,response.sidebar);if(!dyduUtils.isMobileDevice())$context.setSidebarContentFor(interactionResponse)}$rootScope.$publish(chatboxMediatorChannels.INTERACTIONS_UPDATE,interactions);if(dyduUtils.isDefined(response.serverTime))$rootScope.$publish(globalMediatorChannels.UPDATE_SERVER_TIME,
response.serverTime)}}function mustDisplayPopin(response){if(response.typeResponse==="ERRApplicationException")return false;if(response.keepPopinMinimized)return false;if(dyduUtils.isDefined(response.guiAction)&&response.guiAction.match("^javascript:.*?dyduShowSidebarOnly().*?"))return false;return true}function isValidResponse(response){if(dyduUtils.isDefined(response.pollTime))return response.pollTime===$context.getServerTime();else return true}});
angular.module("dialogModule").run(function($context,$rootScope){$rootScope.$subscribe(TALK_RESPONSE_EVENT,talkResponseHandler);function talkResponseHandler(event,response){if(isValidResponse(response)&&dyduUtils.isDefined(response.guiCSName))$rootScope.$publish(globalMediatorChannels.UPDATE_SPACE,response.guiCSName)}function isValidResponse(response){if(dyduUtils.isDefined(response.pollTime))return response.pollTime===$context.getServerTime();else return true}});
angular.module("dialogModule").run(function($rootScope,$window){$rootScope.$subscribe(TALK_RESPONSE_EVENT,talkResponseRedirectionHandler);function talkResponseRedirectionHandler(event,talkResponse){if(dyduUtils.isDefined(talkResponse.urlRedirect))$window.location.href=talkResponse.urlRedirect}});
angular.module("dialogModule").run(function($context,$rootScope,$timeout,$messageFactory){$rootScope.$subscribe(globalMediatorChannels.REWORD,rewordHandler);var keyWordHandler={"#feedback#":feedbackHandler,"#comment#":commentHandler,"#chatboxinfos#":chatboxinfosHandler,"#contextvariables#":contextvariablesHandler};function rewordHandler(event,reword){if(reword.text==="#newdialog#"){$rootScope.$publish(chatboxMediatorChannels.COBROWSING_STOP_REQUEST);$rootScope.$publish(chatboxMediatorChannels.VIDEOCHAT_STOP_REQUEST);
$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_END_REQUEST);$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_ENDED);$rootScope.$publish(chatboxMediatorChannels.PREVIOUS_DIALOGS_RESET);$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createTalkMessage(reword.text));$rootScope.$publish(chatboxMediatorChannels.INTERACTIONS_RESET);$rootScope.$publish(globalMediatorChannels.RESET_CONTEXT_DATA);var unsubscribeFunc=$rootScope.$subscribe(chatboxMediatorChannels.TALK_RESPONSE,
function(){$rootScope.$publish(chatboxMediatorChannels.PREVIOUS_DIALOGS_GET_REQUEST);unsubscribeFunc()})}else if(dyduUtils.isSpecialKeyWord(reword.text)){var interactions=$context.getInteractions();keyWordHandler[reword.text](interactions,reword);$rootScope.$publish(chatboxMediatorChannels.INTERACTIONS_UPDATE,interactions)}}function feedbackHandler(interactions,reword){interactions.push({text:reword.text,from:$context.getUserLabel(),type:"request",askFeedback:true,contextId:$context.getContextId()})}
function commentHandler(interactions,reword){feedbackHandler(interactions,reword);$timeout(function(){$rootScope.$publish(globalMediatorChannels.FEEDBACK_UPDATE_STATE,{state:FEEDBACK_STATES.improve})},1100)}function chatboxinfosHandler(interactions){interactions.push({text:"\x3cb\x3egeneration date:\x3c/b\x3e "+JS_CREATION+"\x3cbr/\x3e\x3cb\x3ejs url:\x3c/b\x3e \x3ca href\x3d'"+dyduUtils.getJsBaseUrl()+"'\x3e"+dyduUtils.getJsBaseUrl()+"\x3c/a\x3e",from:$context.getBotLabel(),type:"response",contextId:$context.getContextId()})}
function contextvariablesHandler(interactions){interactions.push({text:getContextVariablesFormatted(),from:$context.getBotLabel(),type:"response",contextId:$context.getContextId()})}function getContextVariablesFormatted(){var variables=$context.getContextVariables();var cv="\x3cul\x3e";for(var key in variables)if(variables.hasOwnProperty(key))cv+="\x3cli\x3e"+key+"\x26nbsp;\x3d\x26nbsp;"+variables[key]+"\x3c/li\x3e";cv+="\x3c/ul\x3e";return cv}});
angular.module("dialogModule").run(function($rootScope,$context,$configurations){$rootScope.$subscribe(chatboxMediatorChannels.PRINT_DIALOG_REQUEST,printDialogRequestHandler);$rootScope.$subscribe(globalMediatorChannels.UPDATE_SERVLET_URL,setServletUrl);var servletToUse=$configurations.get("servletUrl");function printDialogRequestHandler(){var contextId=$context.getContextId();var uri=servletToUse+"/history?context\x3d"+contextId+"\x26format\x3dhtml\x26userLabel\x3d"+$context.getUserLabel()+"\x26botLabel\x3d"+
$context.getBotLabel()+"\x26operatorLabel\x3d"+$rootScope.resources.get("chatbox.interaction.operator.label");if(dyduUtils.isDefined(contextId))window.open(uri,"My dialog","height\x3d400,width\x3d600,scrollbars\x3dyes")}function setServletUrl(evt,servletUrl){servletUrlToUse=servletUrl}});
angular.module("dialogModule").run(function($rootScope,$context){$rootScope.$subscribe(chatboxMediatorChannels.SEND_DIALOG_BY_MAIL_REQUEST,sendDialogByMailRequestHandler);function sendDialogByMailRequestHandler(evt,data){reword("#dydumailto:"+$context.getContextId()+":"+data.mailAddress+"#",{userLabel:$context.getUserLabel(),botLabel:$context.getBotLabel(),operatorLabel:$rootScope.resources.get("chatbox.interaction.operator.label")})}});
angular.module("dialogModule").run(function($rootScope,$context,$timeout){$rootScope.$subscribe(chatboxMediatorChannels.POPIN_UPDATE,updatePopinHandler);$rootScope.$subscribe(chatboxMediatorChannels.POPIN_CLOSE_REQUEST,popinCloseRequestHandler);var popinConfiguration=$context.getPopinConfiguration();var notifyPopinMinimized=true;function updatePopinHandler(evt,updatedPopinConfiguration){if(popinConfiguration.show!==updatedPopinConfiguration.show)if(updatedPopinConfiguration.show)$rootScope.$publish(chatboxMediatorChannels.POPIN_DISPLAYED);
else if(notifyPopinMinimized)$rootScope.$publish(chatboxMediatorChannels.POPIN_MINIMIZED);else notifyPopinMinimized=true;popinConfiguration=dyduUtils.clone(updatedPopinConfiguration)}function popinCloseRequestHandler(){notifyPopinMinimized=false;popinConfiguration.show=false;$rootScope.$publish(chatboxMediatorChannels.POPIN_UPDATE,popinConfiguration)}$timeout(function(){$rootScope.$publish(chatboxMediatorChannels.POPIN_UPDATE,popinConfiguration)})});
angular.module("dialogModule").run(function($context,$rootScope,$configurations){var templateInfo={templateFormats:$configurations.get("templateFormats")};$context.getTemplateFormats=getTemplateFormats;$context.setTemplateFormats=setTemplateFormats;function getTemplateFormats(){return templateInfo.templateFormats}function setTemplateFormats(formats){templateInfo.templateFormats=formats}});
angular.module("dialogModule").controller("interactionController",["$scope","$sce",function($scope,$sce){function trustAsHtml(interaction){if(interaction.type==="response")return $sce.trustAsHtml(interaction.text);return interaction.text}$scope.trustAsHtml=trustAsHtml}]).directive("ngInteraction",["$compile",function($compile){return{restrict:"E",scope:{"interaction":"\x3ddata"},replace:true,controller:"interactionController",link:function(scope,element,attrs){element.html('\x3cspan ng-bind-html\x3d"trustAsHtml(interaction)"\x3e\x3c/span\x3e');
$compile(element.contents())(scope)}}}]);
angular.module("livechatModule").run(function($context,$rootScope,$configurations){var LIVECHAT_COOKIE="dydu.livechat.info";var LIVECHAT_QUEUE_COOKIE="dydu.livechat.queueinfo";var LIVECHAT_USER_WRITING_CONTENT_COOKIE="dydu.livechat.userwritingcontentinfo";var livechatInfo=$context.getData(LIVECHAT_COOKIE,{enabled:false,operatorName:null,operatorLastName:null,operatorMail:null,monitoredDialog:false,operatorConnected:false,disconnectedText:null,hasProfilePicture:false,operatorExternalId:null});var queueInfo=
$context.getData(LIVECHAT_QUEUE_COOKIE,{show:false,isPriorityDialog:false});$context.isLivechatMode=isLivechatMode;$context.getOperatorName=getOperatorName;$context.getOperatorLastName=getOperatorLastName;$context.getOperatorMail=getOperatorMail;$context.getOperatorExternalId=getOperatorExternalId;$context.getProfilePictureStyle=getProfilePictureStyle;$context.isOperatorConnected=isOperatorConnected;$context.getDisconnectedText=getDisconnectedText;$context.getMode=getMode;$context.isPureLivechat=
isPureLivechat;$context.getSolutionUsed=getSolutionUsed;$context.getQueueInfo=getQueueInfo;$context.isMonitoredDialog=isMonitoredDialog;function getMode(){return isLivechatMode()?"Polling":"Synchron"}function isLivechatMode(){return livechatInfo.enabled}function getSolutionUsed(){return isLivechatMode()?"LIVECHAT":"ASSISTANT"}function getOperatorName(){return livechatInfo.operatorName}function getOperatorLastName(){return livechatInfo.operatorLastName}function getOperatorMail(){return livechatInfo.operatorMail}
function getOperatorExternalId(){return livechatInfo.operatorExternalId}function getProfilePictureStyle(interaction){var style={};if(dyduUtils.isDefined(interaction)){if(interaction.hasProfilePicture)style={"background":"url( "+getOperatorProfilePictureUrl(interaction.operatorExternalId,35,35)+") no-repeat center bottom"}}else if(livechatInfo.hasProfilePicture)style={"background":"url( "+getOperatorProfilePictureUrl(livechatInfo.operatorExternalId,100,100)+") no-repeat center bottom"};return style}
function getOperatorProfilePictureUrl(operatorExternalId,width,height){return $context.getServletToUse()+"/accountprofile?accountId\x3d"+operatorExternalId+"\x26width\x3d"+width+"\x26height\x3d"+height}function isOperatorConnected(){return livechatInfo.operatorConnected}function getDisconnectedText(){return livechatInfo.disconnectedText}function getQueueInfo(){return queueInfo}function livechatStartHandler(){livechatInfo.enabled=true;$context.setData(LIVECHAT_COOKIE,livechatInfo,COOKIES_OPTION)}function livechatEndHandler(){livechatInfo.enabled=
false;livechatInfo.operatorName=null;livechatInfo.operatorLastName=null;livechatInfo.operatorMail=null;livechatInfo.operatorConnected=false;livechatInfo.disconnectedText=null;livechatInfo.hasProfilePicture=false;livechatInfo.operatorExternalId=null;$context.setData(LIVECHAT_COOKIE,livechatInfo,COOKIES_OPTION)}function livechatQueueInfoHandler(evt,queueInfoInput){queueInfo=queueInfoInput;$context.setData(LIVECHAT_QUEUE_COOKIE,queueInfoInput,COOKIES_OPTION)}function talkResponseHandler(event,values){if(dyduUtils.isDefined(values.operatorExternalId)){try{if(livechatInfo.operatorName!==
values.operatorName)$rootScope.$publish(chatboxMediatorChannels.LIVECHAT_START_WITH_FIRST_OPERATOR,{operatorName:values.operatorName})}finally{livechatInfo.operatorName=values.operatorName}livechatInfo.operatorLastName=values.operatorLastName;livechatInfo.operatorMail=values.operatorMail;livechatInfo.hasProfilePicture=values.hasProfilePicture;livechatInfo.operatorExternalId=values.operatorExternalId;$context.setData(LIVECHAT_COOKIE,livechatInfo,COOKIES_OPTION);var userTypingContent=getUserTypingContent();
if(userTypingContent!=="")$rootScope.$publish(chatboxMediatorChannels.USER_TYPING,{typing:true,content:userTypingContent,forceEmit:true})}}function livechatOperatorConnectedHandler(event,statusInfo){livechatInfo.operatorConnected=statusInfo.connected;livechatInfo.disconnectedText=statusInfo.text;$context.setData(LIVECHAT_COOKIE,livechatInfo,COOKIES_OPTION)}function isPureLivechat(){return $configurations.get("isPureLivechat")||false}function isMonitoredDialog(){return livechatInfo.monitoredDialog}
function livechatUpdateMonitoredDialogHandler(evt,monitoredDialog){livechatInfo.monitoredDialog=monitoredDialog;$context.setData(LIVECHAT_COOKIE,livechatInfo,COOKIES_OPTION)}function getUserTypingContent(){return $context.getData(LIVECHAT_USER_WRITING_CONTENT_COOKIE,"")}function setUserTypingContent(event,data){$context.setData(LIVECHAT_USER_WRITING_CONTENT_COOKIE,data.content,COOKIES_OPTION)}$rootScope.$subscribe(chatboxMediatorChannels.TALK_RESPONSE,talkResponseHandler);$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_STARTED,
livechatStartHandler);$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_ENDED,livechatEndHandler);$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_UPDATE_QUEUE_INFO,livechatQueueInfoHandler);$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_UPDATE_OPERATOR_CONNECTED,livechatOperatorConnectedHandler);$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_UPDATE_MONITORED_DIALOG,livechatUpdateMonitoredDialogHandler);$rootScope.$subscribe(chatboxMediatorChannels.USER_TYPING,setUserTypingContent)});
angular.module("livechatModule").run(function($rootScope,$context,$interval,$configurations,$messageFactory,$timeout){$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_START_REQUEST,livechatConnectionHandler);$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_END_REQUEST,livechatEndHandler);$rootScope.$subscribe(TALK_RESPONSE_EVENT,talkResponseHandler);$rootScope.$subscribe(chatboxMediatorChannels.NOTIFICATION,notificationHandler);$rootScope.$subscribe(chatboxMediatorChannels.USER_TYPING,
userTypingHandler);$rootScope.$subscribe(chatboxMediatorChannels.QUEUE_RESPONSE,queueResponseHandler);var userTypingInterval;var userTyping=false;var writingContent="";var lastUserTyping=false;var lastWritingContent="";$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_STARTED,livechatStartedHandler);$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_ENDED,livechatEndedHandler);function livechatConnectionHandler(){$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#livechatconnection#",
options:{hideFromUser:true}})}function livechatEndHandler(){if($context.isLivechatMode())$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#livechatend#",options:{hideFromUser:true}})}function talkResponseHandler(event,values){if(values.startLivechat||values.specialAction==="StartPolling"){$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_STARTED);$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_OPERATOR_CONNECTED,{connected:true,text:null})}if("EndPolling"===values.specialAction)$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_ENDED);
if("LeaveWaitingQueue"===values.specialAction){$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_ENDED);$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_QUEUE_INFO,{show:false,reason:"dropped"})}else if("StartWaitingQueue"===values.specialAction||dyduUtils.isDefined(values.queuePosition)){$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_STARTED);$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_OPERATOR_CONNECTED,{connected:true,text:null});updateQueueInfo(values.queuePosition,
values.estimatedWaitingDuration,values.isAnyOperatorAvailable,values.isPriorityDialog,"StartWaitingQueue"===values.specialAction)}}function queueResponseHandler(event,response){if(dyduUtils.isDefined(response.serverTime)&&response.serverTime>=$context.getServerTime()){$rootScope.$publish(globalMediatorChannels.UPDATE_SERVER_TIME,response.serverTime);updateQueueInfo(response.queuePosition,response.estimatedWaitingDuration,response.isAnyOperatorAvailable,response.isPriorityDialog)}}function updateQueueInfo(queuePosition,
estimatedWaitingDuration,isAnyOperatorAvailable,isPriorityDialog,forceShow){var show=dyduUtils.isDefined(queuePosition)||dyduUtils.isDefined(forceShow)&&forceShow;var queueInfo={show:show,queuePosition:queuePosition,estimatedWaitingDuration:estimatedWaitingDuration,isAnyOperatorAvailable:isAnyOperatorAvailable,isPriorityDialog:isPriorityDialog};if(!show)queueInfo.reason="connected";$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_QUEUE_INFO,queueInfo)}function notificationHandler(event,
values){if(dyduUtils.isDefined(values.serverTime))$rootScope.$publish(globalMediatorChannels.UPDATE_SERVER_TIME,values.serverTime);if(isLivechatEnded(values))$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_ENDED);if(values.code==="OperatorDisconnected")$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_OPERATOR_CONNECTED,{connected:false,text:values.text});else if(values.code==="OperatorConnected"||values.code==="OperatorBusy")$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_OPERATOR_CONNECTED,
{connected:true,text:null})}function isLivechatEnded(values){var onHumanCloseDialog=values.code==="OnOperatorCloseDialog"||values.code==="OnManagerCloseDialog"||values.code==="OnUserCloseDialog";return onHumanCloseDialog||values.code==="TimeOut"||values.code==="DialogFinished"}function livechatStartedHandler(){$rootScope.$publish(chatboxMediatorChannels.POLLING_START);userTypingInterval=$interval(userTypingIntervalCheck,1E3);$timeout(function(){$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#updatecurrenturl#",
options:{hideFromUser:true}})},500)}function livechatEndedHandler(){$rootScope.$publish(chatboxMediatorChannels.POLLING_STOP);if(dyduUtils.isDefined(userTypingInterval)){$interval.cancel(userTypingInterval);userTypingInterval=null}}function userTypingIntervalCheck(){if(userTyping!==lastUserTyping||writingContent!==lastWritingContent){lastUserTyping=userTyping;lastWritingContent=writingContent;$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createUserWritingMessage(userTyping,
writingContent))}}function userTypingHandler(event,data){if($context.isLivechatMode()&&(userTyping!==data.typing||writingContent!==data.content||data.forceEmit)){userTyping=data.typing;writingContent=data.content}}if($context.isLivechatMode()||$context.isMonitoredDialog())$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_STARTED)});
angular.module("livechatModule").run(function($rootScope,$context,$interval){$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_UPDATE_QUEUE_INFO,updateQueueInfoHandler);$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_LEAVE_QUEUE_REQUEST,livechatLeaveQueueHandler);$rootScope.$subscribe(chatboxMediatorChannels.TALK_RESPONSE,talkResponseHandler);$rootScope.$subscribe(chatboxMediatorChannels.HISTORY_RESPONSE,historyResponseHandler);var queueInfo=$context.getQueueInfo();var countDownInterval;
startCountDown();function startCountDown(){cancelCurrentCountDown();if(dyduUtils.isDefined(queueInfo.estimatedWaitingDuration)&&queueInfo.estimatedWaitingDuration>0){queueInfo.fromCountDown=true;countDownInterval=$interval(updateCountDown,1E3,queueInfo.estimatedWaitingDuration-1)}}function updateCountDown(){queueInfo.estimatedWaitingDuration=queueInfo.estimatedWaitingDuration-1;$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_QUEUE_INFO,queueInfo)}function updateQueueInfoHandler(evt,queueInfoInput){if(dyduUtils.isNotDefined(queueInfoInput.fromCountDown)){queueInfo=
queueInfoInput;startCountDown()}}function livechatLeaveQueueHandler(){$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#livechatleavequeue#",options:{hideFromUser:true}});$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_QUEUE_INFO,{show:false,reason:"dropped"})}function cancelCurrentCountDown(){if(dyduUtils.isDefined(countDownInterval)){$interval.cancel(countDownInterval);countDownInterval=null}}function talkResponseHandler(evt,answer){if(answer.human&&queueInfo.show)hideQueueInfo()}
function historyResponseHandler(evt,history){if(queueInfo.show&&dyduUtils.isDefined(history.interactions)&&history.interactions.length>0){var operatorName=history.interactions[history.interactions.length-1].operatorName;var isPriorityDialog=dyduUtils.isDefined(queueInfo.isPriorityDialog)&&queueInfo.isPriorityDialog;if(dyduUtils.isDefined(operatorName)&&operatorName!==""&&!isPriorityDialog)hideQueueInfo()}}function hideQueueInfo(){cancelCurrentCountDown();$rootScope.$publish(chatboxMediatorChannels.LIVE_CHAT_UPDATE_QUEUE_INFO,
{show:false})}});
angular.module("livechatModule").run(function($context,$rootScope,$notification,$configurations){$rootScope.$subscribe(TALK_RESPONSE_EVENT,notify);function notify(event,response){if($context.isLivechatMode()&&dyduUtils.isDefined($context.getOperatorName())&&dyduUtils.isDefined(response.text))$notification(dyduUtils.renderHtml($rootScope.resources.get("chatbox.notification.newmessage").replace("{operatorFirstName}",$context.getOperatorName())),{body:String(response.text).replace(/<[^>]+>/gm," "),icon:$rootScope.resources.get("chatbox.notification.icon.url"),
focusWindowOnClick:true});if($context.isLivechatMode())playSoundIfDefined("soundLivechat");else playSoundIfDefined("soundAssistant")}function playSoundIfDefined(soundConfigurationKey){var sound=$configurations.get(soundConfigurationKey);if(dyduUtils.isDefined(sound))try{var clickSound=new Audio(dyduUtils.getJsBaseUrl()+"files/"+sound);clickSound.play()}catch(e){if(typeof console!=="undefined"&&console!==null)console.error(e)}}});
angular.module("livechatModule").run(function($rootScope,$context,$window,$configurations,$interval){var windowHasFocus=true;var windowOnFocusFunction=$window.onfocus;var windowOnBlurFunction=$window.onblur;var windowOriginalTitle=$window.top.document.title;var newMessageText="";var blinkInterval=null;if($configurations.get("blinkTitleBar")){$rootScope.$subscribe(chatboxMediatorChannels.NEW_RESPONSE_RECEIVED,newResponseReceivedHandler);$window.onfocus=onWindowFocus;$window.onblur=onWindowBlur}function onWindowFocus(e){if(typeof windowOnFocusFunction===
"function")windowOnFocusFunction(e);windowHasFocus=true;cancelBlink()}function cancelBlink(){if(null!==blinkInterval){$interval.cancel(blinkInterval);blinkInterval=null;$window.top.document.title=windowOriginalTitle}}function onWindowBlur(e){if(typeof windowOnBlurFunction==="function")windowOnBlurFunction(e);windowHasFocus=false}function newResponseReceivedHandler(){if(!windowHasFocus&&null===blinkInterval){windowOriginalTitle=$window.top.document.title;newMessageText=dyduUtils.renderHtml($rootScope.resources.get("chatbox.notification.newmessage").replace("{operatorFirstName}",
$context.getOperatorName()));blinkInterval=$interval(blink,1E3)}}function blink(){var newTitle=$window.top.document.title===windowOriginalTitle?newMessageText:windowOriginalTitle;$window.top.document.title=newTitle}});
angular.module("surveyModule").directive("dyduId",[function(){return{restrict:"A",link:function(scope,elem,attrs){scope.$watch(attrs.dyduId,function(id){elem.attr("id",id)})}}}]);
angular.module("messageFactoryModule").config(function($provide){$provide.decorator("$messageFactory",["$delegate","$context",function($delegate,$context){function createSurveyMessage(surveyFields){var surveyConfiguration=$context.getSurveyConfiguration();var request={type:"survey",parameters:{botId:$context.getBotId(),surveyId:surveyConfiguration.id,interactionSurveyAnswer:surveyConfiguration.interactionSurvey,fields:surveyFields}};$delegate.addContextParameters(request.parameters,request.type);
if(dyduUtils.isDefined(surveyConfiguration.contextId)&&surveyConfiguration.contextId!=="")request.parameters.contextId=surveyConfiguration.contextId;return request}$delegate.createSurveyMessage=createSurveyMessage;return $delegate}])});
angular.module("surveyModule").factory("$survey",["$rootScope","$context","$timeout",function($rootScope,$context,$timeout){var surveys={};var surveyService={addSurvey:addSurvey,getSurvey:getSurvey};function addSurvey(survey){surveys[survey.id]=survey}function getSurvey(surveyId){return surveys[surveyId]}return surveyService}]);
angular.module("surveyModule").run(function($survey,$http,$log,$rootScope){$rootScope.$subscribe(globalMediatorChannels.SURVEY_BOOTSTRAP_REQUEST,surveyBootstrapRequestHandler);function surveyBootstrapRequestHandler(){if(dyduUtils.isDefined(dyduUtils.getJsBaseUrl($log)))$http.jsonp(dyduUtils.getJsBaseUrl()+"surveys_angular.js?callback\x3dJSON_CALLBACK").success(function(surveys){if("object"===typeof surveys){for(var i=0;i<surveys.length;i++)$survey.addSurvey(surveys[i]);$rootScope.$publish(globalMediatorChannels.SURVEY_READY)}}).error(function(data,
status){$log.error("Error "+status+" with reason "+data+". Could not retrieve surveys at "+dyduUtils.getJsBaseUrl()+"surveys_angular.js")})}});
angular.module("surveyModule").controller("surveyController",["$scope","$context","$survey","$log","$configurations","$timeout",function($scope,$context,$survey,$log,$configurations,$timeout){$scope.$subscribe(globalMediatorChannels.SURVEY_UPDATE,surveyUpdateHandler);var surveyConfiguration=$context.getSurveyConfiguration();var survey=null;var surveyBootstrapped=false;$scope.close=close;$scope.submit=submit;$scope.getTitle=getTitle;$scope.showCloseButton=true;$scope.getText=getText;$scope.getRequiredMessage=
getRequiredMessage;$scope.showRequiredMsg=false;$scope.useInternalSurvey=$configurations.get("useInternalSurvey",false);if($scope.useInternalSurvey)surveyUpdateHandler(null,surveyConfiguration);$scope.$subscribe(globalMediatorChannels.SURVEY_READY,function(){surveyBootstrapped=true;surveyUpdateHandler(null,surveyConfiguration)});$scope.refreshSlaveFields=refreshSlaveFields;$scope.resetSlaveFields=resetSlaveFields;$scope.hasAnyRequiredField=hasAnyRequiredField;$scope.resetValue=resetValue;$scope.getFieldByElementId=
getFieldByElementId;function close(){surveyConfiguration.show=false;surveyConfiguration.modal=false;$scope.showCloseButton=true;$scope.$publish(globalMediatorChannels.SURVEY_UPDATE,surveyConfiguration)}function submit(){var answers=getSurveyAnswer();$scope.showRequiredMsg=answers==null;if(!$scope.showRequiredMsg){$scope.$publish(globalMediatorChannels.SURVEY_SUBMIT,answers);close()}}function findChildWithId(children,id){for(var i=0;i<children.length;i++){var currentChild=children[i];if(currentChild.id===
id)return currentChild}}function setValue(currentField,surveyAnswer,i){if(dyduUtils.isDefined(currentField.value.childId))surveyAnswer[currentField.value.childId]=getFieldValue(findChildWithId(currentField.children,currentField.value.childId));else if(currentField.type==="SELECT"){if(dyduUtils.isDefined(currentField.value.id))surveyAnswer[currentField.value.id]=getFieldValue(currentField)}else surveyAnswer[currentField.id]=getFieldValue(currentField);$scope.fields[i].classRequired=false}function withChild(currentField,
surveyAnswer,i,atLessOneRequired){var haveOneValue=false;for(var j=0;j<currentField.children.length;j++){var currentChild=currentField.children[j];if(dyduUtils.isDefined(currentChild.value)&&currentChild.value){surveyAnswer[currentChild.id]=getFieldValue(currentChild);haveOneValue=haveOneValue||true}}if(!haveOneValue){$scope.fields[i].classRequired=dyduUtils.isDefined(currentField.required);atLessOneRequired=atLessOneRequired||dyduUtils.isDefined(currentField.required)}return atLessOneRequired}function getSurveyAnswer(){var surveyAnswer=
{};var atLessOneRequired=false;for(var i=0;i<$scope.fields.length;i++){var currentField=dyduUtils.clone($scope.fields[i]);var parentIsDisplayed=dyduUtils.isDefined(currentField.isDisplayed)&&currentField.isDisplayed;var childrenAreDisplayed=dyduUtils.isDefined(currentField.children)&&currentField.children[0].isDisplayed;if(parentIsDisplayed||childrenAreDisplayed)atLessOneRequired=setFieldValueInSurveyAnswer(currentField,surveyAnswer,i,atLessOneRequired)}return atLessOneRequired?null:surveyAnswer}
function setFieldValueInSurveyAnswer(currentField,surveyAnswer,i,atLessOneRequired){if(dyduUtils.isDefined(currentField.value)&&currentField.value!=="")setValue(currentField,surveyAnswer,i);else if(dyduUtils.isDefined(currentField.children))atLessOneRequired=withChild(currentField,surveyAnswer,i,atLessOneRequired);else{$scope.fields[i].classRequired=dyduUtils.isDefined(currentField.required);atLessOneRequired=atLessOneRequired||dyduUtils.isDefined(currentField.required)}return atLessOneRequired}function getFieldValue(field){if(field.type===
"SELECT")return field.value.label;else if(field.type==="CHECKBOX"||field.type==="RADIO")return field.label;return""+field.value}function hasAnyRequiredField(){if(dyduUtils.isDefined($scope.fields))for(var i=0;i<$scope.fields.length;i++){var field=$scope.fields[i];if(field.required)return true}return false}function surveyUpdateHandler(evt,newSurveyConfiguration){surveyConfiguration=newSurveyConfiguration;if(!surveyBootstrapped){$scope.$publish(globalMediatorChannels.SURVEY_BOOTSTRAP_REQUEST);return}survey=
$survey.getSurvey(surveyConfiguration.id);$scope.showSurvey=surveyConfiguration.show;if(surveyConfiguration.show&&dyduUtils.isDefined(survey)){var lang=$context.getCurrentLanguage();$scope.fields=survey.fields;for(var i=0;i<$scope.fields.length;i++){var currentField=$scope.fields[i];currentField.label=currentField.fieldLabels[lang];currentField.name="field_"+currentField.id;currentField.classRequired=false;currentField.masterClasses=dyduUtils.isNotDefined(currentField.master)?"":"master"+currentField.master+
" masterParent"+currentField.masterParent;delete currentField.value;if(dyduUtils.isDefined(currentField.children))for(var j=0;j<currentField.children.length;j++){var currentChild=currentField.children[j];currentChild.label=currentChild.fieldLabels[lang];currentChild.name="field_"+currentChild.id;currentChild.parentName=currentField.name;if(currentChild.type==="RADIO")currentChild.childValue={childId:currentChild.id};delete currentChild.value}}if(dyduUtils.isDefined(surveyConfiguration.modal)&&surveyConfiguration.modal){$scope.showCloseButton=
false;if(dyduUtils.isDefined(chatboxMediatorChannels))$scope.$publish(chatboxMediatorChannels.LOCK_TEXTFIELD)}$timeout(function(){initSlaveFields();$scope.$publish(globalMediatorChannels.SURVEY_LOADED)})}else if(surveyConfiguration.show&&!dyduUtils.isDefined(survey)&&dyduUtils.isDefined(surveyConfiguration.id))$log.error("No survey found for "+surveyConfiguration.id)}function getTitle(){return getLabel("title")}function getRequiredMessage(){return getLabel("requiredMsg")}function getText(){return getLabel("text")}
function getLabel(name){var lang=$context.getCurrentLanguage();if(dyduUtils.isDefined(survey))if(dyduUtils.isDefined(survey.labels[lang]))if(dyduUtils.isDefined(survey.labels[lang][name]))return survey.labels[lang][name];else{$log.error("Survey label "+name+" for language "+lang+" does not exist.");survey.labels[lang][name]=name+" "+lang}else{$log.error("Survey label "+name+" for language "+lang+" does not exist.");survey.labels[lang]=[];survey.labels[lang][name]=name+" "+lang}return name+" "+lang}
function initSlaveFields(){for(var i=0;i<$scope.fields.length;i++){var parentField=$scope.fields[i];parentField.isDisplayed=dyduUtils.isNotDefined(parentField.master);if(parentField.type==="SELECT")refreshSlaveFields(parentField.name);else if(parentField.type==="MULTIPLE_CHOICE"&&dyduUtils.isDefined(parentField.children))for(var j=0;j<parentField.children.length;j++){var childField=parentField.children[j];childField.isDisplayed=dyduUtils.isNotDefined(parentField.master);refreshSlaveFields(childField.name)}}}
function refreshSlaveFields(elementId){var currentItem=dyduUtils.isDefined(this.field)?this.field:getFieldByElementId(elementId);if(dyduUtils.isDefined(currentItem)){var isSelect=currentItem.type==="SELECT";var isRadio=dyduUtils.isDefined(currentItem.children)&&currentItem.children[0].type==="RADIO";var isCheckbox=dyduUtils.isDefined(currentItem.children)&&currentItem.children[0].type==="CHECKBOX";if(isSelect||isRadio)refreshSlavesFieldsOfSelectOrRadio(currentItem,isSelect,isCheckbox);else if(isCheckbox)refreshSlaveFieldsOfCheckbox(currentItem,
isCheckbox)}}function refreshSlavesFieldsOfSelectOrRadio(currentItem,isSelect){var fieldId=dyduUtils.isDefined(currentItem.value)?isSelect?currentItem.value.id:currentItem.value.childId:null;var parentId=currentItem.id;var isDisplayed=dyduUtils.isDefined(currentItem.value);refresh(isNaN(fieldId)?null:parseInt(fieldId),isNaN(parentId)?null:parseInt(parentId),isDisplayed,false)}function refreshSlaveFieldsOfCheckbox(currentItem){if(dyduUtils.isDefined(currentItem.children)){var parentId=dyduUtils.isDefined(currentItem.parent)?
currentItem.parent:currentItem.id;for(var i=0;i<currentItem.children.length;i++){var child=currentItem.children[i];var fieldId=child.id;var isDisplayed=dyduUtils.isDefined(child.value)&&child.value;refresh(isNaN(fieldId)?null:parseInt(fieldId),isNaN(parentId)?null:parseInt(parentId),isDisplayed,true)}}}function refresh(refreshedMasterId,refreshedMasterParentId,isDisplayed,masterIsCheckbox){for(var i=0;i<$scope.fields.length;i++){var field=$scope.fields[i];if(field.masterParent===refreshedMasterParentId){var resetSlavesOfCheckbox=
masterIsCheckbox&&field.master===refreshedMasterId&&!isDisplayed;var resetSlavesOfNotCheckbox=!masterIsCheckbox&&(field.master!==refreshedMasterId||!isDisplayed);if(resetSlavesOfCheckbox||resetSlavesOfNotCheckbox){resetSlaveFields(refreshedMasterId,refreshedMasterParentId,masterIsCheckbox);propagateToOwnSlaves(field)}}}if(isDisplayed)displayElements(".master"+refreshedMasterId,true)}function propagateToOwnSlaves(field){if(dyduUtils.isDefined(field.children))for(var j=0;j<field.children.length;j++){var child=
field.children[j];refresh(child.id,child.parent,false,child.type==="CHECKBOX")}}function displayElements(selector,isDisplayed){var elements=document.querySelectorAll(selector);for(var i=0;i<elements.length;i++){var element=elements[i];element.style.display=isDisplayed?"block":"none";var elementFields=element.querySelectorAll('select,input[type\x3d"radio"],input[type\x3d"checkbox"],input[type\x3d"text"],textarea');for(var j=0;j<elementFields.length;j++){var elementField=elementFields[j];elementField.disabled=
!isDisplayed;var field=getFieldByElementId(elementField.id);field.isDisplayed=isDisplayed;if(dyduUtils.isDefined(field.children))for(var k=0;k<field.children.length;k++)field.children[k].isDisplayed=isDisplayed}}}function resetSlaveFields(fieldId,parentId,masterIsCheckbox){displayElements(masterIsCheckbox?".master"+fieldId:".masterParent"+parentId,false);for(var i=0;i<$scope.fields.length;i++){var field=$scope.fields[i];if(field.masterParent===parentId&&mustResetValue(masterIsCheckbox,field,fieldId))resetValue(field)}}
function mustResetValue(masterIsCheckbox,field,fieldId){var resetSlavesOfCheckbox=masterIsCheckbox&&field.master===fieldId;var resetAllSiblingsSlaves=!masterIsCheckbox&&dyduUtils.isNotDefined(fieldId);var resetOtherSiblingsSlaves=!masterIsCheckbox&&dyduUtils.isDefined(fieldId)&&field.master!==fieldId;return resetSlavesOfCheckbox||resetAllSiblingsSlaves||resetOtherSiblingsSlaves}function resetValue(field){var isCheckbox=dyduUtils.isDefined(field.children)&&field.children[0].type==="CHECKBOX";if(isCheckbox)for(var j=
0;j<field.children.length;j++)delete field.children[j].value;else delete field.value}function getFieldByElementId(elementId){for(var i=0;i<$scope.fields.length;i++){var parentField=$scope.fields[i];if(parentField.type==="MULTIPLE_CHOICE"&&dyduUtils.isDefined(parentField.children))for(var j=0;j<parentField.children.length;j++){var childField=parentField.children[j];if(childField.name===elementId)return parentField}else if(parentField.name===elementId)return parentField}}}]);
angular.module("feedbackModule").controller("feedbackController",["$scope","$configurations","$messageFactory","$timeout",function($scope,$configurations,$messageFactory,$timeout){$scope.$subscribe(globalMediatorChannels.FEEDBACK_UPDATE_STATE,feedbackUpdateStateHandler);if(dyduUtils.isDefined($scope.$parent.getCurrentReword))$scope.reword=$scope.$parent.getCurrentReword($scope.$parent);if(dyduUtils.isDefined($configurations.get("feedBack.choices"))){$scope.choices=[];for(var i=0;i<$configurations.get("feedBack.choices").length;i++)$scope.choices.push({discriminator:i,
key:$configurations.get("feedBack.choices")[i]})}$scope.useInternalFeedback=$configurations.get("useInternalFeedback",false);$scope.chosen=0;$scope.improvement="";startFeedback();$scope.isState=function(state){return $scope.currentState===state};function startFeedback(){$scope.$publish(globalMediatorChannels.FEEDBACK_UPDATE_STATE,{state:FEEDBACK_STATES.question,scopeId:$scope.$id})}function endFeedback(){$scope.$publish(globalMediatorChannels.FEEDBACK_UPDATE_STATE,{state:FEEDBACK_STATES.done,scopeId:$scope.$id})}
function sendFeedback(value){var feedbackMessage;if(dyduUtils.isDefined($scope.reword)&&dyduUtils.isDefined($messageFactory.createFeedBackMessageInteraction)){var unsubscribeFunction=$scope.$subscribe(globalMediatorChannels.FEEDBACK_INTERACTION_ANSWER,function(evt,data){if(dyduUtils.isDefined(data.reword)&&data.reword===$scope.reword){$scope.$publish(globalMediatorChannels.FEEDBACK_WITH_REWORD,{feedback:value?"positive":"negative",question:data.reword});$scope.$publish(globalMediatorChannels.SERVLET_EMIT,
$messageFactory.createFeedBackMessage(value));unsubscribeFunction();rewordAfterFeedbackIfNecessary(value)}});feedbackMessage=$messageFactory.createFeedBackMessageInteraction($scope.reword);$scope.$publish(globalMediatorChannels.SERVLET_EMIT,feedbackMessage)}else{$scope.$publish(globalMediatorChannels.FEEDBACK,{feedback:value?"positive":"negative"});feedbackMessage=$messageFactory.createFeedBackMessage(value);$scope.$publish(globalMediatorChannels.SERVLET_EMIT,feedbackMessage);rewordAfterFeedbackIfNecessary(value)}}
function rewordAfterFeedbackIfNecessary(feedbackValue){var feedbackreword=feedbackValue?$configurations.get("positivefeedbackreword",""):$configurations.get("negativefeedbackreword","");if(feedbackreword!=="")$scope.$publish(globalMediatorChannels.REWORD,{text:feedbackreword,options:{type:"reword_feedback"}})}$scope.clickYes=function(){sendFeedback(true);$scope.$publish(globalMediatorChannels.FEEDBACK_UPDATE_STATE,{state:FEEDBACK_STATES.endPositive,scopeId:$scope.$id});$timeout(endFeedback,1E3)};
$scope.clickNo=function(){sendFeedback(false);$scope.$publish(globalMediatorChannels.FEEDBACK_UPDATE_STATE,{state:FEEDBACK_STATES.reason,scopeId:$scope.$id})};$scope.submitReason=function(){$scope.$publish(globalMediatorChannels.FEEDBACK_UPDATE_STATE,{state:FEEDBACK_STATES.improve,scopeId:$scope.$id});var chosen=$scope.chosen;var reason=$scope.resources.get($scope.choices[chosen].key);$scope.$publish(globalMediatorChannels.FEEDBACK_REASON,{choice:chosen,reason:reason,question:$scope.reword});$scope.$publish(globalMediatorChannels.SERVLET_EMIT,
$messageFactory.createFeedBackChoiceMessage(chosen))};$scope.submitImprove=function(){$scope.$publish(globalMediatorChannels.FEEDBACK_UPDATE_STATE,{state:FEEDBACK_STATES.endNegative,scopeId:$scope.$id});$scope.$publish(globalMediatorChannels.FEEDBACK_COMMENT,{comment:$scope.improvement});$scope.$publish(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createFeedBackCommentMessage($scope.improvement));$timeout(endFeedback,1E3)};$scope.setChoice=function(discriminator){$scope.chosen=discriminator};
function feedbackUpdateStateHandler(evt,param){if(mustScrollToBottom())$timeout(scrollToBottom);if(!dyduUtils.isDefined(param.scopeId)||param.scopeId===$scope.$id)$scope.currentState=param.state}function mustScrollToBottom(){var historyDiv=document.getElementById("dydu-history");return dyduUtils.isScrolledToBottom(historyDiv)}function scrollToBottom(){var historyDiv=document.getElementById("dydu-history");historyDiv.scrollTop=historyDiv.scrollHeight}}]);
angular.module("teaserModule").run(function($context,$rootScope,$configurations){var TEASER_COOKIE="dydu.teaser";var defaultTeaserConfiguration={type:TEASER_TYPE.CLASSIC,timeout:-1,action:null,reword:null,show:$configurations.get("showTeaserOnLoad")};$context.getTeaserConfiguration=getTeaserConfiguration;function getTeaserConfiguration(returnDefaultConfig){if(returnDefaultConfig)return defaultTeaserConfiguration;return $context.getData(TEASER_COOKIE,defaultTeaserConfiguration)}function setTeaserConfiguration(event,
teaser){$context.setData(TEASER_COOKIE,teaser,COOKIES_OPTION)}function removeTeaserConfiguration(){$context.removeData(TEASER_COOKIE)}function popinUpdateHandler(){$context.setData(TEASER_COOKIE,getTeaserConfiguration(),COOKIES_OPTION)}$rootScope.$subscribe(chatboxMediatorChannels.TEASER_UPDATE,setTeaserConfiguration);$rootScope.$subscribe(chatboxMediatorChannels.TEASER_RESET,removeTeaserConfiguration);$rootScope.$subscribe(chatboxMediatorChannels.POPIN_UPDATE,popinUpdateHandler)});
var TEASER_TYPE={CLASSIC:"classic",ALERT:"alert",OPTIONS:"options"};
angular.module("teaserModule").controller("teaserController",["$scope","$context","$timeout",function($scope,$context,$timeout){var teaserConfiguration;updateTeaserHandler(null,$context.getTeaserConfiguration());$scope.$subscribe(chatboxMediatorChannels.TEASER_UPDATE,updateTeaserHandler);$scope.$subscribe(chatboxMediatorChannels.POPIN_DISPLAYED,popinDisplayedHandler);$scope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CONFIRM,confirmDialogConfirmHandler);$scope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CANCEL,
confirmDialogCancelHandler);$scope.showClassicTeaser=showClassicTeaser;$scope.showAlertTeaser=showAlertTeaser;$scope.showOptionTeaser=showOptionTeaser;$scope.onClick=onClick;$scope.getProfilePictureStyle=getProfilePictureStyleFunction();function tc_events_handler(item,id,event){if(typeof tc_events_8==="function")tc_events_8(item,id,event)}function isTeaserType(type){return dyduUtils.isDefined(teaserConfiguration)&&teaserConfiguration.show&&teaserConfiguration.type===type}function showClassicTeaser(){return isTeaserType(TEASER_TYPE.CLASSIC)}
function showAlertTeaser(){return isTeaserType(TEASER_TYPE.ALERT)}function showOptionTeaser(){return isTeaserType(TEASER_TYPE.OPTIONS)}function popinDisplayedHandler(){hideTeaser()}function openPopin(){$scope.$publish(chatboxMediatorChannels.TEASER_CLICKED);hideTeaser()}function updateTeaserHandler(e,teaser){teaserConfiguration=teaser;if(TEASER_TYPE.ALERT===teaser.type)if(teaser.show)$scope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,{clazz:"dydu-teaser",title:$scope.resources.get("chatbox.teaser.need.help"),
text:$scope.resources.get("chatbox.teaser.confirm.text"),yes:$scope.resources.get("chatbox.teaser.confirm.yes"),no:$scope.resources.get("chatbox.teaser.confirm.no")});else $scope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,{hide:true});handleTimer()}function confirmDialogConfirmHandler(evt,message){if("dydu-teaser"===message.clazz)openPopin()}function confirmDialogCancelHandler(evt,message){if("dydu-teaser"===message.clazz)hideTeaser()}var teaserTimeout;function handleTimer(){if(mustSetTeaserTimeout()){if(dyduUtils.isDefined(teaserTimeout))$timeout.cancel(teaserTimeout);
teaserTimeout=$timeout(hideTeaser,1E3*teaserConfiguration.timeout)}}function mustSetTeaserTimeout(){return dyduUtils.isDefined(teaserConfiguration)&&teaserConfiguration.show&&dyduUtils.isDefined(teaserConfiguration.timeout)&&teaserConfiguration.timeout>-1}function hideTeaser(){if(dyduUtils.isDefined(teaserTimeout)){$timeout.cancel(teaserTimeout);teaserTimeout=null}teaserConfiguration.show=false;$scope.$publish(chatboxMediatorChannels.TEASER_UPDATE,teaserConfiguration)}function onClick(){handleClickAction();
handleReword();handleAction();hideTeaser();tc_events_handler(this,null,"chatbot_open")}function handleClickAction(){$scope.$publish(chatboxMediatorChannels.TEASER_CLICKED)}function handleReword(){if(dyduUtils.isDefined(teaserConfiguration.reword))$scope.$publish(globalMediatorChannels.REWORD,{text:teaserConfiguration.reword,options:{hideFromUser:true}})}function handleAction(){if(dyduUtils.isDefined(teaserConfiguration.action))$scope.$publish(chatboxMediatorChannels.TEASER_ACTION,{action:teaserConfiguration.action})}
function getProfilePictureStyleFunction(){if(dyduUtils.isDefined($context.getProfilePictureStyle))return $context.getProfilePictureStyle;return function(){return{}}}}]);
angular.module("teaserModule").run(function($rootScope,$context){$rootScope.$subscribe(chatboxMediatorChannels.POPIN_MINIMIZED,popinMinimizedHandler);var teaserConfiguration=$context.getTeaserConfiguration();function popinMinimizedHandler(){if(dyduUtils.isDefined(teaserConfiguration.type)){teaserConfiguration=$context.getTeaserConfiguration(true);teaserConfiguration.show=true;$rootScope.$publish(chatboxMediatorChannels.TEASER_UPDATE,teaserConfiguration)}}});
var VIDEOCHAT_STATE={HIDDEN:"hidden",ASKING:"asking",ERROR:"error",CONFIRM_END:"confirm_end"};
angular.module("dialogModule").run(function($context,$rootScope){$rootScope.$subscribe(chatboxMediatorChannels.VIDEOCHAT_STARTED,videochatStartedHandler);$rootScope.$subscribe(chatboxMediatorChannels.VIDEOCHAT_ENDED,videochatEndedHandler);$rootScope.$subscribe(chatboxMediatorChannels.VIDEOCHAT_STATE_UPDATE,videochatStateUpdateHandler);var VIDEOCHAT_COOKIE="dydu.videochat";var videochatState=$context.getData(VIDEOCHAT_COOKIE,{enabled:false,state:VIDEOCHAT_STATE.HIDDEN,session:null,token:null});$context.isVideochatEnabled=
isVideochatEnabled;$context.getVideochatState=getVideochatState;$context.getVideochatSession=getVideochatSession;$context.getVideochatToken=getVideochatToken;function isVideochatEnabled(){return videochatState.enabled}function getVideochatState(){return videochatState.state}function getVideochatSession(){return videochatState.session}function getVideochatToken(){return videochatState.token}function videochatStartedHandler(evt,params){videochatState.enabled=true;videochatState.session=params.session;
videochatState.token=params.token;saveCookie()}function videochatStateUpdateHandler(evt,newState){videochatState.state=newState;saveCookie()}function videochatEndedHandler(){videochatState={enabled:false,state:VIDEOCHAT_STATE.HIDDEN,session:null,token:null};saveCookie()}function saveCookie(){$context.setData(VIDEOCHAT_COOKIE,videochatState,COOKIES_OPTION)}});
angular.module("dialogModule").run(function($rootScope,$tokbox,$context,$log){$rootScope.$subscribe(chatboxMediatorChannels.NOTIFICATION,notificationHandler);$rootScope.$subscribe(chatboxMediatorChannels.VIDEOCHAT_ACCEPTED,videochatAcceptedHandler);$rootScope.$subscribe(chatboxMediatorChannels.VIDEOCHAT_DECLINED,videochatDeclinedHandler);$rootScope.$subscribe(chatboxMediatorChannels.VIDEOCHAT_STOP_REQUEST,videochatStopRequestHandler);$rootScope.$subscribe(chatboxMediatorChannels.VIDEOCHAT_SUPPORTED,
videochatSupportedHandler);if($context.isVideochatEnabled())$tokbox.initVideochat($context.getVideochatSession(),$context.getVideochatToken());function notificationHandler(event,notification){if(notification.code==="OnVideoChatRequest"&&!$context.isVideochatEnabled())$tokbox.checkVideochatSupport();else if(notification.code==="OnVideoChatStart"){var infos=notification.text.split("$");$tokbox.initVideochat(infos[0],infos[1],{onSuccess:function(){$rootScope.$publish(chatboxMediatorChannels.VIDEOCHAT_STARTED,
{session:infos[0],token:infos[1]});$rootScope.$publish(chatboxMediatorChannels.VIDEOCHAT_STATE_UPDATE,VIDEOCHAT_STATE.HIDDEN)},onFailure:function(error){$log.error("Error "+error.code+" starting videochat: "+error.message);$rootScope.$publish(chatboxMediatorChannels.VIDEOCHAT_STATE_UPDATE,VIDEOCHAT_STATE.ERROR)}})}else if(notification.code==="OnVideoChatEnd")$rootScope.$publish(chatboxMediatorChannels.VIDEOCHAT_STOP_REQUEST);else if(notification.code==="OnVideoChatError")$rootScope.$publish(chatboxMediatorChannels.VIDEOCHAT_STATE_UPDATE,
VIDEOCHAT_STATE.ERROR)}function videochatSupportedHandler(evt,supported){if(!supported){reword("#videochatnotsupported#");if(dyduUtils.isDefined(window.OT))OT.upgradeSystemRequirements()}else $rootScope.$publish(chatboxMediatorChannels.VIDEOCHAT_STATE_UPDATE,VIDEOCHAT_STATE.ASKING)}function videochatAcceptedHandler(){reword("#startvideochat#");$rootScope.$publish(chatboxMediatorChannels.VIDEOCHAT_STATE_UPDATE,VIDEOCHAT_STATE.LOADING)}function videochatDeclinedHandler(){$rootScope.$publish(globalMediatorChannels.REWORD,
{text:"#declinevideochat#"});$rootScope.$publish(chatboxMediatorChannels.VIDEOCHAT_STATE_UPDATE,VIDEOCHAT_STATE.HIDDEN)}function videochatStopRequestHandler(){if($context.isVideochatEnabled()){$tokbox.stopVideochat();$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#endvideochat#"});$rootScope.$publish(chatboxMediatorChannels.VIDEOCHAT_ENDED)}}});
angular.module("dialogModule").factory("$tokbox",["$rootScope","$timeout","$context","$log",function($rootScope,$timeout,$context,$log){var tokboxSession;var publisher;var tokboxService={initVideochat:initVideochat,stopVideochat:stopVideochat,checkVideochatSupport:checkVideochatSupport};function loadScriptBeforeCallIfNeeded(callback){var tokboxScript=document.getElementById("dydu-tokbox-script");if(dyduUtils.isNotDefined(tokboxScript)){var script=document.createElement("script");script.setAttribute("type",
"text/javascript");script.setAttribute("id","dydu-tokbox-script");document.body.appendChild(script);script.onload=script.onreadystatechange=function(){callback();script.onload=script.onreadystatechange=null};script.setAttribute("src","https://web.archive.org/web/20210703141519/https://static.opentok.com/v2/js/opentok.min.js")}else callback()}function initSubscriber(){tokboxSession.on("streamCreated",function(event){if(tokboxSession.getSubscribersForStream(event.stream).length===0)tokboxSession.subscribe(event.stream,"dydu-operator-video-chat-container",
{insertMode:"append",width:"100%",height:"100%"})})}function initPublisher(callbacks){publisher=OT.initPublisher("dydu-self-video-chat-container",{insertMode:"append",width:"100%",height:"100%"},function(error){if(error)$log.error("Error initializing the publisher "+error);else tokboxSession.publish(publisher,function(error){if(error){if(dyduUtils.isDefined(callbacks)&&dyduUtils.isDefined(callbacks.onFailure))callbacks.onFailure(error)}else if(dyduUtils.isDefined(callbacks)&&dyduUtils.isDefined(callbacks.onSuccess))callbacks.onSuccess()})})}
function initVideochat(sessionId,token,callbacks){function init(){var apiKey=46495782;tokboxSession=OT.initSession(apiKey,sessionId);initSubscriber();tokboxSession.connect(token,function(error){if(error){if(dyduUtils.isDefined(callbacks)&&dyduUtils.isDefined(callbacks.onFailure))callbacks.onFailure(error)}else initPublisher(callbacks)})}loadScriptBeforeCallIfNeeded(init)}function stopVideochat(){if(dyduUtils.isDefined(tokboxSession))tokboxSession.disconnect()}function checkVideochatSupport(){function isSupported(){var supported=
dyduUtils.isDefined(OT)&&OT.checkSystemRequirements()===1;$rootScope.$publish(chatboxMediatorChannels.VIDEOCHAT_SUPPORTED,supported)}loadScriptBeforeCallIfNeeded(isSupported)}function showUpdateMessage(){window.$buoop={vs:{i:12,f:25,o:12.1,s:7},c:2,text:$rootScope.resources.get("chatbox.videochat.notsupported.message")};var e=document.createElement("script");e.src="//web.archive.org/web/20210703141519/https://browser-update.org/update.min.js";document.body.appendChild(e)}return tokboxService}]);
angular.module("dialogModule").controller("videochatController",["$scope","$context",function($scope,$context){$scope.$subscribe(chatboxMediatorChannels.VIDEOCHAT_STATE_UPDATE,videochatStateUpdateHandler);$scope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CONFIRM,confirmDialogConfirmHandler);$scope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CANCEL,confirmDialogCancelHandler);var currentState=$context.getVideochatState();var videochatAccepted=false;$scope.videochatEnd=endVideochatRequest;
$scope.isVideochatEnabled=isVideochatEnabledOrAccepted;var stateMessages={};stateMessages[VIDEOCHAT_STATE.ASKING]={clazz:"videochat",title:$scope.resources.get("chatbox.videochat.title"),text:$scope.resources.get("chatbox.videochat.introduction"),yes:$scope.resources.get("chatbox.videochat.yes"),no:$scope.resources.get("chatbox.videochat.no")};stateMessages[VIDEOCHAT_STATE.ERROR]={clazz:"videochat",title:$scope.resources.get("chatbox.videochat.title"),text:$scope.resources.get("chatbox.videochat.error")};
stateMessages[VIDEOCHAT_STATE.HIDDEN]={clazz:"",hide:true};stateMessages[VIDEOCHAT_STATE.LOADING]={clazz:"videochat",title:$scope.resources.get("chatbox.videochat.title"),text:$scope.resources.get("chatbox.videochat.loading")};stateMessages[VIDEOCHAT_STATE.CONFIRM_END]={clazz:"videochat",title:$scope.resources.get("chatbox.videochat.confirm.end.title"),text:$scope.resources.get("chatbox.videochat.confirm.end.introduction"),yes:$scope.resources.get("chatbox.videochat.confirm.end.yes"),no:$scope.resources.get("chatbox.videochat.confirm.end.no")};
function videochatStateUpdateHandler(event,state){if(currentState!==state)$scope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,stateMessages[state]);if(state===VIDEOCHAT_STATE.ERROR)videochatAccepted=false;currentState=state}function confirmDialogConfirmHandler(evt,message){if(message.clazz==="videochat")if(message.text===stateMessages[VIDEOCHAT_STATE.ASKING].text)acceptVideochat();else if(message.text===stateMessages[VIDEOCHAT_STATE.CONFIRM_END].text)endVideochat()}function confirmDialogCancelHandler(evt,
message){if(message.clazz==="videochat")if(message.text===stateMessages[VIDEOCHAT_STATE.ASKING].text)declineVideochat();else closeDialog()}function acceptVideochat(){videochatAccepted=true;$scope.$publish(chatboxMediatorChannels.VIDEOCHAT_ACCEPTED)}function declineVideochat(){$scope.$publish(chatboxMediatorChannels.VIDEOCHAT_DECLINED)}function closeDialog(){$scope.$publish(chatboxMediatorChannels.VIDEOCHAT_STATE_UPDATE,VIDEOCHAT_STATE.HIDDEN)}function endVideochat(){videochatAccepted=false;$scope.$publish(chatboxMediatorChannels.VIDEOCHAT_STOP_REQUEST)}
function endVideochatRequest(){$scope.$publish(chatboxMediatorChannels.VIDEOCHAT_STATE_UPDATE,VIDEOCHAT_STATE.CONFIRM_END)}function isVideochatEnabledOrAccepted(){return $context.isVideochatEnabled()||videochatAccepted}}]);
angular.module("surveyModule").run(function($context,$rootScope,$configurations){var SURVEY_COOKIE="dydu.survey";var START_SEND_KEY="dydu.survey.start";var START_SEND_VALUES_KEY="dydu.survey.start.value";var END_SEND_KEY="dydu.survey.end";var END_SURVEY_TIMER_ENABLED="dydu.survey.end.enabled";function getCookiesOptions(){var options=dyduUtils.clone(COOKIES_OPTION);delete options.expires;delete options.expirationUnit;return options}$rootScope.$subscribe(globalMediatorChannels.SURVEY_UPDATE,setSurveyConfiguration);
$rootScope.$subscribe(globalMediatorChannels.SURVEY_START_SUBMIT,surveyStartSubmitHandler);$rootScope.$subscribe(globalMediatorChannels.SURVEY_END_SUBMIT,surveyEndSubmitHandler);function surveyStartSubmitHandler(evt,submitedValues){$context.setData(START_SEND_KEY,$context.getContextId(),getCookiesOptions());$context.setData(START_SEND_VALUES_KEY,submitedValues,getCookiesOptions())}function surveyEndSubmitHandler(){$context.setData(END_SEND_KEY,$context.getContextId(),getCookiesOptions());$context.setEndSurveyTimerEnabled(false)}
function defaultSurveyConfiguration(){return{modal:false,show:false,bottom:0,interactionSurvey:false,right:$context.getPopinConfiguration().show?dyduUtils.getPopinWidth()+10:10}}$context.getSurveyConfiguration=getSurveyConfiguration;$context.isSurveyStartupInfoKeepSession=function(){return dyduUtils.isDefined($configurations.get("chatbox.survey.at.start.keep.information.for.session"))&&$configurations.get("chatbox.survey.at.start.keep.information.for.session")};function getSurveyConfiguration(){return $context.getData(SURVEY_COOKIE,
defaultSurveyConfiguration())}function setSurveyConfiguration(event,survey){var saveValue=dyduUtils.clone(survey);if(dyduUtils.isDefined(saveValue.contextId))delete saveValue.contextId;$context.setData(SURVEY_COOKIE,saveValue,COOKIES_OPTION)}$context.getSurveyAtStart=function(){return $configurations.get("chatbox.survey.at.start")};$context.getSurveyAtEnd=function(){return $configurations.get("chatbox.survey.at.end")};$context.getSurveyAtEndTimeout=function(){return $configurations.get("chatbox.survey.at.end.timeout")};
$context.isAlreadyComplete=function(context){return $context.getData(START_SEND_KEY)===context};$context.isEndSurveyAlreadyComplete=function(context){return $context.getData(END_SEND_KEY)===context};$context.getAlreadySendAtStartup=function(){return $context.getData(START_SEND_VALUES_KEY)};$context.resetSurveyStartup=function(){$context.setData(START_SEND_KEY,undefined,getCookiesOptions());$context.setData(START_SEND_VALUES_KEY,undefined,getCookiesOptions())};$context.isEndSurveyTimerEnabled=function(){return $context.getData(END_SURVEY_TIMER_ENABLED,
"false")==="true"};$context.setEndSurveyTimerEnabled=function(enabled){$context.setData(END_SURVEY_TIMER_ENABLED,enabled?"true":"false",getCookiesOptions())}});
angular.module("surveyModule").run(function($rootScope,$context,$messageFactory,$survey,$timeout){$rootScope.$subscribe(TALK_RESPONSE_EVENT,talkResponseHandler);$rootScope.$subscribe(chatboxMediatorChannels.NOTIFICATION,notificationHandler);$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_STARTED,livechatStartedHandler);$rootScope.$subscribe(globalMediatorChannels.SURVEY_SUBMIT,surveySubmitHandler);$rootScope.$subscribe(globalMediatorChannels.CONTEXT_ID_CHANGED,surveyStartupReset);$rootScope.$subscribe(chatboxMediatorChannels.POPIN_UPDATE,
function(evt,popinInfo){if(popinInfo.show&&dyduUtils.isDefined($context.getSurveyAtStart())&&!$context.isAlreadyComplete($context.getContextId()))if(!$context.hasContextId())$rootScope.$publish(globalMediatorChannels.REQUEST_NEW_CONTEXT_ID,{});else surveyStartupReset(undefined,{old:$context.getContextId(),next:$context.getContextId()})});if(dyduUtils.isDefined($context.getSurveyAtEnd())&&$context.getSurveyAtEndTimeout()>0)$rootScope.$subscribe(chatboxMediatorChannels.NEW_RESPONSE_RECEIVED,newResponseReceivedHandler);
var endSurveyTimer=null;if($context.isEndSurveyTimerEnabled())initEndSurveyTimerIfNeeded();function talkResponseHandler(evt,talkResponse){updateSurveyConfiguration(talkResponse,true,true)}function notificationHandler(evt,notification){updateSurveyConfiguration(notification,false,true)}function surveyStartupReset(evt,contextUpdate){if(dyduUtils.isDefined($context.getSurveyAtStart())&&$context.isAlreadyComplete(contextUpdate.old)&&$context.isSurveyStartupInfoKeepSession()){$rootScope.$publish(globalMediatorChannels.SURVEY_START_SUBMIT,
$context.getAlreadySendAtStartup());$timeout(function(){updateSurveyConfiguration({survey:$context.getSurveyAtStart(),contextId:contextUpdate.next,modal:false},false,false);$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createSurveyMessage($context.getAlreadySendAtStartup()))})}else if(dyduUtils.isDefined($context.getSurveyAtStart())){$context.resetSurveyStartup();$timeout(function(){$rootScope.$publish(chatboxMediatorChannels.NOTIFICATION,{survey:$context.getSurveyAtStart(),
modal:true})})}}function updateSurveyConfiguration(response,isInteractionSurvey,show){if(dyduUtils.isDefined(response.survey)){var surveyConfiguration=$context.getSurveyConfiguration();surveyConfiguration.show=show?true:false;surveyConfiguration.id=response.survey;surveyConfiguration.modal=response.modal;surveyConfiguration.interactionSurvey=isInteractionSurvey;surveyConfiguration.contextId=dyduUtils.isDefined(response.contextId)?response.contextId:$context.getContextId();$rootScope.$publish(globalMediatorChannels.SURVEY_UPDATE,
surveyConfiguration)}}function surveySubmitHandler(evt,submitAnswer){var config=$context.getSurveyConfiguration();if(dyduUtils.isDefined(config)){if(dyduUtils.isDefined(config.modal)&&config.modal)$rootScope.$publish(chatboxMediatorChannels.UNLOCK_TEXTFIELD);if(config.id===$context.getSurveyAtStart())$rootScope.$publish(globalMediatorChannels.SURVEY_START_SUBMIT,submitAnswer);if(config.id===$context.getSurveyAtEnd())$rootScope.$publish(globalMediatorChannels.SURVEY_END_SUBMIT)}$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,
$messageFactory.createSurveyMessage(submitAnswer))}function newResponseReceivedHandler(){cancelEndSurveyTimer();initEndSurveyTimerIfNeeded()}function isNotLiveChat(){return dyduUtils.isNotDefined($context.isLivechatMode)||!$context.isLivechatMode()}function displayEndSurvey(){$rootScope.$publish(chatboxMediatorChannels.NOTIFICATION,{survey:$context.getSurveyAtEnd(),modal:true})}function livechatStartedHandler(){cancelEndSurveyTimer()}function initEndSurveyTimerIfNeeded(){if(!$context.isEndSurveyAlreadyComplete($context.getContextId())&&
isNotLiveChat()){endSurveyTimer=$timeout(displayEndSurvey,$context.getSurveyAtEndTimeout()*1E3);$context.setEndSurveyTimerEnabled(true)}}function cancelEndSurveyTimer(){if(null!==endSurveyTimer){$timeout.cancel(endSurveyTimer);$context.setEndSurveyTimerEnabled(false);endSurveyTimer=null}}});
angular.module("toolsModule").run(function($context,$rootScope){$rootScope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,confirmDialogUpdateHandler);var CONFIRM_DIALOG_COOKIE="dydu.confirmdialog.message";var message=$context.getData(CONFIRM_DIALOG_COOKIE,{hide:true,clazz:""});$context.getConfirmMessage=getConfirmMessage;function getConfirmMessage(){return message}function confirmDialogUpdateHandler(evt,newMessage){message=newMessage;$context.setData(CONFIRM_DIALOG_COOKIE,message,COOKIES_OPTION)}
});
angular.module("toolsModule").controller("confirmController",["$scope","$context",function($scope,$context){$scope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,confirmDialogUpdateHandler);$scope.showButtons=showButtons;$scope.showForm=showForm;$scope.hideDialog=hideDialog;$scope.message=$context.getConfirmMessage();$scope.confirmDialog=confirm;$scope.cancelDialog=cancel;$scope.getProfilePictureStyle=getProfilePictureStyleFunction();$scope.renderHtml=dyduUtils.renderHtml;function showButtons(){return dyduUtils.isDefined($scope.message.yes)&&
!showForm()}function showForm(){return dyduUtils.isDefined($scope.message.formParams)}function hideDialog(){return $scope.message.hide}function confirm(){var message=$scope.message;$scope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,{hide:true});$scope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_CONFIRM,message)}function cancel(){var message=$scope.message;$scope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,{hide:true});$scope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_CANCEL,
message)}function confirmDialogUpdateHandler(event,message){$scope.message=message}function getProfilePictureStyleFunction(){if(dyduUtils.isDefined($context.getProfilePictureStyle))return $context.getProfilePictureStyle;return function(){return{}}}}]);
angular.module("chatboxApplication").run(function($rootScope){$rootScope.$publish(globalMediatorChannels.INITIALIZATION_SUCCESSFUL);$rootScope.$publish(globalMediatorChannels.REGISTER_VISITOR);$rootScope.$subscribe(globalMediatorChannels.TRIGGER_URL_QUERY,urlQueryHandler);function urlQueryHandler(evt,question){$rootScope.$publish(globalMediatorChannels.REWORD,{text:question,fromUrl:true})}});angular.module("chatboxApplication").config(["$anchorScrollProvider",function($anchorScrollProvider){$anchorScrollProvider.disableAutoScrolling()}]);
setTimeout(function(){angular.element(document).ready(function(){if(dyduUtils.isInvalidUrl())return;if(dyduUtils.isNotDefined(document.body))return;if(dyduUtils.isDefined(window.console))console.log("Chatbox application bootstrap");var popin=angular.element('\x3cdiv id\x3d"dydu-chatbox-app" ng-include\x3d"\'Chatbox.html\'"\x3e\x3c/div\x3e');angular.element(document.getElementsByTagName("body")).append(popin);existingAngular=window.angular;window.angular=angular;angular.bootstrap(document.getElementById("dydu-chatbox-app"),
["chatboxApplication"]);window.angular=existingAngular;if(dyduUtils.isDefined(window.console)){console.log("Popin bootstrapped");if(typeof tc_events_8==="function")tc_events_8(this,null,"chatbot_load")}})},200);
angular.module("dialogModule").run(function($context,$configurations,$rootScope){$context.getFileUploadUrl=function(){return $configurations.get("servletUrl")+"/fileupload"};$context.getUploadFileId=function(){return $configurations.get("chatbox.upload.fileinputid")};$context.getFileUploadCallBack=function(){return $configurations.get("chatbox.upload.callback")};$context.getFileUploadResultDelay=function(){return $configurations.get("chatbox.upload.result.delay")}});
angular.module("dialogModule").run(function($rootScope,$context){$rootScope.$subscribe(chatboxMediatorChannels.NOTIFICATION,function(event,notification){if(notification.code==="UploadRequest"){$rootScope.$publish(chatboxMediatorChannels.SIDEBAR_RESET);var sidebarConfiguration=$context.getDefaultSidebarConfiguration();sidebarConfiguration.showUpload=true;sidebarConfiguration.show=true;sidebarConfiguration.title=$rootScope.resources.get("chatbox.upload.form.title");$rootScope.$publish(chatboxMediatorChannels.SIDEBAR_UPDATE,
sidebarConfiguration)}})}).controller("uploadFileController",["$scope","$context","$sce","$dyduApi","$timeout","$log",function($scope,$context,$sce,$dyduApi,$timeout,$log){$scope.uploadResult="";$scope.showFrame=true;$scope.fileName=$context.getUploadFileId();$scope.uploadSubmitValue=$scope.resources.get("chatbox.upload.form.submit.value");function getOrigin(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}$scope.getIFrameSource=function(){var urlIframe=
$context.getFileUploadUrl()+"?ctx\x3d"+$context.getContextId()+"\x26ifr\x3dtrue\x26fin\x3d"+$scope.fileName+"\x26cb\x3d"+$context.getFileUploadCallBack()+"_"+$scope.$id+"\x26origin\x3d"+encodeURIComponent(getOrigin())+"\x26usv\x3d"+$scope.uploadSubmitValue;return $sce.trustAsResourceUrl(urlIframe)};$scope.getAction=function(){return $context.getFileUploadUrl()+"?ctx\x3d"+$context.getContextId()+"\x26fin\x3d"+$scope.fileName+"\x26cb\x3d"+$context.getFileUploadCallBack()+"_"+$scope.$id+"\x26origin\x3d"+
encodeURIComponent(getOrigin())+"\x26usv\x3d"+$scope.uploadSubmitValue};$dyduApi.registerApi($context.getFileUploadCallBack()+"_"+$scope.$id,$scope,function(json){if(dyduUtils.isDefined(json)&&dyduUtils.isDefined(json.status)){$dyduApi.removeApi($context.getFileUploadCallBack()+"_"+$scope.$id);$scope.showFrame=false;$scope.uploadResult=json.status;$timeout(function(){$scope.$publish(chatboxMediatorChannels.SIDEBAR_UPDATE,{show:false});$scope.uploadResult="";$scope.showFrame=true},$context.getFileUploadResultDelay())}else $log.error("No parameter in answer")})}]);
angular.module("dialogModule").run(function($rootScope,$messageFactory,$configurations,$context){$rootScope.$subscribe(globalMediatorChannels.ERROR_RESPONSE,errorResponseHandler);function errorResponseHandler(evt,error){var interactions=$context.getInteractions();interactions.push({text:error.error,from:"Error",type:"response",contextId:$context.getContextId(),date:(new Date).getTime()});$rootScope.$publish(chatboxMediatorChannels.INTERACTIONS_UPDATE,interactions)}});
angular.module("dialogModule").run(function($context,$rootScope){$rootScope.$subscribe(chatboxMediatorChannels.COBROWSING_STARTED,cobrowsingStartedHandler);$rootScope.$subscribe(chatboxMediatorChannels.COBROWSING_ENDED,cobrowsingEndedHandler);$rootScope.$subscribe(chatboxMediatorChannels.COBROWSING_STATE_UPDATE,cobrowsingStateUpdateHandler);var COBROWSING_COOKIE="dydu.cobrowsing.state";var cobrowsingState=$context.getData(COBROWSING_COOKIE,{enabled:false,state:COBROWSING_STATE.HIDDEN});$context.isCobrowsingEnabled=
isCobrowsingEnabled;$context.getCobrowsingState=getCobrowsingState;function isCobrowsingEnabled(){return cobrowsingState.enabled}function getCobrowsingState(){return cobrowsingState.state}function cobrowsingStartedHandler(){cobrowsingState.enabled=true;saveCookie()}function cobrowsingStateUpdateHandler(evt,newState){cobrowsingState.state=newState;saveCookie()}function cobrowsingEndedHandler(){cobrowsingState={enabled:false,state:COBROWSING_STATE.HIDDEN};saveCookie()}function saveCookie(){$context.setData(COBROWSING_COOKIE,
cobrowsingState,COOKIES_OPTION)}});
angular.module("dialogModule").controller("cobrowsingController",["$scope","$context",function($scope,$context){$scope.isCobrowsingEnabled=$context.isCobrowsingEnabled;$scope.endCobrowsingRequest=endCobrowsingRequest;function endCobrowsingRequest(){$scope.$publish(chatboxMediatorChannels.COBROWSING_STATE_UPDATE,COBROWSING_STATE.CONFIRM_END)}}]);
angular.module("dialogModule").factory("$unblu",["$timeout","$log","$rootScope",function($timeout,$log,$rootScope){var unbluSession;var socialBrowsing;var systemInfo;var unbluService={checkThirdPartyCookie:checkThirdPartyCookie,initIfNeededAndCall:initIfNeededAndCall,hideUI:hideUI};function h(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else if(a.attachEvent)a.attachEvent("on"+b,c,true)}function bootstrapUnblu(dyduCallback){unblu={SERVER:"https://web.archive.org/web/20210703141519/https://unblu.doyoudreamup.com"};unblu.c=[];
unblu.registerApiConsumer=function(callback,apiNames){unblu.c.push({a:apiNames,c:callback})};unblu.setLocale=function(locale){unblu.l=locale};window["x-unblu-tmp-dom-ready"]=true;window["x-unblu-tmp-window-alive"]=true;if(!window["x-unblu-tmp-window-name"])window["x-unblu-tmp-window-name"]=window.name;var g=document.createElement("script");g.setAttribute("src",unblu.SERVER+"/unblu/starter.js");g.setAttribute("type","text/javascript");g.setAttribute("defer","defer");document.getElementsByTagName("body")[0].appendChild(g);
h(g,"load",function(){});h(g,"error",function(){});unblu.registerApiConsumer(function(requestedApi){unblu.api=requestedApi;unbluSession=unblu.api.core.visitor.session.Session.getInstance();socialBrowsing=unblu.api.core.visitor.socialbrowsing.SocialBrowsing.getInstance();systemInfo=unblu.api.core.system.SystemInfo.getInstance();if(typeof dyduCallback==="function")dyduCallback(socialBrowsing,systemInfo,unbluSession)},["core.visitor.socialbrowsing","core.system","core.visitor.session"])}function initIfNeededAndCall(dyduCallback,
triesCount){triesCount=triesCount||1;if(!window["unblu"])bootstrapUnblu(dyduCallback);else if(dyduUtils.isNotDefined(unbluSession))if(triesCount<5){var currentTry=triesCount+1;$timeout(function(){initIfNeededAndCall(dyduCallback,currentTry)},250)}else{$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#cobrowsingstartfailed#",options:{hideFromUser:true}});$log.error("Unblu session still not initialized after waiting 1s")}else if(typeof dyduCallback==="function")dyduCallback(socialBrowsing,systemInfo,
unbluSession)}function hideUI(){var succeed=false;var node=document.getElementById("HBTab");if(null!==node){node.parentNode.style.display="none";succeed=true}return succeed}function checkThirdPartyCookie(dyduCallback){function onSetCookieSucceed(respText){processGetRequest("https://web.archive.org/web/20210703141519/https://unblu.doyoudreamup.com/unblu/cookieSupport?action\x3dverifyCookie\x26cookieValue\x3d"+respText.trim(),onVerifyCookieSucceed,onVerifyCookieFailed)}function onVerifyCookieSucceed(respText1){if(respText1.trim()==="true"||
respText1.trim()==="TRUE")dyduCallback(socialBrowsing,systemInfo,unbluSession);else onThirdPartyCookiesRefused()}processGetRequest("https://web.archive.org/web/20210703141519/https://unblu.doyoudreamup.com/unblu/cookieSupport?action\x3dsetCookie",onSetCookieSucceed,onSetCookieFailed)}function onSetCookieFailed(){$log.error("Failed to check set cookie support (unblu cobrowsing)")}function onVerifyCookieFailed(respText){$log.error("Failed to verify cookie value: "+respText+" (unblu cobrowsing)")}function onThirdPartyCookiesRefused(){$rootScope.$publish(globalMediatorChannels.REWORD,
{text:"#cobrowsingnotsupported#",options:{hideFromUser:true}});$log.error("Error starting cobrowsing : third cookies parties are blocked by the browser");$rootScope.$publish(chatboxMediatorChannels.COBROWSING_STATE_UPDATE,COBROWSING_STATE.ERROR)}function processGetRequest(url,onSuccess,onFailure){var xmlhttp=new XMLHttpRequest;xmlhttp.withCredentials=true;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState===XMLHttpRequest.DONE)if(xmlhttp.status===200)onSuccess(xmlhttp.responseText);else onFailure("Something else other than 200 was returned: "+
xmlhttp.responseText)};xmlhttp.open("GET",url,true);xmlhttp.send()}return unbluService}]);
angular.module("dialogModule").run(function($rootScope,$unblu,$context,$timeout,$log){$rootScope.$subscribe(chatboxMediatorChannels.NOTIFICATION,notificationHandler);$rootScope.$subscribe(chatboxMediatorChannels.COBROWSING_ACCEPTED,cobrowsingAcceptedHandler);$rootScope.$subscribe(chatboxMediatorChannels.COBROWSING_DECLINED,cobrowsingDeclinedHandler);$rootScope.$subscribe(chatboxMediatorChannels.COBROWSING_STOP_REQUEST,cobrowsingStopRequestHandler);$rootScope.$subscribe(chatboxMediatorChannels.COBROWSING_STATE_UPDATE,
cobrowsingStateUpdateHandler);$rootScope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CONFIRM,confirmDialogConfirmHandler);$rootScope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CANCEL,confirmDialogCancelHandler);if($context.isCobrowsingEnabled())$unblu.initIfNeededAndCall(cobrowsingListenerInitializer);function cobrowsingListenerInitializer(socialBrowsing,systemInfo,unbluSession){unbluSession.addSessionTerminatedListener(cobrowsingSessionTerminatedOrEndedHandler);unbluSession.addSessionEndedListener(cobrowsingSessionTerminatedOrEndedHandler);
unbluSession.addSessionStartedListener(hideUnbluStuff);hideUnbluStuff()}function hideUnbluStuff(){$timeout(function(){var succeed=$unblu.hideUI();if(!succeed)hideUnbluStuff()},50)}function notificationHandler(event,notification){if(notification.code==="OnCoBrowsingRequest"&&!$context.isCobrowsingEnabled())checkCoBrowsingSupport();else if(notification.code==="OnCoBrowsingEnd")$rootScope.$publish(chatboxMediatorChannels.COBROWSING_STOP_REQUEST)}function checkThirdPartyCookieAndStartSession(){$unblu.checkThirdPartyCookie(startSocialBrowsingSession)}
function startSocialBrowsingSession(unbluSocialBrowsing,systemInfo,unbluSession){$rootScope.$publish(chatboxMediatorChannels.COBROWSING_STATE_UPDATE,COBROWSING_STATE.LOADING);unbluSocialBrowsing.startSession($rootScope.resources.get("chatbox.cobrowsing.visitor.label"),{onSuccess:function(sessionInfo){cobrowsingListenerInitializer(unbluSocialBrowsing,systemInfo,unbluSession);sendInvitationToOperator(unbluSocialBrowsing);$rootScope.$publish(chatboxMediatorChannels.COBROWSING_STARTED);$rootScope.$publish(chatboxMediatorChannels.COBROWSING_STATE_UPDATE,
COBROWSING_STATE.HIDDEN)},onFailure:function(error){reword("#cobrowsingstartfailed#");$log.error("Error starting social cobrowsing : "+JSON.stringify(error));$rootScope.$publish(chatboxMediatorChannels.COBROWSING_STATE_UPDATE,COBROWSING_STATE.ERROR)}})}function sendInvitationToOperator(unbluSocialBrowsing){unbluSocialBrowsing.addParticipant($context.getOperatorName(),{onSuccess:function(invitationInfo){reword("#cobrowsingInvitationUrl#"+invitationInfo.invitationLink)},onFailure:function(error){$log.error(error.message)}})}
function checkCoBrowsingSupport(){if(msie<8)$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#cobrowsingnotsupported#",options:{hideFromUser:true}});else{var displayCobrowsingFunction=function(socialBrowsing,systemInfo){systemInfo.isCoBrowsingAvailable({onSuccess:function(isAvailable){if(isAvailable)$rootScope.$publish(chatboxMediatorChannels.COBROWSING_STATE_UPDATE,COBROWSING_STATE.ASKING);else $rootScope.$publish(globalMediatorChannels.REWORD,{text:"#cobrowsingnotsupported#",options:{hideFromUser:true}})},
onFailure:function(reason){$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#cobrowsingnotsupported#",options:{hideFromUser:true}});$log.error("Error requesting isCoBrowsingAvailable : "+reason)}})};$unblu.initIfNeededAndCall(displayCobrowsingFunction)}}function cobrowsingSessionTerminatedOrEndedHandler(){if($context.isCobrowsingEnabled()){$rootScope.$publish(chatboxMediatorChannels.COBROWSING_ENDED);$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#cobrowsingended#",options:{hideFromUser:true}})}}
function cobrowsingAcceptedHandler(){$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#startcobrowsing#",options:{hideFromUser:true}});$unblu.initIfNeededAndCall(checkThirdPartyCookieAndStartSession)}function cobrowsingDeclinedHandler(){$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#declinecobrowsing#",options:{hideFromUser:true}});$rootScope.$publish(chatboxMediatorChannels.COBROWSING_STATE_UPDATE,COBROWSING_STATE.HIDDEN)}function cobrowsingStopRequestHandler(){if($context.isCobrowsingEnabled()){var terminateCobrowsingSession=
function(socialBrowsing,systemInfo,unbluSession){unbluSession.terminateSession({onSuccess:function(sessionInfo){},onFailure:function(reason){$log.error("Error terminating cobrowsing session : "+reason)}})};$unblu.initIfNeededAndCall(terminateCobrowsingSession)}}var currentState=$context.getCobrowsingState();var stateMessages={};stateMessages[COBROWSING_STATE.ASKING]={clazz:"cobrowsing",title:$rootScope.resources.get("chatbox.cobrowsing.title"),text:$rootScope.resources.get("chatbox.cobrowsing.introduction"),
yes:$rootScope.resources.get("chatbox.cobrowsing.yes"),no:$rootScope.resources.get("chatbox.cobrowsing.no")};stateMessages[COBROWSING_STATE.ERROR]={clazz:"cobrowsing",title:$rootScope.resources.get("chatbox.cobrowsing.title"),text:$rootScope.resources.get("chatbox.cobrowsing.error")};stateMessages[COBROWSING_STATE.HIDDEN]={clazz:"",hide:true};stateMessages[COBROWSING_STATE.LOADING]={clazz:"cobrowsing",title:$rootScope.resources.get("chatbox.cobrowsing.title"),text:$rootScope.resources.get("chatbox.cobrowsing.loading")};
stateMessages[COBROWSING_STATE.CONFIRM_END]={clazz:"cobrowsing",title:$rootScope.resources.get("chatbox.cobrowsing.confirm.end.title"),text:$rootScope.resources.get("chatbox.cobrowsing.confirm.end.introduction"),yes:$rootScope.resources.get("chatbox.cobrowsing.confirm.end.yes"),no:$rootScope.resources.get("chatbox.cobrowsing.confirm.end.no")};function cobrowsingStateUpdateHandler(event,state){if(currentState!==state)$rootScope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,stateMessages[state]);
currentState=state}function confirmDialogConfirmHandler(evt,message){if(message.clazz==="cobrowsing")if(message.text===stateMessages[COBROWSING_STATE.ASKING].text)acceptCobrowsing();else if(message.text===stateMessages[COBROWSING_STATE.CONFIRM_END].text)endCobrowsing()}function confirmDialogCancelHandler(evt,message){if(message.clazz==="cobrowsing")if(message.text===stateMessages[COBROWSING_STATE.ASKING].text)declineCobrowsing();else closeDialog()}function acceptCobrowsing(){$rootScope.$publish(chatboxMediatorChannels.COBROWSING_ACCEPTED)}
function declineCobrowsing(){$rootScope.$publish(chatboxMediatorChannels.COBROWSING_DECLINED)}function closeDialog(){$rootScope.$publish(chatboxMediatorChannels.COBROWSING_STATE_UPDATE,COBROWSING_STATE.HIDDEN)}function endCobrowsing(){$rootScope.$publish(chatboxMediatorChannels.COBROWSING_STOP_REQUEST)}});
var PIN_POPIN_STATE={HIDDEN:"hidden",ASKING:"asking",LOADING:"loading",ERROR:"error"};
angular.module("dialogModule").run(function($rootScope,$context,$timeout){$rootScope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CONFIRM,confirmDialogConfirmHandler);$rootScope.$subscribe(chatboxMediatorChannels.CONFIRM_DIALOG_CANCEL,confirmDialogCancelHandler);dydu.displayPinPopin=displayPinPopin;var stateMessages={};stateMessages[PIN_POPIN_STATE.ASKING]={clazz:"pinPopin",title:$rootScope.resources.get("chatbox.pin.title"),text:$rootScope.resources.get("chatbox.pin.introduction"),formParams:[{name:"pinCode",
label:$rootScope.resources.get("chatbox.pin.pincode"),type:"TEXT"}],yes:$rootScope.resources.get("chatbox.pin.yes"),no:$rootScope.resources.get("chatbox.pin.no")};stateMessages[PIN_POPIN_STATE.LOADING]={clazz:"pinPopin",title:$rootScope.resources.get("chatbox.pin.loading.title"),text:$rootScope.resources.get("chatbox.pin.loading.message")};stateMessages[PIN_POPIN_STATE.ERROR]={clazz:"pinPopin",title:$rootScope.resources.get("chatbox.pin.error.title"),text:$rootScope.resources.get("chatbox.pin.error.message")};
stateMessages[PIN_POPIN_STATE.HIDDEN]={clazz:"",hide:true};function confirmDialogConfirmHandler(evt,message){if(message.clazz==="pinPopin"&&message.text===stateMessages[PIN_POPIN_STATE.ASKING].text){$rootScope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,stateMessages[PIN_POPIN_STATE.LOADING]);var unsubscribeLivechatStartedFunc,unsubscribeNotificationFunc,unsubscribeTalkResponseFunc;unsubscribeLivechatStartedFunc=$rootScope.$subscribe(chatboxMediatorChannels.LIVE_CHAT_STARTED,function(){$rootScope.$publish(chatboxMediatorChannels.POPIN_CLOSE_REQUEST);
unsubscribeLivechatStartedFunc()});unsubscribeNotificationFunc=$rootScope.$subscribe(chatboxMediatorChannels.NOTIFICATION,function(evt,notification){if(notification.code==="DialogPicked"){$rootScope.$publish(chatboxMediatorChannels.POPIN_CLOSE_REQUEST);unsubscribeNotificationFunc();unsubscribeTalkResponseFunc();$rootScope.$publish(chatboxMediatorChannels.COBROWSING_ACCEPTED)}});unsubscribeTalkResponseFunc=$rootScope.$subscribe(chatboxMediatorChannels.TALK_RESPONSE,function(evt,response){if(response.typeResponse!==
"DMLiveChatConnectionSucceed"){unsubscribeNotificationFunc();unsubscribeTalkResponseFunc();unsubscribeLivechatStartedFunc();$rootScope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,stateMessages[PIN_POPIN_STATE.ERROR])}});var pinCode=message.formParams[0].value;$rootScope.$publish(globalMediatorChannels.REWORD,{text:"#livechatconnection("+pinCode+")#",options:{hideFromUser:true}})}}function confirmDialogCancelHandler(evt,message){if(message.clazz==="pinPopin")$rootScope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,
stateMessages[PIN_POPIN_STATE.HIDDEN])}function displayPinPopin(){$rootScope.$publish(chatboxMediatorChannels.LOAD_CHATBOX);$rootScope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,stateMessages[PIN_POPIN_STATE.ASKING])}});
angular.module("dialogModule").run(function($rootScope,$messageFactory,$configurations,$context){$rootScope.$subscribe(globalMediatorChannels.GET_SUGGESTIONS,getSuggestionsHandler);$rootScope.$subscribe(SERVLET_RESPONSE_TYPE_PREFIX+"fieldboxproactive",fieldBoxProactiveResponseHandler);function getSuggestionsHandler(evt,question){$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,$messageFactory.createFieldboxProactiveMessage(question,$configurations.get("maxSuggestionNumber")))}function fieldBoxProactiveResponseHandler(event,
answers){if($context.getServerTime("proactive")>answers.serverTime)return;if(dyduUtils.isDefined(answers.contextId))$rootScope.$publish(globalMediatorChannels.UPDATE_CONTEXT_ID,{contextId:answers.contextId});$rootScope.$publish(globalMediatorChannels.SUGGESTIONS_RECEIVED,answers);if(dyduUtils.isDefined(answers.serverTime))$rootScope.$publish(globalMediatorChannels.UPDATE_SERVER_TIME,{proactive:answers.serverTime})}});
angular.module("SAML2Module").config(function($provide){$provide.decorator("$messageFactory",["$delegate","$context",function($delegate,$context){var baseAddContextParameters=$delegate.addContextParameters;$delegate.addContextParameters=addAuthInfo;function addAuthInfo(message,type){baseAddContextParameters(message,type);message.saml2_info=$context.getAuthSession()}return $delegate}])});
angular.module("SAML2Module").run(function($rootScope,$context,base64,$timeout,$configurations){$rootScope.$subscribe(chatboxMediatorChannels.SAML_REDIRECTION_RESPONSE,samlRedirectionHandler);$rootScope.$subscribe(globalMediatorChannels.SERVLET_RECEIVE,answerWithAuthResponseHandler);$rootScope.$subscribe(chatboxMediatorChannels.POPIN_DISPLAYED,popinDisplayedHandler);function answerWithAuthResponseHandler(event,response){if(dyduUtils.isDefined(response)&&dyduUtils.isDefined(response.auth))$context.setAuthSession(response.auth)}
var msgBuffer=[];var timeoutForAuth;var frame;var eventMethod=window.addEventListener?"addEventListener":"attachEvent";var eventer=window[eventMethod];var messageEvent=eventMethod=="attachEvent"?"onmessage":"message";eventer(messageEvent,function(e){if(e.data&&dyduUtils.isDefined(e.data.type)&&e.data.type==="auth_session"&&dyduUtils.isDefined(e.data.session)){if(dyduUtils.isDefined(timeoutForAuth))$timeout.cancel(timeoutForAuth);$rootScope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,{hide:true});
$context.setAuthSession(e.data.session);var teaserConfiguration=$context.getTeaserConfiguration(true);teaserConfiguration.show=true;$rootScope.$publish(chatboxMediatorChannels.TEASER_UPDATE,teaserConfiguration);$rootScope.$publish(chatboxMediatorChannels.UNLOCK_TEXTFIELD,{});for(var i=0;i<msgBuffer.length;i++){msgBuffer[i].parameters.saml2_info=e.data.session;$rootScope.$publish(globalMediatorChannels.SERVLET_EMIT,msgBuffer[i])}msgBuffer=[]}},false);function popinDisplayedHandler(evt,data){$rootScope.$publish(globalMediatorChannels.REQUEST_NEW_CONTEXT_ID,
{})}function samlRedirectionHandler(evt,data){if(dyduUtils.isDefined(data.redirection_url)){var teaserConfiguration=$context.getTeaserConfiguration(true);teaserConfiguration.show=false;$rootScope.$publish(chatboxMediatorChannels.TEASER_UPDATE,teaserConfiguration);var urlToRedirect=data.redirection_url;if($configurations.get("saml2.use.relay"))urlToRedirect+="\x26RelayState\x3d"+encodeURI(window.location);if($configurations.get("saml2.redirect.top.window"))window.top.location=urlToRedirect;else{if(!dyduUtils.isDefined(frame)){frame=
document.createElement("iframe");var att=document.createAttribute("sandbox");frame.setAttributeNode(att);angular.element(document.getElementById("dydu-chatbox-app")).append(frame);angular.element(frame).attr("style","display:none;")}angular.element(frame).attr("src",urlToRedirect)}$rootScope.$publish(chatboxMediatorChannels.LOCK_TEXTFIELD,{});if(teaserConfiguration.show)timeoutForAuth=$timeout(function(){$rootScope.$publish(chatboxMediatorChannels.CONFIRM_DIALOG_UPDATE,{clazz:"saml-auth-error",title:$rootScope.resources.get("saml2.no-auth.title"),
text:$rootScope.resources.get("saml2.no-auth.text")})},7E3)}if(data.request){var request=JSON.parse(data.request);request.parameters=decodeParameters(request.parameters,base64);msgBuffer.push(request)}}});
angular.module("SAML2Module").config(function($provide){$provide.decorator("$context",["$delegate",function($delegate){var AUTH_SESSION="dydu.auth_session";$delegate.getAuthSession=getAuthSession;$delegate.setAuthSession=setAuthSession;function getAuthSession(){return $delegate.getData(AUTH_SESSION,"")}function setAuthSession(authSession){$delegate.setData(AUTH_SESSION,authSession,{path:"/"})}return $delegate}])});


/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(window,angular,undefined){angular.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var NG_ANIMATE_CHILDREN="$$ngAnimateChildren";return function(scope,element,attrs){var val=attrs.ngAnimateChildren;if(angular.isString(val)&&val.length===0)element.data(NG_ANIMATE_CHILDREN,true);else scope.$watch(val,function(value){element.data(NG_ANIMATE_CHILDREN,!!value)})}}).factory("$$animateReflow",["$$rAF","$document",function($$rAF,$document){var bod=$document[0].body;return function(fn){return $$rAF(function(){var a=
bod.offsetWidth+1;fn()})}}]).config(["$provide","$animateProvider",function($provide,$animateProvider){var noop=angular.noop;var forEach=angular.forEach;var selectors=$animateProvider.$$selectors;var ELEMENT_NODE=1;var NG_ANIMATE_STATE="$$ngAnimateState";var NG_ANIMATE_CHILDREN="$$ngAnimateChildren";var NG_ANIMATE_CLASS_NAME="ng-animate";var rootAnimateState={running:true};function extractElementNode(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType==ELEMENT_NODE)return elm}}
function prepareElement(element){return element&&angular.element(element)}function stripCommentsFromElement(element){return angular.element(extractElementNode(element))}function isMatchingElement(elm1,elm2){return extractElementNode(elm1)==extractElementNode(elm2)}$provide.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function($delegate,$injector,$sniffer,$rootElement,$$asyncCallback,$rootScope,$document){var globalAnimationCounter=
0;$rootElement.data(NG_ANIMATE_STATE,rootAnimateState);$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){rootAnimateState.running=false})});var classNameFilter=$animateProvider.classNameFilter();var isAnimatableClassName=!classNameFilter?function(){return true}:function(className){return classNameFilter.test(className)};function blockElementAnimations(element){var data=element.data(NG_ANIMATE_STATE)||{};data.running=true;element.data(NG_ANIMATE_STATE,data)}function lookup(name){if(name){var matches=
[],flagMap={},classes=name.substr(1).split(".");if($sniffer.transitions||$sniffer.animations)matches.push($injector.get(selectors[""]));for(var i=0;i<classes.length;i++){var klass=classes[i],selectorFactoryName=selectors[klass];if(selectorFactoryName&&!flagMap[klass]){matches.push($injector.get(selectorFactoryName));flagMap[klass]=true}}return matches}}function animationRunner(element,animationEvent,className){var node=element[0];if(!node)return;var isSetClassOperation=animationEvent=="setClass";
var isClassBased=isSetClassOperation||animationEvent=="addClass"||animationEvent=="removeClass";var classNameAdd,classNameRemove;if(angular.isArray(className)){classNameAdd=className[0];classNameRemove=className[1];className=classNameAdd+" "+classNameRemove}var currentClassName=element.attr("class");var classes=currentClassName+" "+className;if(!isAnimatableClassName(classes))return;var beforeComplete=noop,beforeCancel=[],before=[],afterComplete=noop,afterCancel=[],after=[];var animationLookup=(" "+
classes).replace(/\s+/g,".");forEach(lookup(animationLookup),function(animationFactory){var created=registerAnimation(animationFactory,animationEvent);if(!created&&isSetClassOperation){registerAnimation(animationFactory,"addClass");registerAnimation(animationFactory,"removeClass")}});function registerAnimation(animationFactory,event){var afterFn=animationFactory[event];var beforeFn=animationFactory["before"+event.charAt(0).toUpperCase()+event.substr(1)];if(afterFn||beforeFn){if(event=="leave"){beforeFn=
afterFn;afterFn=null}after.push({event:event,fn:afterFn});before.push({event:event,fn:beforeFn});return true}}function run(fns,cancellations,allCompleteFn){var animations=[];forEach(fns,function(animation){animation.fn&&animations.push(animation)});var count=0;function afterAnimationComplete(index){if(cancellations){(cancellations[index]||noop)();if(++count<animations.length)return;cancellations=null}allCompleteFn()}forEach(animations,function(animation,index){var progress=function(){afterAnimationComplete(index)};
switch(animation.event){case "setClass":cancellations.push(animation.fn(element,classNameAdd,classNameRemove,progress));break;case "addClass":cancellations.push(animation.fn(element,classNameAdd||className,progress));break;case "removeClass":cancellations.push(animation.fn(element,classNameRemove||className,progress));break;default:cancellations.push(animation.fn(element,progress));break}});if(cancellations&&cancellations.length===0)allCompleteFn()}return{node:node,event:animationEvent,className:className,
isClassBased:isClassBased,isSetClassOperation:isSetClassOperation,before:function(allCompleteFn){beforeComplete=allCompleteFn;run(before,beforeCancel,function(){beforeComplete=noop;allCompleteFn()})},after:function(allCompleteFn){afterComplete=allCompleteFn;run(after,afterCancel,function(){afterComplete=noop;allCompleteFn()})},cancel:function(){if(beforeCancel){forEach(beforeCancel,function(cancelFn){(cancelFn||noop)(true)});beforeComplete(true)}if(afterCancel){forEach(afterCancel,function(cancelFn){(cancelFn||
noop)(true)});afterComplete(true)}}}}return{enter:function(element,parentElement,afterElement,doneCallback){element=angular.element(element);parentElement=prepareElement(parentElement);afterElement=prepareElement(afterElement);blockElementAnimations(element);$delegate.enter(element,parentElement,afterElement);$rootScope.$$postDigest(function(){element=stripCommentsFromElement(element);performAnimation("enter","ng-enter",element,parentElement,afterElement,noop,doneCallback)})},leave:function(element,
doneCallback){element=angular.element(element);cancelChildAnimations(element);blockElementAnimations(element);$rootScope.$$postDigest(function(){performAnimation("leave","ng-leave",stripCommentsFromElement(element),null,null,function(){$delegate.leave(element)},doneCallback)})},move:function(element,parentElement,afterElement,doneCallback){element=angular.element(element);parentElement=prepareElement(parentElement);afterElement=prepareElement(afterElement);cancelChildAnimations(element);blockElementAnimations(element);
$delegate.move(element,parentElement,afterElement);$rootScope.$$postDigest(function(){element=stripCommentsFromElement(element);performAnimation("move","ng-move",element,parentElement,afterElement,noop,doneCallback)})},addClass:function(element,className,doneCallback){element=angular.element(element);element=stripCommentsFromElement(element);performAnimation("addClass",className,element,null,null,function(){$delegate.addClass(element,className)},doneCallback)},removeClass:function(element,className,
doneCallback){element=angular.element(element);element=stripCommentsFromElement(element);performAnimation("removeClass",className,element,null,null,function(){$delegate.removeClass(element,className)},doneCallback)},setClass:function(element,add,remove,doneCallback){element=angular.element(element);element=stripCommentsFromElement(element);performAnimation("setClass",[add,remove],element,null,null,function(){$delegate.setClass(element,add,remove)},doneCallback)},enabled:function(value,element){switch(arguments.length){case 2:if(value)cleanup(element);
else{var data=element.data(NG_ANIMATE_STATE)||{};data.disabled=true;element.data(NG_ANIMATE_STATE,data)}break;case 1:rootAnimateState.disabled=!value;break;default:value=!rootAnimateState.disabled;break}return!!value}};function performAnimation(animationEvent,className,element,parentElement,afterElement,domOperation,doneCallback){var runner=animationRunner(element,animationEvent,className);if(!runner){fireDOMOperation();fireBeforeCallbackAsync();fireAfterCallbackAsync();closeAnimation();return}className=
runner.className;var elementEvents=angular.element._data(runner.node);elementEvents=elementEvents&&elementEvents.events;if(!parentElement)parentElement=afterElement?afterElement.parent():element.parent();var ngAnimateState=element.data(NG_ANIMATE_STATE)||{};var runningAnimations=ngAnimateState.active||{};var totalActiveAnimations=ngAnimateState.totalActive||0;var lastAnimation=ngAnimateState.last;var skipAnimations;if(runner.isClassBased)skipAnimations=ngAnimateState.running||ngAnimateState.disabled||
lastAnimation&&!lastAnimation.isClassBased;if(skipAnimations||animationsDisabled(element,parentElement)){fireDOMOperation();fireBeforeCallbackAsync();fireAfterCallbackAsync();closeAnimation();return}var skipAnimation=false;if(totalActiveAnimations>0){var animationsToCancel=[];if(!runner.isClassBased)if(animationEvent=="leave"&&runningAnimations["ng-leave"])skipAnimation=true;else{for(var klass in runningAnimations){animationsToCancel.push(runningAnimations[klass]);cleanup(element,klass)}runningAnimations=
{};totalActiveAnimations=0}else if(lastAnimation.event=="setClass"){animationsToCancel.push(lastAnimation);cleanup(element,className)}else if(runningAnimations[className]){var current=runningAnimations[className];if(current.event==animationEvent)skipAnimation=true;else{animationsToCancel.push(current);cleanup(element,className)}}if(animationsToCancel.length>0)forEach(animationsToCancel,function(operation){operation.cancel()})}if(runner.isClassBased&&!runner.isSetClassOperation&&!skipAnimation)skipAnimation=
animationEvent=="addClass"==element.hasClass(className);if(skipAnimation){fireDOMOperation();fireBeforeCallbackAsync();fireAfterCallbackAsync();fireDoneCallbackAsync();return}if(animationEvent=="leave")element.one("$destroy",function(e){var element=angular.element(this);var state=element.data(NG_ANIMATE_STATE);if(state){var activeLeaveAnimation=state.active["ng-leave"];if(activeLeaveAnimation){activeLeaveAnimation.cancel();cleanup(element,"ng-leave")}}});element.addClass(NG_ANIMATE_CLASS_NAME);var localAnimationCount=
globalAnimationCounter++;totalActiveAnimations++;runningAnimations[className]=runner;element.data(NG_ANIMATE_STATE,{last:runner,active:runningAnimations,index:localAnimationCount,totalActive:totalActiveAnimations});fireBeforeCallbackAsync();runner.before(function(cancelled){var data=element.data(NG_ANIMATE_STATE);cancelled=cancelled||!data||!data.active[className]||runner.isClassBased&&data.active[className].event!=animationEvent;fireDOMOperation();if(cancelled===true)closeAnimation();else{fireAfterCallbackAsync();
runner.after(closeAnimation)}});function fireDOMCallback(animationPhase){var eventName="$animate:"+animationPhase;if(elementEvents&&elementEvents[eventName]&&elementEvents[eventName].length>0)$$asyncCallback(function(){element.triggerHandler(eventName,{event:animationEvent,className:className})})}function fireBeforeCallbackAsync(){fireDOMCallback("before")}function fireAfterCallbackAsync(){fireDOMCallback("after")}function fireDoneCallbackAsync(){fireDOMCallback("close");if(doneCallback)$$asyncCallback(function(){doneCallback()})}
function fireDOMOperation(){if(!fireDOMOperation.hasBeenRun){fireDOMOperation.hasBeenRun=true;domOperation()}}function closeAnimation(){if(!closeAnimation.hasBeenRun){closeAnimation.hasBeenRun=true;var data=element.data(NG_ANIMATE_STATE);if(data)if(runner&&runner.isClassBased)cleanup(element,className);else{$$asyncCallback(function(){var data=element.data(NG_ANIMATE_STATE)||{};if(localAnimationCount==data.index)cleanup(element,className,animationEvent)});element.data(NG_ANIMATE_STATE,data)}fireDoneCallbackAsync()}}
}function cancelChildAnimations(element){var node=extractElementNode(element);if(node){var nodes=angular.isFunction(node.getElementsByClassName)?node.getElementsByClassName(NG_ANIMATE_CLASS_NAME):node.querySelectorAll("."+NG_ANIMATE_CLASS_NAME);forEach(nodes,function(element){element=angular.element(element);var data=element.data(NG_ANIMATE_STATE);if(data&&data.active)forEach(data.active,function(runner){runner.cancel()})})}}function cleanup(element,className){if(isMatchingElement(element,$rootElement)){if(!rootAnimateState.disabled){rootAnimateState.running=
false;rootAnimateState.structural=false}}else if(className){var data=element.data(NG_ANIMATE_STATE)||{};var removeAnimations=className===true;if(!removeAnimations&&data.active&&data.active[className]){data.totalActive--;delete data.active[className]}if(removeAnimations||!data.totalActive){element.removeClass(NG_ANIMATE_CLASS_NAME);element.removeData(NG_ANIMATE_STATE)}}}function animationsDisabled(element,parentElement){if(rootAnimateState.disabled)return true;if(isMatchingElement(element,$rootElement))return rootAnimateState.running;
var allowChildAnimations,parentRunningAnimation,hasParent;do{if(parentElement.length===0)break;var isRoot=isMatchingElement(parentElement,$rootElement);var state=isRoot?rootAnimateState:parentElement.data(NG_ANIMATE_STATE)||{};if(state.disabled)return true;if(isRoot)hasParent=true;if(allowChildAnimations!==false){var animateChildrenFlag=parentElement.data(NG_ANIMATE_CHILDREN);if(angular.isDefined(animateChildrenFlag))allowChildAnimations=animateChildrenFlag}parentRunningAnimation=parentRunningAnimation||
state.running||state.last&&!state.last.isClassBased}while(parentElement=parentElement.parent());return!hasParent||!allowChildAnimations&&parentRunningAnimation}}]);$animateProvider.register("",["$window","$sniffer","$timeout","$$animateReflow",function($window,$sniffer,$timeout,$$animateReflow){var CSS_PREFIX="",TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT;if(window.ontransitionend===undefined&&window.onwebkittransitionend!==undefined){CSS_PREFIX="-webkit-";TRANSITION_PROP=
"WebkitTransition";TRANSITIONEND_EVENT="webkitTransitionEnd transitionend"}else{TRANSITION_PROP="transition";TRANSITIONEND_EVENT="transitionend"}if(window.onanimationend===undefined&&window.onwebkitanimationend!==undefined){CSS_PREFIX="-webkit-";ANIMATION_PROP="WebkitAnimation";ANIMATIONEND_EVENT="webkitAnimationEnd animationend"}else{ANIMATION_PROP="animation";ANIMATIONEND_EVENT="animationend"}var DURATION_KEY="Duration";var PROPERTY_KEY="Property";var DELAY_KEY="Delay";var ANIMATION_ITERATION_COUNT_KEY=
"IterationCount";var NG_ANIMATE_PARENT_KEY="$$ngAnimateKey";var NG_ANIMATE_CSS_DATA_KEY="$$ngAnimateCSS3Data";var NG_ANIMATE_BLOCK_CLASS_NAME="ng-animate-block-transitions";var ELAPSED_TIME_MAX_DECIMAL_PLACES=3;var CLOSING_TIME_BUFFER=1.5;var ONE_SECOND=1E3;var lookupCache={};var parentCounter=0;var animationReflowQueue=[];var cancelAnimationReflow;function afterReflow(element,callback){if(cancelAnimationReflow)cancelAnimationReflow();animationReflowQueue.push(callback);cancelAnimationReflow=$$animateReflow(function(){forEach(animationReflowQueue,
function(fn){fn()});animationReflowQueue=[];cancelAnimationReflow=null;lookupCache={}})}var closingTimer=null;var closingTimestamp=0;var animationElementQueue=[];function animationCloseHandler(element,totalTime){var node=extractElementNode(element);element=angular.element(node);animationElementQueue.push(element);var futureTimestamp=Date.now()+totalTime;if(futureTimestamp<=closingTimestamp)return;$timeout.cancel(closingTimer);closingTimestamp=futureTimestamp;closingTimer=$timeout(function(){closeAllAnimations(animationElementQueue);
animationElementQueue=[]},totalTime,false)}function closeAllAnimations(elements){forEach(elements,function(element){var elementData=element.data(NG_ANIMATE_CSS_DATA_KEY);if(elementData)(elementData.closeAnimationFn||noop)()})}function getElementAnimationDetails(element,cacheKey){var data=cacheKey?lookupCache[cacheKey]:null;if(!data){var transitionDuration=0;var transitionDelay=0;var animationDuration=0;var animationDelay=0;var transitionDelayStyle;var animationDelayStyle;var transitionDurationStyle;
var transitionPropertyStyle;forEach(element,function(element){if(element.nodeType==ELEMENT_NODE){var elementStyles=$window.getComputedStyle(element)||{};transitionDurationStyle=elementStyles[TRANSITION_PROP+DURATION_KEY];transitionDuration=Math.max(parseMaxTime(transitionDurationStyle),transitionDuration);transitionPropertyStyle=elementStyles[TRANSITION_PROP+PROPERTY_KEY];transitionDelayStyle=elementStyles[TRANSITION_PROP+DELAY_KEY];transitionDelay=Math.max(parseMaxTime(transitionDelayStyle),transitionDelay);
animationDelayStyle=elementStyles[ANIMATION_PROP+DELAY_KEY];animationDelay=Math.max(parseMaxTime(animationDelayStyle),animationDelay);var aDuration=parseMaxTime(elementStyles[ANIMATION_PROP+DURATION_KEY]);if(aDuration>0)aDuration*=parseInt(elementStyles[ANIMATION_PROP+ANIMATION_ITERATION_COUNT_KEY],10)||1;animationDuration=Math.max(aDuration,animationDuration)}});data={total:0,transitionPropertyStyle:transitionPropertyStyle,transitionDurationStyle:transitionDurationStyle,transitionDelayStyle:transitionDelayStyle,
transitionDelay:transitionDelay,transitionDuration:transitionDuration,animationDelayStyle:animationDelayStyle,animationDelay:animationDelay,animationDuration:animationDuration};if(cacheKey)lookupCache[cacheKey]=data}return data}function parseMaxTime(str){var maxValue=0;var values=angular.isString(str)?str.split(/\s*,\s*/):[];forEach(values,function(value){maxValue=Math.max(parseFloat(value)||0,maxValue)});return maxValue}function getCacheKey(element){var parentElement=element.parent();var parentID=
parentElement.data(NG_ANIMATE_PARENT_KEY);if(!parentID){parentElement.data(NG_ANIMATE_PARENT_KEY,++parentCounter);parentID=parentCounter}return parentID+"-"+extractElementNode(element).getAttribute("class")}function animateSetup(animationEvent,element,className,calculationDecorator){var cacheKey=getCacheKey(element);var eventCacheKey=cacheKey+" "+className;var itemIndex=lookupCache[eventCacheKey]?++lookupCache[eventCacheKey].total:0;var stagger={};if(itemIndex>0){var staggerClassName=className+"-stagger";
var staggerCacheKey=cacheKey+" "+staggerClassName;var applyClasses=!lookupCache[staggerCacheKey];applyClasses&&element.addClass(staggerClassName);stagger=getElementAnimationDetails(element,staggerCacheKey);applyClasses&&element.removeClass(staggerClassName)}calculationDecorator=calculationDecorator||function(fn){return fn()};element.addClass(className);var formerData=element.data(NG_ANIMATE_CSS_DATA_KEY)||{};var timings=calculationDecorator(function(){return getElementAnimationDetails(element,eventCacheKey)});
var transitionDuration=timings.transitionDuration;var animationDuration=timings.animationDuration;if(transitionDuration===0&&animationDuration===0){element.removeClass(className);return false}element.data(NG_ANIMATE_CSS_DATA_KEY,{running:formerData.running||0,itemIndex:itemIndex,stagger:stagger,timings:timings,closeAnimationFn:noop});var isCurrentlyAnimating=formerData.running>0||animationEvent=="setClass";if(transitionDuration>0)blockTransitions(element,className,isCurrentlyAnimating);if(animationDuration>
0&&stagger.animationDelay>0&&stagger.animationDuration===0)blockKeyframeAnimations(element);return true}function isStructuralAnimation(className){return className=="ng-enter"||className=="ng-move"||className=="ng-leave"}function blockTransitions(element,className,isAnimating){if(isStructuralAnimation(className)||!isAnimating)extractElementNode(element).style[TRANSITION_PROP+PROPERTY_KEY]="none";else element.addClass(NG_ANIMATE_BLOCK_CLASS_NAME)}function blockKeyframeAnimations(element){extractElementNode(element).style[ANIMATION_PROP]=
"none 0s"}function unblockTransitions(element,className){var prop=TRANSITION_PROP+PROPERTY_KEY;var node=extractElementNode(element);if(node.style[prop]&&node.style[prop].length>0)node.style[prop]="";element.removeClass(NG_ANIMATE_BLOCK_CLASS_NAME)}function unblockKeyframeAnimations(element){var prop=ANIMATION_PROP;var node=extractElementNode(element);if(node.style[prop]&&node.style[prop].length>0)node.style[prop]=""}function animateRun(animationEvent,element,className,activeAnimationComplete){var node=
extractElementNode(element);var elementData=element.data(NG_ANIMATE_CSS_DATA_KEY);if(node.getAttribute("class").indexOf(className)==-1||!elementData){activeAnimationComplete();return}var activeClassName="";forEach(className.split(" "),function(klass,i){activeClassName+=(i>0?" ":"")+klass+"-active"});var stagger=elementData.stagger;var timings=elementData.timings;var itemIndex=elementData.itemIndex;var maxDuration=Math.max(timings.transitionDuration,timings.animationDuration);var maxDelay=Math.max(timings.transitionDelay,
timings.animationDelay);var maxDelayTime=maxDelay*ONE_SECOND;var startTime=Date.now();var css3AnimationEvents=ANIMATIONEND_EVENT+" "+TRANSITIONEND_EVENT;var style="",appliedStyles=[];if(timings.transitionDuration>0){var propertyStyle=timings.transitionPropertyStyle;if(propertyStyle.indexOf("all")==-1){style+=CSS_PREFIX+"transition-property: "+propertyStyle+";";style+=CSS_PREFIX+"transition-duration: "+timings.transitionDurationStyle+";";appliedStyles.push(CSS_PREFIX+"transition-property");appliedStyles.push(CSS_PREFIX+
"transition-duration")}}if(itemIndex>0){if(stagger.transitionDelay>0&&stagger.transitionDuration===0){var delayStyle=timings.transitionDelayStyle;style+=CSS_PREFIX+"transition-delay: "+prepareStaggerDelay(delayStyle,stagger.transitionDelay,itemIndex)+"; ";appliedStyles.push(CSS_PREFIX+"transition-delay")}if(stagger.animationDelay>0&&stagger.animationDuration===0){style+=CSS_PREFIX+"animation-delay: "+prepareStaggerDelay(timings.animationDelayStyle,stagger.animationDelay,itemIndex)+"; ";appliedStyles.push(CSS_PREFIX+
"animation-delay")}}if(appliedStyles.length>0){var oldStyle=node.getAttribute("style")||"";node.setAttribute("style",oldStyle+"; "+style)}element.on(css3AnimationEvents,onAnimationProgress);element.addClass(activeClassName);elementData.closeAnimationFn=function(){onEnd();activeAnimationComplete()};var staggerTime=itemIndex*(Math.max(stagger.animationDelay,stagger.transitionDelay)||0);var animationTime=(maxDelay+maxDuration)*CLOSING_TIME_BUFFER;var totalTime=(staggerTime+animationTime)*ONE_SECOND;
elementData.running++;animationCloseHandler(element,totalTime);return onEnd;function onEnd(cancelled){element.off(css3AnimationEvents,onAnimationProgress);element.removeClass(activeClassName);animateClose(element,className);var node=extractElementNode(element);for(var i in appliedStyles)node.style.removeProperty(appliedStyles[i])}function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event;var timeStamp=ev.$manualTimeStamp||ev.timeStamp||Date.now();var elapsedTime=
parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));if(Math.max(timeStamp-startTime,0)>=maxDelayTime&&elapsedTime>=maxDuration)activeAnimationComplete()}}function prepareStaggerDelay(delayStyle,staggerDelay,index){var style="";forEach(delayStyle.split(","),function(val,i){style+=(i>0?",":"")+(index*staggerDelay+parseInt(val,10))+"s"});return style}function animateBefore(animationEvent,element,className,calculationDecorator){if(animateSetup(animationEvent,element,className,calculationDecorator))return function(cancelled){cancelled&&
animateClose(element,className)}}function animateAfter(animationEvent,element,className,afterAnimationComplete){if(element.data(NG_ANIMATE_CSS_DATA_KEY))return animateRun(animationEvent,element,className,afterAnimationComplete);else{animateClose(element,className);afterAnimationComplete()}}function animate(animationEvent,element,className,animationComplete){var preReflowCancellation=animateBefore(animationEvent,element,className);if(!preReflowCancellation){animationComplete();return}var cancel=preReflowCancellation;
afterReflow(element,function(){unblockTransitions(element,className);unblockKeyframeAnimations(element);cancel=animateAfter(animationEvent,element,className,animationComplete)});return function(cancelled){(cancel||noop)(cancelled)}}function animateClose(element,className){element.removeClass(className);var data=element.data(NG_ANIMATE_CSS_DATA_KEY);if(data){if(data.running)data.running--;if(!data.running||data.running===0)element.removeData(NG_ANIMATE_CSS_DATA_KEY)}}return{enter:function(element,
animationCompleted){return animate("enter",element,"ng-enter",animationCompleted)},leave:function(element,animationCompleted){return animate("leave",element,"ng-leave",animationCompleted)},move:function(element,animationCompleted){return animate("move",element,"ng-move",animationCompleted)},beforeSetClass:function(element,add,remove,animationCompleted){var className=suffixClasses(remove,"-remove")+" "+suffixClasses(add,"-add");var cancellationMethod=animateBefore("setClass",element,className,function(fn){var klass=
element.attr("class");element.removeClass(remove);element.addClass(add);var timings=fn();element.attr("class",klass);return timings});if(cancellationMethod){afterReflow(element,function(){unblockTransitions(element,className);unblockKeyframeAnimations(element);animationCompleted()});return cancellationMethod}animationCompleted()},beforeAddClass:function(element,className,animationCompleted){var cancellationMethod=animateBefore("addClass",element,suffixClasses(className,"-add"),function(fn){element.addClass(className);
var timings=fn();element.removeClass(className);return timings});if(cancellationMethod){afterReflow(element,function(){unblockTransitions(element,className);unblockKeyframeAnimations(element);animationCompleted()});return cancellationMethod}animationCompleted()},setClass:function(element,add,remove,animationCompleted){remove=suffixClasses(remove,"-remove");add=suffixClasses(add,"-add");var className=remove+" "+add;return animateAfter("setClass",element,className,animationCompleted)},addClass:function(element,
className,animationCompleted){return animateAfter("addClass",element,suffixClasses(className,"-add"),animationCompleted)},beforeRemoveClass:function(element,className,animationCompleted){var cancellationMethod=animateBefore("removeClass",element,suffixClasses(className,"-remove"),function(fn){var klass=element.attr("class");element.removeClass(className);var timings=fn();element.attr("class",klass);return timings});if(cancellationMethod){afterReflow(element,function(){unblockTransitions(element,className);
unblockKeyframeAnimations(element);animationCompleted()});return cancellationMethod}animationCompleted()},removeClass:function(element,className,animationCompleted){return animateAfter("removeClass",element,suffixClasses(className,"-remove"),animationCompleted)}};function suffixClasses(classes,suffix){var className="";classes=angular.isArray(classes)?classes:classes.split(/\s+/);forEach(classes,function(klass,i){if(klass&&klass.length>0)className+=(i>0?" ":"")+klass+suffix});return className}}])}])})(window,
window.angular);

    window.angular = existingAngular;
}());


}
/*
     FILE ARCHIVED ON 14:15:19 Jul 03, 2021 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 09:41:09 Jul 08, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  RedisCDXSource: 0.747
  exclusion.robots: 0.23
  CDXLines.iter: 53.365 (3)
  esindex: 0.016
  captures_list: 134.959
  exclusion.robots.policy: 0.215
  LoadShardBlock: 74.446 (3)
  PetaboxLoader3.datanode: 95.066 (4)
  load_resource: 158.798
  PetaboxLoader3.resolve: 118.343
*/